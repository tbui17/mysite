!function(){var t={33042:function(t,e,n){var r;!function(){"use strict";var o=function t(e){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(t){var e=Object.getPrototypeOf(t);return e?Object.create(e):{}}function a(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:n})}function s(t,e){a(t,e,(function(){throw new g("The "+e+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(n=e)||Array.isArray(n)||null===n||void 0!==e.use_static&&(o.use_static=Boolean(e.use_static));var u="__immutable_invariants_hold";function c(t){return"object"!=typeof t||(null===t||Boolean(Object.getOwnPropertyDescriptor(t,u)))}function l(t,e){return t===e||t!=t&&e!=e}function d(t){return!(null===t||"object"!=typeof t||Array.isArray(t)||t instanceof Date)}var p=["setPrototypeOf"],f=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),y=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),h=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function g(t){this.name="MyError",this.message=t,this.stack=(new Error).stack}function E(t,e){for(var n in a(t,u,!0),e)e.hasOwnProperty(n)&&s(t,e[n]);return Object.freeze(t),t}function v(t,e){var n=t[e];a(t,e,(function(){return x(n.apply(t,arguments))}))}function O(t,e,n){var r=n&&n.deep;if(t in this&&(r&&this[t]!==e&&d(e)&&d(this[t])&&(e=x.merge(this[t],e,{deep:!0,mode:"replace"})),l(this[t],e)))return this;var o=I.call(this);return o[t]=x(e),m(o)}g.prototype=new Error,g.prototype.constructor=Error;var _=x([]);function b(t,e,n){var r=t[0];if(1===t.length)return O.call(this,r,e,n);var o,i=t.slice(1),a=this[r];if("object"==typeof a&&null!==a)o=x.setIn(a,i,e);else{var s=i[0];o=""!==s&&isFinite(s)?b.call(_,i,e):F.call(U,i,e)}if(r in this&&a===o)return this;var u=I.call(this);return u[r]=o,m(u)}function m(t){for(var e in y){if(y.hasOwnProperty(e))v(t,y[e])}o.use_static||(a(t,"flatMap",L),a(t,"asObject",A),a(t,"asMutable",I),a(t,"set",O),a(t,"setIn",b),a(t,"update",G),a(t,"updateIn",H),a(t,"getIn",W));for(var n=0,r=t.length;n<r;n++)t[n]=x(t[n]);return E(t,f)}function T(){return new Date(this.getTime())}function L(t){if(0===arguments.length)return this;var e,n=[],r=this.length;for(e=0;e<r;e++){var o=t(this[e],e,this);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return m(n)}function C(t){if(void 0===t&&0===arguments.length)return this;if("function"!=typeof t){var e=Array.isArray(t)?t.slice():Array.prototype.slice.call(arguments);e.forEach((function(t,e,n){"number"==typeof t&&(n[e]=t.toString())})),t=function(t,n){return-1!==e.indexOf(n)}}var n=i(this);for(var r in this)this.hasOwnProperty(r)&&!1===t(this[r],r)&&(n[r]=this[r]);return B(n)}function I(t){var e,n,r=[];if(t&&t.deep)for(e=0,n=this.length;e<n;e++)r.push(S(this[e]));else for(e=0,n=this.length;e<n;e++)r.push(this[e]);return r}function A(t){"function"!=typeof t&&(t=function(t){return t});var e,n={},r=this.length;for(e=0;e<r;e++){var o=t(this[e],e,this),i=o[0],a=o[1];n[i]=a}return B(n)}function S(t){return!t||"object"!=typeof t||!Object.getOwnPropertyDescriptor(t,u)||t instanceof Date?t:x.asMutable(t,{deep:!0})}function w(t,e){for(var n in t)Object.getOwnPropertyDescriptor(t,n)&&(e[n]=t[n]);return e}function M(t,e){if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(t));var n,r,o=Array.isArray(t),a=e&&e.deep,s=e&&e.mode||"merge",u=e&&e.merger;function c(t,r,o){var s,c=x(r[o]),p=u&&u(t[o],c,e),f=t[o];void 0===n&&void 0===p&&t.hasOwnProperty(o)&&l(c,f)||(l(f,s=void 0!==p?p:a&&d(f)&&d(c)?x.merge(f,c,e):c)&&t.hasOwnProperty(o)||(void 0===n&&(n=w(t,i(t))),n[o]=s))}function p(t,e){for(var r in t)e.hasOwnProperty(r)||(void 0===n&&(n=w(t,i(t))),delete n[r])}if(o)for(var f=0,y=t.length;f<y;f++){var h=t[f];for(r in h)h.hasOwnProperty(r)&&c(void 0!==n?n:this,h,r)}else{for(r in t)Object.getOwnPropertyDescriptor(t,r)&&c(this,t,r);"replace"===s&&p(this,t)}return void 0===n?this:B(n)}function P(t,e){var n=e&&e.deep;if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(t));return x.merge(this,t,{deep:n,mode:"replace"})}var R,D,N,U=x({});function F(t,e,n){if(!Array.isArray(t)||0===t.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=t[0];if(1===t.length)return j.call(this,r,e,n);var o,a=t.slice(1),s=this[r];if(o=this.hasOwnProperty(r)&&"object"==typeof s&&null!==s?x.setIn(s,a,e):F.call(U,a,e),this.hasOwnProperty(r)&&s===o)return this;var u=w(this,i(this));return u[r]=o,B(u)}function j(t,e,n){var r=n&&n.deep;if(this.hasOwnProperty(t)&&(r&&this[t]!==e&&d(e)&&d(this[t])&&(e=x.merge(this[t],e,{deep:!0,mode:"replace"})),l(this[t],e)))return this;var o=w(this,i(this));return o[t]=x(e),B(o)}function G(t,e){var n=Array.prototype.slice.call(arguments,2),r=this[t];return x.set(this,t,e.apply(r,[r].concat(n)))}function Y(t,e){for(var n=0,r=e.length;null!=t&&n<r;n++)t=t[e[n]];return n&&n==r?t:void 0}function H(t,e){var n=Array.prototype.slice.call(arguments,2),r=Y(this,t);return x.setIn(this,t,e.apply(r,[r].concat(n)))}function W(t,e){var n=Y(this,t);return void 0===n?e:n}function k(t){var e,n=i(this);if(t&&t.deep)for(e in this)this.hasOwnProperty(e)&&(n[e]=S(this[e]));else for(e in this)this.hasOwnProperty(e)&&(n[e]=this[e]);return n}function V(){return{}}function B(t){return o.use_static||(a(t,"merge",M),a(t,"replace",P),a(t,"without",C),a(t,"asMutable",k),a(t,"set",j),a(t,"setIn",F),a(t,"update",G),a(t,"updateIn",H),a(t,"getIn",W)),E(t,p)}function x(t,e,n){if(c(t)||function(t){return"object"==typeof t&&null!==t&&(60103===t.$$typeof||t.$$typeof===r)}(t)||function(t){return"undefined"!=typeof File&&t instanceof File}(t)||function(t){return"undefined"!=typeof Blob&&t instanceof Blob}(t)||function(t){return t instanceof Error}(t))return t;if(function(t){return"object"==typeof t&&"function"==typeof t.then}(t))return t.then(x);if(Array.isArray(t))return m(t.slice());if(t instanceof Date)return i=new Date(t.getTime()),o.use_static||a(i,"asMutable",T),E(i,h);var i,s=e&&e.prototype,u=(s&&s!==Object.prototype?function(){return Object.create(s)}:V)();if(null==n&&(n=64),n<=0)throw new g("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var l in n-=1,t)Object.getOwnPropertyDescriptor(t,l)&&(u[l]=x(t[l],void 0,n));return B(u)}function $(t){return function(){var e=[].slice.call(arguments),n=e.shift();return t.apply(n,e)}}function z(t,e){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?e.apply(r,n):t.apply(r,n)}}return x.from=x,x.isImmutable=c,x.ImmutableError=g,x.merge=$(M),x.replace=$(P),x.without=$(C),x.asMutable=(R=k,D=I,N=T,function(){var t=[].slice.call(arguments),e=t.shift();return Array.isArray(e)?D.apply(e,t):e instanceof Date?N.apply(e,t):R.apply(e,t)}),x.set=z(j,O),x.setIn=z(F,b),x.update=$(G),x.updateIn=$(H),x.getIn=$(W),x.flatMap=$(L),x.asObject=$(A),o.use_static||(x.static=t({use_static:!0})),Object.freeze(x),x}();void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};!function(){"use strict";n.r(r),n.d(r,{addFetchError:function(){return y},addFetchLog:function(){return d},addGlobalParentAttr:function(){return R},addSyncWorthyChange:function(){return b},clearLayouts:function(){return p},clearSyncWorthyChanges:function(){return m},closeConfirmationPopup:function(){return _},deleteFetchError:function(){return h},deleteFetchLog:function(){return f},deletePreEditContent:function(){return T},effects:function(){return G},fetchData:function(){return l},filterLocalAttributesFromContent:function(){return F},getFetchError:function(){return x},getFetchLog:function(){return B},getGlobalLayoutMap:function(){return z},getLayout:function(){return k},getLayoutContent:function(){return V},getLayoutRootUUID:function(){return $},getLayouts:function(){return W},getSyncWorthyChanges:function(){return X},hasPreEditContent:function(){return Q},hasSyncWorthyChanges:function(){return Z},isConfirmationPopupOpen:function(){return J},isLayoutSaving:function(){return q},isSavingAnyLayout:function(){return K},mergeGlobalModules:function(){return D},openConfirmationPopup:function(){return O},registerGlobalLayoutStore:function(){return tt},resetState:function(){return I},saveLayout:function(){return E},saveLayoutWithoutHistoryEntry:function(){return L},setGlobalLayoutMap:function(){return g},setIsLayoutSaving:function(){return C},setLayoutContent:function(){return c},setPreEditContent:function(){return v}});var t={};n.r(t),n.d(t,{addFetchError:function(){return y},addFetchLog:function(){return d},addSyncWorthyChange:function(){return b},clearLayouts:function(){return p},clearSyncWorthyChanges:function(){return m},closeConfirmationPopup:function(){return _},deleteFetchError:function(){return h},deleteFetchLog:function(){return f},deletePreEditContent:function(){return T},fetchData:function(){return l},openConfirmationPopup:function(){return O},resetState:function(){return I},saveLayout:function(){return E},saveLayoutWithoutHistoryEntry:function(){return L},setGlobalLayoutMap:function(){return g},setIsLayoutSaving:function(){return C},setLayoutContent:function(){return c},setPreEditContent:function(){return v}});var e={};n.r(e),n.d(e,{getFetchError:function(){return x},getFetchLog:function(){return B},getGlobalLayoutMap:function(){return z},getLayout:function(){return k},getLayoutContent:function(){return V},getLayoutRootUUID:function(){return $},getLayouts:function(){return W},getSyncWorthyChanges:function(){return X},hasPreEditContent:function(){return Q},hasSyncWorthyChanges:function(){return Z},isConfirmationPopupOpen:function(){return J},isLayoutSaving:function(){return q},isSavingAnyLayout:function(){return K}});var o=window.divi.data,i=window.divi.middleware,a=n(33042),s=n.n(a);const u=s()({layouts:{},fetchLog:{},fetchError:{},syncWorthyChanges:[]}),c=t=>({type:"SET_LAYOUT_CONTENT",params:t}),l=({id:t,owner:e})=>({type:"FETCH_DATA",id:t,owner:e}),d=(t,e)=>({type:"ADD_FETCH_LOG",id:t,owner:e}),p=()=>({type:"CLEAR_LAYOUTS"}),f=t=>({type:"DELETE_FETCH_LOG",id:t}),y=(t,e)=>({type:"ADD_FETCH_ERROR",id:t,owner:e}),h=t=>({type:"DELETE_FETCH_ERROR",id:t}),g=(t,e)=>({type:"SET_GLOBAL_LAYOUT_MAP",id:t,map:e}),E=t=>({type:"SAVE_LAYOUT",...t}),v=t=>({type:"SET_PRE_EDIT_CONTENT",...t}),O=t=>({type:"OPEN_CONFIRMATION_POPUP",...t}),_=t=>({type:"CLOSE_CONFIRMATION_POPUP",...t}),b=t=>({type:"ADD_SYNC_WORTHY_CHANGE",params:t}),m=()=>({type:"CLEAR_SYNC_WORTHY_CHANGES"}),T=t=>({type:"DELETE_PRE_EDIT_CONTENT",...t}),L=t=>({type:"SAVE_LAYOUT_WITHOUT_HISTORY_ENTRY",...t}),C=({id:t,isSaving:e})=>({type:"SET_IS_LAYOUT_SAVING",id:t,isSaving:e}),I=()=>({type:"RESET_STATE"});var A=window.divi.conversion,S=window.divi.rest,w=window.lodash,M=window.divi.editPost,P=window.divi.moduleUtils;const R=(t,e)=>{t.forEach((t=>{(0,o.dispatch)("divi/edit-post").setGlobalParentAttribute(t,e);const n=(0,o.select)("divi/edit-post").getModule(t),r=(0,w.get)(n,"children")?.asMutable();(0,w.isArray)(r)&&r.length>0&&R(r,e)}))},D=(t,e,n)=>{const r=(0,P.maybeUnwrapPlaceholderBlock)(e),i=(0,M.parseSerializedPostIntoFlatModuleObject)(r),a=(0,o.select)("divi/edit-post").getModuleAttrs(n)?.localChildren??!1;(0,o.dispatch)("divi/edit-post").mergeGlobalModules(i,n),a||((0,w.forEach)(i,(({parent:e,children:n},r)=>{"root"===e&&((0,o.dispatch)("divi/edit-post").setGlobalModuleAttribute(r,t),n&&R(n,t))})),(0,w.forEach)(i.root.children,(e=>{(0,o.dispatch)("divi/global-layouts").setLayoutContent({templateId:t,content:i,instanceId:e,syncToServer:!1})})))};var N=window.divi.serializedPost;const U=t=>{const e={};return Object.entries(t).forEach((([t,n])=>{if("object"!=typeof n||null===n||Array.isArray(n))null!=n&&(e[t]=n);else{const r=U(n);(0,w.isEmpty)(r)||(e[t]=r)}})),e},F=(t,e,n,r,o)=>{if(!t)return t;let i;if(!0===r&&(i=Object.keys(t).find((e=>"root"!==e&&"undefined"!==e&&t[e]&&t[e].props))),!(e&&Array.isArray(e)&&0!==e.length||!0===r))return t;const a=e?(t=>Array.isArray(t)&&0!==t.length?t.map((t=>{const e=`${t.attrName}.desktop.value`;return t.subName?`${e}.${t.subName}`:e})):[])(e):[],s={};if(Object.entries(t).forEach((([t,e])=>{const{props:r}=e,{attrs:o}=r;if("root"===t||!o)return void(s[t]=e);let i=(0,w.cloneDeep)(o);if(n)a.forEach((t=>{const e=(0,w.get)(n,t);if(void 0!==e)(0,w.set)(i,t,e);else{const e=(0,P.filterSpecificAttributes)(i,[t]);i=U(e)}}));else{const t=(0,P.filterSpecificAttributes)(o,a);i=U(t)}const u={...i};delete u.globalModule,s[t]={...e,props:{...r,attrs:u}}})),!0===r&&o&&i){const e=Object.keys(o).find((t=>"root"!==t&&o[t]));if(i&&e){const n=o[e];if(n){s[i]&&(s[i]={...s[i],children:n.children||[]});const r=new Set,a=(t,e)=>{const n=e[t];n&&n.children&&n.children.forEach((t=>{r.add(t),a(t,e)}))};a(i,t),r.forEach((t=>{delete s[t]}));(new Map).set(e,i);const u=(t,n)=>{const r=o[t];r&&(e!==t&&(s[t]={...r,parent:n}),r.children&&r.children.forEach((e=>{e&&"undefined"!==e&&u(e,t)})))};n.children&&n.children.forEach((t=>{u(t,i)})),s.root&&(s.root={...s.root,children:[i]})}}}return s},j=t=>{const{id:e,owner:n}=t;if(!(0,o.select)("divi/settings").checkRolePermission("edit_global_library"))return;const r=(0,o.select)("divi/global-layouts").getLayoutContent(e)?.asMutable({deep:!0}),i=(0,o.select)("divi/global-layouts").getLayout(e),a=i?.preEditContent?.asMutable({deep:!0}),s=n?(0,o.select)("divi/edit-post").getModuleAttrs(n)?.asMutable({deep:!0}):{},u=s?.localAttrsMap,c=s?.localChildren;let l=a;if(a?.localAttrsMap&&Object.keys(a.localAttrsMap).length>0){const t=i?.originalTemplate;if(t){const e=Object.keys(t).find((t=>"root"!==t));if(e){const n=t[e];n&&"props"in n&&n.props&&"attrs"in n.props&&(l=n.props.attrs?.asMutable({deep:!0}))}}else{const t=(0,o.select)("divi/global-layouts").getLayoutContent(e);if(t){const e=Object.keys(t).find((t=>"root"!==t));if(e){const n=t[e];n&&"props"in n&&n.props&&"attrs"in n.props&&(l=n.props.attrs?.asMutable({deep:!0}))}}}}const d=i?.originalTemplate?.asMutable({deep:!0}),p=F(r,u,l,c,d),f=new FormData,y=(0,N.serializeModuleFlatObjects)(p);f.append("layout_id",e),f.append("content",y),(0,o.dispatch)("divi/global-layouts").setIsLayoutSaving({id:e,isSaving:!0}),(0,S.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/save",data:f},!0).then((()=>{(0,o.dispatch)("divi/global-layouts").deletePreEditContent({id:e}),(0,o.dispatch)("divi/global-layouts").clearSyncWorthyChanges(),(0,o.dispatch)("divi/global-layouts").setIsLayoutSaving({id:e,isSaving:!1}),(0,o.dispatch)("divi/cloud-app").updateLibraryItemCache({id:parseInt(e,10),content:y,updatedFromSave:!0})})).catch((t=>{(0,o.dispatch)("divi/global-layouts").setIsLayoutSaving({id:e,isSaving:!1}),console.error("Failed to save global layout to server:",t)}))},G={FETCH_DATA:[t=>{if((0,o.select)("divi/global-layouts").getFetchLog(t.id))return void(0,o.dispatch)("divi/global-layouts").addFetchLog(t.id,t.owner);const e=new FormData;e.append("post_id",t.id),(0,o.dispatch)("divi/global-layouts").deleteFetchError(t.id),(0,o.dispatch)("divi/global-layouts").addFetchLog(t.id,t.owner),(0,S.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/load",data:e},!0).then((async e=>{const n=(0,o.select)("divi/global-layouts").getFetchLog(t.id).asMutable();await n.reduce((async(n,r)=>{await n;const o=await(0,A.convertContent)(e.post_content,{postId:parseInt(t.id,10)});return D(t.id,o,r)}),Promise.resolve())})).catch((e=>{console.log(e),(0,o.dispatch)("divi/global-layouts").addFetchError(t.id,t.owner)})).finally((()=>{(0,o.dispatch)("divi/global-layouts").deleteFetchLog(t.id)}))}],SET_LAYOUT_CONTENT:[t=>{const e=[],n=(0,o.select)("divi/edit-post").getGlobalLayoutOwners(t.params.templateId);(0,w.forEach)(n,(t=>{const n=(0,o.select)("divi/edit-post").getModuleWithChildren(t),r={};(0,w.forEach)(Object.keys(n),(t=>{const{children:e}=n[t];r[t]={children:e}})),e.push(r)})),(0,o.dispatch)("divi/global-layouts").setGlobalLayoutMap(t.params.templateId,s()(e))}],SAVE_LAYOUT:[j],SAVE_LAYOUT_WITHOUT_HISTORY_ENTRY:[j]},Y={SET_LAYOUT_CONTENT:[()=>t=>e=>{const n=t(e);if("SET_LAYOUT_CONTENT"!==e.type)return n;const r=e?.params.templateId,i=e?.params.instanceId,a=e?.params.sourceAction?.action,s=(t=>["ADD_MODULE","REMOVE_MODULE","CLONE_MODULE","COPY_MODULE_FROM_PAYLOAD","COPY_MODULE_FROM_LIBRARY","MOVE_MODULE","ADD_ROW","CLONE_ROW","REMOVE_ROW","ADD_FLEX_COLUMN_VIA_DIVIDER","CLONE_FLEX_COLUMN","REMOVE_COLUMN","CHANGE_COLUMN_STRUCTURE","CHANGE_FLEX_COLUMN_STRUCTURE","CHANGE_GRID_COLUMN_STRUCTURE","ADD_GRID"].includes(t))(a);if(s){if(["CHANGE_COLUMN_STRUCTURE","CHANGE_FLEX_COLUMN_STRUCTURE","CHANGE_GRID_COLUMN_STRUCTURE"].includes(a)){if(!("choose-column-modal"===e?.params.sourceAction?.context))return n}(0,o.select)("divi/settings").checkRolePermission("edit_global_library")&&(0,o.dispatch)("divi/global-layouts").saveLayout({id:r,owner:i})}return n}]},H=(t,e)=>{switch(e.type){case"SET_LAYOUT_CONTENT":{const n=Object.fromEntries(Object.entries(e.params.content).map((([t,e])=>{const n=(0,w.omit)(e.props.attrs,["globalModule","localAttrs"]);return[t,{...e,props:{...e.props,attrs:n}}]}))),r=t.getIn(["layouts",e.params.templateId]),o=r?.getIn?r.getIn(["content"]):void 0;let i=t.setIn(["layouts",e.params.templateId,"content"],n).setIn(["layouts",e.params.templateId,"owners"],(0,w.uniq)(t.getIn(["layouts",e.params.templateId,"owners"],[]).concat(e.params.instanceId))).setIn(["layouts",e.params.templateId,"content","root","isGlobal"],!0);return o||(i=i.setIn(["layouts",e.params.templateId,"originalTemplate"],n)),i}case"SET_PRE_EDIT_CONTENT":return t.setIn(["layouts",e.id,"preEditContent"],e.content);case"DELETE_PRE_EDIT_CONTENT":return t.setIn(["layouts",e.id],t.getIn(["layouts",e.id]).without("preEditContent"));case"ADD_FETCH_LOG":return t.setIn(["fetchLog",e.id],t.getIn(["fetchLog",e.id],[]).concat(e.owner));case"DELETE_FETCH_LOG":return t.setIn(["fetchLog"],t.getIn(["fetchLog"]).without(e.id));case"ADD_FETCH_ERROR":return t.setIn(["fetchError",e.id],t.getIn(["fetchError",e.id],[]).concat(e.owner));case"DELETE_FETCH_ERROR":return t.setIn(["fetchError"],t.getIn(["fetchError"]).without(e.id));case"SET_GLOBAL_LAYOUT_MAP":return t.setIn(["layouts",e.id,"modulesMap"],e.map);case"OPEN_CONFIRMATION_POPUP":return t.setIn(["layouts",e.id,"isConfirmationPopupOpen"],!0);case"CLOSE_CONFIRMATION_POPUP":return t.setIn(["layouts",e.id,"isConfirmationPopupOpen"],!1);case"SET_IS_LAYOUT_SAVING":return t.setIn(["layouts",e.id,"isLayoutSaving"],Boolean(e.isSaving));case"ADD_SYNC_WORTHY_CHANGE":{const{instanceId:n,templateId:r,action:o}=e.params,i=t.getIn(["syncWorthyChanges"],[]),a={timestamp:Date.now(),instanceId:n,templateId:r,action:o},u=Array.isArray(i)?i:s()([]);return t.setIn(["syncWorthyChanges"],u.concat(a))}case"CLEAR_SYNC_WORTHY_CHANGES":return t.setIn(["syncWorthyChanges"],[]);case"CLEAR_LAYOUTS":return t.setIn(["layouts"],u.getIn(["layouts"]));case"RESET_STATE":return u;default:return t}},W=t=>t.getIn(["layouts"]),k=(t,e)=>t.getIn(["layouts",e]),V=(t,e)=>t.getIn(["layouts",e,"content"]),B=(t,e)=>t.getIn(["fetchLog",e]),x=(t,e)=>t.getIn(["fetchError",e]),$=(t,e)=>t.getIn(["layouts",e,"content","root","children"]),z=(t,e)=>t.getIn(["layouts",e,"modulesMap"]),X=t=>t.getIn(["syncWorthyChanges"]),J=(t,e)=>t.getIn(["layouts",e,"isConfirmationPopupOpen"],!1),q=(t,e)=>t.getIn(["layouts",e,"isLayoutSaving"],!1),K=t=>{const e=t.getIn(["layouts"],{});return Object.values(e).some((t=>t&&!0===t.isLayoutSaving))},Q=(t,e)=>!!t.getIn(["layouts",e,"preEditContent"]),Z=t=>t.getIn(["syncWorthyChanges"],[]).length>0,tt=()=>{if((0,o.select)("divi/global-layouts"))return;const n=(0,o.registerStore)("divi/global-layouts",{actions:t,reducer:H,selectors:e,initialState:u});(0,i.applyMiddlewares)(n,Y),(0,i.applyEffects)(n,G)}}(),(window.divi=window.divi||{}).globalLayouts=r}();