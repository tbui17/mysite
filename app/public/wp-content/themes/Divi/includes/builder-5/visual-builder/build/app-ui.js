/*! For license information please see app-ui.js.LICENSE.txt */
!function(){var e={620:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e,t){var i=n?n+e:e,r=this._events[i];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,s=new Array(a);o<a;o++)s[o]=r[o].fn;return s},o.prototype.emit=function(e,t,i,r,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var d,l,u=this._events[s],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,r),!0;case 5:return u.fn.call(u.context,t,i,r,o),!0;case 6:return u.fn.call(u.context,t,i,r,o,a),!0}for(l=1,d=new Array(c-1);l<c;l++)d[l-1]=arguments[l];u.fn.apply(u.context,d)}else{var p,m=u.length;for(l=0;l<m;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,i);break;case 4:u[l].fn.call(u[l].context,t,i,r);break;default:if(!d)for(p=1,d=new Array(c-1);p<c;p++)d[p-1]=arguments[p];u[l].fn.apply(u[l].context,d)}}return!0},o.prototype.on=function(e,t,i){var o=new r(t,i||this),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},o.prototype.once=function(e,t,i){var o=new r(t,i||this,!0),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},o.prototype.removeListener=function(e,t,r,o){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new i:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==t||o&&!s.once||r&&s.context!==r||(0==--this._eventsCount?this._events=new i:delete this._events[a]);else{for(var d=0,l=[],u=s.length;d<u;d++)(s[d].fn!==t||o&&!s[d].once||r&&s[d].context!==r)&&l.push(s[d]);l.length?this._events[a]=1===l.length?l[0]:l:0==--this._eventsCount?this._events=new i:delete this._events[a]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new i:delete this._events[t])):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=n,o.EventEmitter=o,e.exports=o},86636:function(e,t,n){e.exports=function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){var n=t[a][1][e];return r(n||e)}),l,l.exports,e,t,n,i)}return n[a].exports}for(var o=void 0,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,i){(function(e){"use strict";var n,i,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var o=0,a=new r(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var d=new e.MessageChannel;d.port1.onmessage=u,n=function(){d.port2.postMessage(0)}}var l=[];function u(){var e,t;i=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}i=!1}function c(e){1!==l.push(e)||i||n()}t.exports=c}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var i=e(1);function r(){}var o={},a=["REJECTED"],s=["FULFILLED"],d=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,e!==r&&m(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function c(e,t,n){i((function(){var i;try{i=t(n)}catch(t){return o.reject(e,t)}i===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,i)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function m(e,t){var n=!1;function i(t){n||(n=!0,o.reject(e,t))}function r(t){n||(n=!0,o.resolve(e,t))}function a(){t(r,i)}var s=f(a);"error"===s.status&&i(s.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function h(e){return e instanceof this?e:o.resolve(new this(r),e)}function v(e){var t=new this(r);return o.reject(t,e)}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,d=-1,l=new this(r);++d<n;)u(e[d],d);return l;function u(e,r){function d(e){a[r]=e,++s!==n||i||(i=!0,o.resolve(l,a))}t.resolve(e).then(d,(function(e){i||(i=!0,o.reject(l,e))}))}}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(r);++a<n;)d(e[a]);return s;function d(e){t.resolve(e).then((function(e){i||(i=!0,o.resolve(s,e))}),(function(e){i||(i=!0,o.reject(s,e))}))}}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(r);return this.state!==d?c(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){c(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){c(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=f(p,t);if("error"===n.status)return o.reject(e,n.value);var i=n.value;if(i)m(e,i);else{e.state=s,e.outcome=t;for(var r=-1,a=e.queue.length;++r<a;)e.queue[r].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},l.resolve=h,l.reject=v,l.all=b,l.race=g},{1:1}],3:[function(e,t,i){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=o();function s(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function d(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)n.append(e[i]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function m(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",h=void 0,v={},b=Object.prototype.toString,g="readonly",y="readwrite";function w(e){for(var t=e.length,n=new ArrayBuffer(t),i=new Uint8Array(n),r=0;r<t;r++)i[r]=e.charCodeAt(r);return n}function I(e){return new l((function(t){var n=e.transaction(f,y),i=d([""]);n.objectStore(f).put(i,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function S(e){return"boolean"==typeof h?l.resolve(h):I(e).then((function(e){return h=e}))}function _(e){var t=v[e.name],n={};n.promise=new l((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function E(e){var t=v[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function M(e,t){var n=v[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function R(e,t){return new l((function(n,i){if(v[e.name]=v[e.name]||L(),e.db){if(!t)return n(e.db);_(e),e.db.close()}var r=[e.name];t&&r.push(e.version);var o=a.open.apply(a,r);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),i(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()},n(t),E(e)}}))}function O(e){return R(e,!1)}function k(e){return R(e,!0)}function A(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,r=e.version>e.db.version;if(i&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),r||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function T(e){return new l((function(t,n){var i=new FileReader;i.onerror=n,i.onloadend=function(n){var i=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:i,type:e.type})},i.readAsBinaryString(e)}))}function N(e){return d([w(atob(e.data))],{type:e.type})}function C(e){return e&&e.__local_forage_encoded_blob}function D(e){var t=this,n=t._initReady().then((function(){var e=v[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(n,e,e),n}function P(e){_(e);for(var t=v[e.name],n=t.forages,i=0;i<n.length;i++){var r=n[i];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return e.db=null,O(e).then((function(t){return e.db=t,A(e)?k(e):t})).then((function(i){e.db=t.db=i;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=i})).catch((function(t){throw M(e,t),t}))}function B(e,t,n,i){void 0===i&&(i=1);try{var r=e.db.transaction(e.storeName,t);n(null,r)}catch(r){if(i>0&&(!e.db||"InvalidStateError"===r.name||"NotFoundError"===r.name))return l.resolve().then((function(){if(!e.db||"NotFoundError"===r.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),k(e)})).then((function(){return P(e).then((function(){B(e,t,n,i-1)}))})).catch(n);n(r)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function x(e){var t=this,n={db:null};if(e)for(var i in e)n[i]=e[i];var r=v[n.name];r||(r=L(),v[n.name]=r),r.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=D);var o=[];function a(){return l.resolve()}for(var s=0;s<r.forages.length;s++){var d=r.forages[s];d!==t&&o.push(d._initReady().catch(a))}var u=r.forages.slice(0);return l.all(o).then((function(){return n.db=r.db,O(n)})).then((function(e){return n.db=e,A(n,t._defaultConfig.version)?k(n):e})).then((function(e){n.db=r.db=e,t._dbInfo=n;for(var i=0;i<u.length;i++){var o=u[i];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))}function W(e,t){var n=this;e=p(e);var i=new l((function(t,i){n.ready().then((function(){B(n._dbInfo,g,(function(r,o){if(r)return i(r);try{var a=o.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),C(e)&&(e=N(e)),t(e)},a.onerror=function(){i(a.error)}}catch(e){i(e)}}))})).catch(i)}));return u(i,t),i}function j(e,t){var n=this,i=new l((function(t,i){n.ready().then((function(){B(n._dbInfo,g,(function(r,o){if(r)return i(r);try{var a=o.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var i=n.value;C(i)&&(i=N(i));var r=e(i,n.key,s++);void 0!==r?t(r):n.continue()}else t()},a.onerror=function(){i(a.error)}}catch(e){i(e)}}))})).catch(i)}));return u(i,t),i}function F(e,t,n){var i=this;e=p(e);var r=new l((function(n,r){var o;i.ready().then((function(){return o=i._dbInfo,"[object Blob]"===b.call(t)?S(o.db).then((function(e){return e?t:T(t)})):t})).then((function(t){B(i._dbInfo,y,(function(o,a){if(o)return r(o);try{var s=a.objectStore(i._dbInfo.storeName);null===t&&(t=void 0);var d=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=d.error?d.error:d.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return u(r,n),r}function V(e,t){var n=this;e=p(e);var i=new l((function(t,i){n.ready().then((function(){B(n._dbInfo,y,(function(r,o){if(r)return i(r);try{var a=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){i(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return u(i,t),i}function H(e){var t=this,n=new l((function(e,n){t.ready().then((function(){B(t._dbInfo,y,(function(i,r){if(i)return n(i);try{var o=r.objectStore(t._dbInfo.storeName).clear();r.oncomplete=function(){e()},r.onabort=r.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function U(e){var t=this,n=new l((function(e,n){t.ready().then((function(){B(t._dbInfo,g,(function(i,r){if(i)return n(i);try{var o=r.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function z(e,t){var n=this,i=new l((function(t,i){e<0?t(null):n.ready().then((function(){B(n._dbInfo,g,(function(r,o){if(r)return i(r);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,d=a.openKeyCursor();d.onsuccess=function(){var n=d.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},d.onerror=function(){i(d.error)}}catch(e){i(e)}}))})).catch(i)}));return u(i,t),i}function G(e){var t=this,n=new l((function(e,n){t.ready().then((function(){B(t._dbInfo,g,(function(i,r){if(i)return n(i);try{var o=r.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var t=o.result;t?(a.push(t.key),t.continue()):e(a)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function $(e,t){t=m.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var i,r=this;if(e.name){var o=e.name===n.name&&r._dbInfo.db?l.resolve(r._dbInfo.db):O(e).then((function(t){var n=v[e.name],i=n.forages;n.db=t;for(var r=0;r<i.length;r++)i[r]._dbInfo.db=t;return t}));i=e.storeName?o.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;_(e);var i=v[e.name],r=i.forages;t.close();for(var o=0;o<r.length;o++){var s=r[o];s._dbInfo.db=null,s._dbInfo.version=n}var d=new l((function(t,i){var r=a.open(e.name,n);r.onerror=function(e){r.result.close(),i(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(e.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}));return d.then((function(e){i.db=e;for(var t=0;t<r.length;t++){var n=r[t];n._dbInfo.db=e,E(n._dbInfo)}})).catch((function(t){throw(M(e,t)||l.resolve()).catch((function(){})),t}))}})):o.then((function(t){_(e);var n=v[e.name],i=n.forages;t.close();for(var r=0;r<i.length;r++)i[r]._dbInfo.db=null;var o=new l((function(t,n){var i=a.deleteDatabase(e.name);i.onerror=function(){var e=i.result;e&&e.close(),n(i.error)},i.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},i.onsuccess=function(){var e=i.result;e&&e.close(),t(e)}}));return o.then((function(e){n.db=e;for(var t=0;t<i.length;t++)E(i[t]._dbInfo)})).catch((function(t){throw(M(e,t)||l.resolve()).catch((function(){})),t}))}))}else i=l.reject("Invalid arguments");return u(i,t),i}var Z={_driver:"asyncStorage",_initStorage:x,_support:s(),iterate:j,getItem:W,setItem:F,removeItem:V,clear:H,length:U,key:z,keys:G,dropInstance:$};function q(){return"function"==typeof openDatabase}var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Q=X.length,ee="arbf",te="blob",ne="si08",ie="ui08",re="uic8",oe="si16",ae="si32",se="ur16",de="ui32",le="fl32",ue="fl64",ce=Q+ee.length,pe=Object.prototype.toString;function me(e){var t,n,i,r,o,a=.75*e.length,s=e.length,d=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),u=new Uint8Array(l);for(t=0;t<s;t+=4)n=K.indexOf(e[t]),i=K.indexOf(e[t+1]),r=K.indexOf(e[t+2]),o=K.indexOf(e[t+3]),u[d++]=n<<2|i>>4,u[d++]=(15&i)<<4|r>>2,u[d++]=(3&r)<<6|63&o;return l}function fe(e){var t,n=new Uint8Array(e),i="";for(t=0;t<n.length;t+=3)i+=K[n[t]>>2],i+=K[(3&n[t])<<4|n[t+1]>>4],i+=K[(15&n[t+1])<<2|n[t+2]>>6],i+=K[63&n[t+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}function he(e,t){var n="";if(e&&(n=pe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===pe.call(e.buffer))){var i,r=X;e instanceof ArrayBuffer?(i=e,r+=ee):(i=e.buffer,"[object Int8Array]"===n?r+=ne:"[object Uint8Array]"===n?r+=ie:"[object Uint8ClampedArray]"===n?r+=re:"[object Int16Array]"===n?r+=oe:"[object Uint16Array]"===n?r+=se:"[object Int32Array]"===n?r+=ae:"[object Uint32Array]"===n?r+=de:"[object Float32Array]"===n?r+=le:"[object Float64Array]"===n?r+=ue:t(new Error("Failed to get type for BinaryArray"))),t(r+fe(i))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=Y+e.type+"~"+fe(this.result);t(X+te+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function ve(e){if(e.substring(0,Q)!==X)return JSON.parse(e);var t,n=e.substring(ce),i=e.substring(Q,ce);if(i===te&&J.test(n)){var r=n.match(J);t=r[1],n=n.substring(r[0].length)}var o=me(n);switch(i){case ee:return o;case te:return d([o],{type:t});case ne:return new Int8Array(o);case ie:return new Uint8Array(o);case re:return new Uint8ClampedArray(o);case oe:return new Int16Array(o);case se:return new Uint16Array(o);case ae:return new Int32Array(o);case de:return new Uint32Array(o);case le:return new Float32Array(o);case ue:return new Float64Array(o);default:throw new Error("Unkown type: "+i)}}var be={serialize:he,deserialize:ve,stringToBuffer:me,bufferToString:fe};function ge(e,t,n,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,i)}function ye(e){var t=this,n={db:null};if(e)for(var i in e)n[i]="string"!=typeof e[i]?e[i].toString():e[i];var r=new l((function(e,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return i(e)}n.db.transaction((function(r){ge(r,n,(function(){t._dbInfo=n,e()}),(function(e,t){i(t)}))}),i)}));return n.serializer=be,r}function we(e,t,n,i,r,o){e.executeSql(n,i,r,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?o(e,a):ge(e,t,(function(){e.executeSql(n,i,r,o)}),o)}),o):o(e,a)}),o)}function Ie(e,t){var n=this;e=p(e);var i=new l((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=r.serializer.deserialize(i)),t(i)}),(function(e,t){i(t)}))}))})).catch(i)}));return u(i,t),i}function Se(e,t){var n=this,i=new l((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"SELECT * FROM "+r.storeName,[],(function(n,i){for(var o=i.rows,a=o.length,s=0;s<a;s++){var d=o.item(s),l=d.value;if(l&&(l=r.serializer.deserialize(l)),void 0!==(l=e(l,d.key,s+1)))return void t(l)}t()}),(function(e,t){i(t)}))}))})).catch(i)}));return u(i,t),i}function _e(e,t,n,i){var r=this;e=p(e);var o=new l((function(o,a){r.ready().then((function(){void 0===t&&(t=null);var s=t,d=r._dbInfo;d.serializer.serialize(t,(function(t,l){l?a(l):d.db.transaction((function(n){we(n,d,"INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(i>0)return void o(_e.apply(r,[e,s,n,i-1]));a(t)}}))}))})).catch(a)}));return u(o,n),o}function Ee(e,t,n){return _e.apply(this,[e,t,n,1])}function Me(e,t){var n=this;e=p(e);var i=new l((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"DELETE FROM "+r.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){i(t)}))}))})).catch(i)}));return u(i,t),i}function Re(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"DELETE FROM "+i.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Oe(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],(function(t,n){var i=n.rows.item(0).c;e(i)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function ke(e,t){var n=this,i=new l((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){we(n,r,"SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var i=n.rows.length?n.rows.item(0).key:null;t(i)}),(function(e,t){i(t)}))}))})).catch(i)}));return u(i,t),i}function Ae(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){we(t,i,"SELECT key FROM "+i.storeName,[],(function(t,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r).key);e(i)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Te(e){return new l((function(t,n){e.transaction((function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,i){for(var r=[],o=0;o<i.rows.length;o++)r.push(i.rows.item(o).name);t({db:e,storeNames:r})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Ne(e,t){t=m.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var i,r=this;return u(i=e.name?new l((function(t){var i;i=e.name===n.name?r._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:i,storeNames:[e.storeName]}):t(Te(i))})).then((function(e){return new l((function(t,n){e.db.transaction((function(i){function r(e){return new l((function(t,n){i.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var o=[],a=0,s=e.storeNames.length;a<s;a++)o.push(r(e.storeNames[a]));l.all(o).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):l.reject("Invalid arguments"),t),i}var Ce={_driver:"webSQLStorage",_initStorage:ye,_support:q(),iterate:Se,getItem:Ie,setItem:Ee,removeItem:Me,clear:Re,length:Oe,key:ke,keys:Ae,dropInstance:Ne};function De(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Pe(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Be(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Le(){return!Be()||localStorage.length>0}function xe(e){var t=this,n={};if(e)for(var i in e)n[i]=e[i];return n.keyPrefix=Pe(e,t._defaultConfig),Le()?(t._dbInfo=n,n.serializer=be,l.resolve()):l.reject()}function We(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(e)&&localStorage.removeItem(i)}}));return u(n,e),n}function je(e,t){var n=this;e=p(e);var i=n.ready().then((function(){var t=n._dbInfo,i=localStorage.getItem(t.keyPrefix+e);return i&&(i=t.serializer.deserialize(i)),i}));return u(i,t),i}function Fe(e,t){var n=this,i=n.ready().then((function(){for(var t=n._dbInfo,i=t.keyPrefix,r=i.length,o=localStorage.length,a=1,s=0;s<o;s++){var d=localStorage.key(s);if(0===d.indexOf(i)){var l=localStorage.getItem(d);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,d.substring(r),a++)))return l}}}));return u(i,t),i}function Ve(e,t){var n=this,i=n.ready().then((function(){var t,i=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(i.keyPrefix.length)),t}));return u(i,t),i}function He(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,i=[],r=0;r<n;r++){var o=localStorage.key(r);0===o.indexOf(e.keyPrefix)&&i.push(o.substring(e.keyPrefix.length))}return i}));return u(n,e),n}function Ue(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function ze(e,t){var n=this;e=p(e);var i=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(i,t),i}function Ge(e,t,n){var i=this;e=p(e);var r=i.ready().then((function(){void 0===t&&(t=null);var n=t;return new l((function(r,o){var a=i._dbInfo;a.serializer.serialize(t,(function(t,i){if(i)o(i);else try{localStorage.setItem(a.keyPrefix+e,t),r(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return u(r,n),r}function $e(e,t){if(t=m.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var i,r=this;return i=e.name?new l((function(t){e.storeName?t(Pe(e,r._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):l.reject("Invalid arguments"),u(i,t),i}var Ze={_driver:"localStorageWrapper",_initStorage:xe,_support:De(),iterate:Fe,getItem:je,setItem:Ge,removeItem:ze,clear:We,length:Ue,key:Ve,keys:He,dropInstance:$e},qe=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ke=function(e,t){for(var n=e.length,i=0;i<n;){if(qe(e[i],t))return!0;i++}return!1},Ye=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je={},Xe={},Qe={INDEXEDDB:Z,WEBSQL:Ce,LOCALSTORAGE:Ze},et=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),it={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function rt(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function ot(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ye(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=function(){function e(t){for(var n in r(this,e),Qe)if(Qe.hasOwnProperty(n)){var i=Qe[n],o=i._driver;this[n]=o,Je[o]||this.defineDriver(i)}this._defaultConfig=ot({},it),this._config=ot({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":i(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var i=new l((function(t,n){try{var i=e._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(r);for(var o=nt.concat("_initStorage"),a=0,s=o.length;a<s;a++){var d=o[a];if((!Ke(tt,d)||e[d])&&"function"!=typeof e[d])return void n(r)}var c=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=l.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,i=tt.length;n<i;n++){var r=tt[n];e[r]||(e[r]=t(r))}};c();var p=function(n){Je[i]&&console.info("Redefining LocalForage driver: "+i),Je[i]=e,Xe[i]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(p,n):p(!!e._support):p(!0)}catch(e){n(e)}}));return c(i,t,n),i},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var i=Je[e]?l.resolve(Je[e]):l.reject(new Error("Driver not found."));return c(i,t,n),i},e.prototype.getSerializer=function(e){var t=l.resolve(be);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var i=this;Ye(e)||(e=[e]);var r=this._getSupportedDrivers(e);function o(){i._config.driver=i.driver()}function a(e){return i._extend(e),o(),i._ready=i._initStorage(i._config),i._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var r=e[t];return t++,i._dbInfo=null,i._ready=null,i.getDriver(r).then(a).catch(n)}o();var s=new Error("No available storage method found.");return i._driverSet=l.reject(s),i._driverSet}return n()}}var d=null!==this._driverSet?this._driverSet.catch((function(){return l.resolve()})):l.resolve();return this._driverSet=d.then((function(){var e=r[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then((function(e){i._driver=e._driver,o(),i._wrapLibraryMethodsWithReady(),i._initDriver=s(r)}))})).catch((function(){o();var e=new Error("No available storage method found.");return i._driverSet=l.reject(e),i._driverSet})),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Xe[e]},e.prototype._extend=function(e){ot(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];this.supports(r)&&t.push(r)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)rt(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),st=new at;t.exports=st},{3:3}]},{},[4])(4)},33042:function(e,t,n){var i;!function(){"use strict";var r=function e(t){var n,i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),r={use_static:!1};function o(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function a(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}function s(e,t){a(e,t,(function(){throw new v("The "+t+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(n=t)||Array.isArray(n)||null===n||void 0!==t.use_static&&(r.use_static=Boolean(t.use_static));var d="__immutable_invariants_hold";function l(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,d)))}function u(e,t){return e===t||e!=e&&t!=t}function c(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var p=["setPrototypeOf"],m=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),f=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),h=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function v(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function b(e,t){for(var n in a(e,d,!0),t)t.hasOwnProperty(n)&&s(e,t[n]);return Object.freeze(e),e}function g(e,t){var n=e[t];a(e,t,(function(){return G(n.apply(e,arguments))}))}function y(e,t,n){var i=n&&n.deep;if(e in this&&(i&&this[e]!==t&&c(t)&&c(this[e])&&(t=G.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var r=R.call(this);return r[e]=G(t),S(r)}v.prototype=new Error,v.prototype.constructor=Error;var w=G([]);function I(e,t,n){var i=e[0];if(1===e.length)return y.call(this,i,t,n);var r,o=e.slice(1),a=this[i];if("object"==typeof a&&null!==a)r=G.setIn(a,o,t);else{var s=o[0];r=""!==s&&isFinite(s)?I.call(w,o,t):L.call(B,o,t)}if(i in this&&a===r)return this;var d=R.call(this);return d[i]=r,S(d)}function S(e){for(var t in f){if(f.hasOwnProperty(t))g(e,f[t])}r.use_static||(a(e,"flatMap",E),a(e,"asObject",O),a(e,"asMutable",R),a(e,"set",y),a(e,"setIn",I),a(e,"update",W),a(e,"updateIn",F),a(e,"getIn",V));for(var n=0,i=e.length;n<i;n++)e[n]=G(e[n]);return b(e,m)}function _(){return new Date(this.getTime())}function E(e){if(0===arguments.length)return this;var t,n=[],i=this.length;for(t=0;t<i;t++){var r=e(this[t],t,this);Array.isArray(r)?n.push.apply(n,r):n.push(r)}return S(n)}function M(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,n){"number"==typeof e&&(n[t]=e.toString())})),e=function(e,n){return-1!==t.indexOf(n)}}var n=o(this);for(var i in this)this.hasOwnProperty(i)&&!1===e(this[i],i)&&(n[i]=this[i]);return z(n)}function R(e){var t,n,i=[];if(e&&e.deep)for(t=0,n=this.length;t<n;t++)i.push(k(this[t]));else for(t=0,n=this.length;t<n;t++)i.push(this[t]);return i}function O(e){"function"!=typeof e&&(e=function(e){return e});var t,n={},i=this.length;for(t=0;t<i;t++){var r=e(this[t],t,this),o=r[0],a=r[1];n[o]=a}return z(n)}function k(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,d)||e instanceof Date?e:G.asMutable(e,{deep:!0})}function A(e,t){for(var n in e)Object.getOwnPropertyDescriptor(e,n)&&(t[n]=e[n]);return t}function T(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,i,r=Array.isArray(e),a=t&&t.deep,s=t&&t.mode||"merge",d=t&&t.merger;function l(e,i,r){var s,l=G(i[r]),p=d&&d(e[r],l,t),m=e[r];void 0===n&&void 0===p&&e.hasOwnProperty(r)&&u(l,m)||(u(m,s=void 0!==p?p:a&&c(m)&&c(l)?G.merge(m,l,t):l)&&e.hasOwnProperty(r)||(void 0===n&&(n=A(e,o(e))),n[r]=s))}function p(e,t){for(var i in e)t.hasOwnProperty(i)||(void 0===n&&(n=A(e,o(e))),delete n[i])}if(r)for(var m=0,f=e.length;m<f;m++){var h=e[m];for(i in h)h.hasOwnProperty(i)&&l(void 0!==n?n:this,h,i)}else{for(i in e)Object.getOwnPropertyDescriptor(e,i)&&l(this,e,i);"replace"===s&&p(this,e)}return void 0===n?this:z(n)}function N(e,t){var n=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return G.merge(this,e,{deep:n,mode:"replace"})}var C,D,P,B=G({});function L(e,t,n){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var i=e[0];if(1===e.length)return x.call(this,i,t,n);var r,a=e.slice(1),s=this[i];if(r=this.hasOwnProperty(i)&&"object"==typeof s&&null!==s?G.setIn(s,a,t):L.call(B,a,t),this.hasOwnProperty(i)&&s===r)return this;var d=A(this,o(this));return d[i]=r,z(d)}function x(e,t,n){var i=n&&n.deep;if(this.hasOwnProperty(e)&&(i&&this[e]!==t&&c(t)&&c(this[e])&&(t=G.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var r=A(this,o(this));return r[e]=G(t),z(r)}function W(e,t){var n=Array.prototype.slice.call(arguments,2),i=this[e];return G.set(this,e,t.apply(i,[i].concat(n)))}function j(e,t){for(var n=0,i=t.length;null!=e&&n<i;n++)e=e[t[n]];return n&&n==i?e:void 0}function F(e,t){var n=Array.prototype.slice.call(arguments,2),i=j(this,e);return G.setIn(this,e,t.apply(i,[i].concat(n)))}function V(e,t){var n=j(this,e);return void 0===n?t:n}function H(e){var t,n=o(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=k(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function U(){return{}}function z(e){return r.use_static||(a(e,"merge",T),a(e,"replace",N),a(e,"without",M),a(e,"asMutable",H),a(e,"set",x),a(e,"setIn",L),a(e,"update",W),a(e,"updateIn",F),a(e,"getIn",V)),b(e,p)}function G(e,t,n){if(l(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===i)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(G);if(Array.isArray(e))return S(e.slice());if(e instanceof Date)return o=new Date(e.getTime()),r.use_static||a(o,"asMutable",_),b(o,h);var o,s=t&&t.prototype,d=(s&&s!==Object.prototype?function(){return Object.create(s)}:U)();if(null==n&&(n=64),n<=0)throw new v("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var u in n-=1,e)Object.getOwnPropertyDescriptor(e,u)&&(d[u]=G(e[u],void 0,n));return z(d)}function $(e){return function(){var t=[].slice.call(arguments),n=t.shift();return e.apply(n,t)}}function Z(e,t){return function(){var n=[].slice.call(arguments),i=n.shift();return Array.isArray(i)?t.apply(i,n):e.apply(i,n)}}return G.from=G,G.isImmutable=l,G.ImmutableError=v,G.merge=$(T),G.replace=$(N),G.without=$(M),G.asMutable=(C=H,D=R,P=_,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?D.apply(t,e):t instanceof Date?P.apply(t,e):C.apply(t,e)}),G.set=Z(x,y),G.setIn=Z(L,I),G.update=$(W),G.updateIn=$(F),G.getIn=$(V),G.flatMap=$(E),G.asObject=$(O),r.use_static||(G.static=e({use_static:!0})),Object.freeze(G),G}();void 0===(i=function(){return r}.call(t,n,t,e))||(e.exports=i)}()},93967:function(e,t){var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,o(n)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)i.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};!function(){"use strict";n.r(i),n.d(i,{BuilderBar:function(){return Tt},BuilderBarContainer:function(){return Nt},PageBar:function(){return Ot},PageBarContainer:function(){return kt},ResponsiveDragHandleContainer:function(){return fn},ResponsiveMaximumDragLimitContainer:function(){return vn},Sidebar:function(){return un},SidebarContainer:function(){return cn},SidebarDockingIndicator:function(){return pn},addBuilderBarButton:function(){return Yn},addSidebarRow:function(){return wn},closeAutoCloseableModals:function(){return d},dispatchPageCreation:function(){return gt},dockModalToSidebar:function(){return In},dockModalToSidebarRow:function(){return Sn},effects:function(){return ni},exitVisualBuilder:function(){return u},extractWorkspace:function(){return Oi},getAppFrameMarginLeft:function(){return Ci},getAppFrameMarginTop:function(){return Di},getAppFrameMaximumDragLimitStyles:function(){return Bi},getAppFrameMaximumPossibleZoom:function(){return Li},getAppFrameMaximumWidth:function(){return xi},getAppFramePseudoWrapperBoxModel:function(){return Si},getAppFrameStyle:function(){return ji},getAppFrameWidth:function(){return Wi},getAppFrameZoom:function(){return ki},getAttributeState:function(){return Fi},getBreakpoint:function(){return Vi},getBuilderBarButtons:function(){return wr},getCurrentWorkspace:function(){return yt},getDockingAreas:function(){return zi},getDraggedToUndockSidebarModal:function(){return Gi},getElementProperty:function(){return wi},getElements:function(){return yi},getGlobalPreload:function(){return $i},getHoveredDockingArea:function(){return Zi},getHoveredSidebarDockingAreaId:function(){return qi},getHoveredSidebarRowDockingArea:function(){return Ki},getLargestEnabledVisualView:function(){return Yi},getModuleInteractionEventTarget:function(){return Ji},getModuleInteractionStatus:function(){return Xi},getModulesPermissions:function(){return Qi},getResizePosition:function(){return er},getSidebarHandleCondition:function(){return ar},getSidebarLastRowId:function(){return nr},getSidebarMaximumWidth:function(){return ir},getSidebarModalDimension:function(){return rr},getSidebarModalInfo:function(){return or},getSidebarModalNames:function(){return _i},getSidebarProps:function(){return tr},getSidebarRow:function(){return pi},getSidebarRowDimensionLimits:function(){return sr},getSidebarRowHeight:function(){return Hi},getSidebarRowOffset:function(){return Ui},getSidebarRowSidebar:function(){return lr},getSidebarRowsHeight:function(){return dr},getSmallestEnabledVisualView:function(){return ur},getView:function(){return Ai},getViewItem:function(){return Pi},getViews:function(){return cr},getWindow:function(){return Ii},getWindowAutoScroll:function(){return pr},hasInteraction:function(){return mr},hasModulesPermission:function(){return fr},hasUnsavedChanges:function(){return St},is100vwVisualView:function(){return Ti},isElementVisible:function(){return hr},isInteractionLayerActive:function(){return vr},isPageEmptyForPageCreation:function(){return vt},isSidebarModal:function(){return br},isUserDefinedWindowProperty:function(){return Ni},isViewBreakpoint:function(){return gr},onModuleInteractionEvent:function(){return _n},onZoomIn:function(){return c},onZoomOut:function(){return p},registerAppUiStore:function(){return Pr},registerBuilderBarButton:function(){return wt},registerListeners:function(){return Br},registerPermissions:function(){return _t},removeSidebarRow:function(){return En},replaceSidebarModal:function(){return Mn},resetState:function(){return Rn},resetWindow:function(){return On},saveCloudLibrary:function(){return Le},savePage:function(){return xe},savePageAsDraft:function(){return We},setAppFrameResizeStatus:function(){return kn},setAppFrameZoom:function(){return An},setAttributeState:function(){return Tn},setDraggedToUndockSidebarModal:function(){return Nn},setElementProperty:function(){return Cn},setElementVisibility:function(){return Dn},setGlobalPreload:function(){return Pn},setHoveredSidebarDockingArea:function(){return Bn},setInteractionLayer:function(){return Ln},setModulePermission:function(){return xn},setSidebarHandleCondition:function(){return Hn},setSidebarMinimumWidth:function(){return Wn},setSidebarRowActiveModal:function(){return jn},setSidebarRowHeight:function(){return Fn},setSidebarRowResizingStatus:function(){return Vn},setView:function(){return Un},setWindow:function(){return zn},setWindowAutoScroll:function(){return Gn},setWorkspace:function(){return $n},shouldDispatchPageCreation:function(){return bt},toggleHelpModal:function(){return je},toggleModuleInteraction:function(){return Zn},togglePageBarModal:function(){return Ve},togglePageSettingsModal:function(){return He},toggleResponsiveView:function(){return ze},toggleWireframeView:function(){return Ue},undockModalFromSidebarRow:function(){return qn},updateSidebarRowLimits:function(){return Kn},updateViews:function(){return Jn}});var e={};n.r(e),n.d(e,{addBuilderBarButton:function(){return Yn},addSidebarRow:function(){return wn},dockModalToSidebar:function(){return In},dockModalToSidebarRow:function(){return Sn},onModuleInteractionEvent:function(){return _n},removeSidebarRow:function(){return En},replaceSidebarModal:function(){return Mn},resetState:function(){return Rn},resetWindow:function(){return On},setAppFrameResizeStatus:function(){return kn},setAppFrameZoom:function(){return An},setAttributeState:function(){return Tn},setDraggedToUndockSidebarModal:function(){return Nn},setElementProperty:function(){return Cn},setElementVisibility:function(){return Dn},setGlobalPreload:function(){return Pn},setHoveredSidebarDockingArea:function(){return Bn},setInteractionLayer:function(){return Ln},setModulePermission:function(){return xn},setSidebarHandleCondition:function(){return Hn},setSidebarMinimumWidth:function(){return Wn},setSidebarRowActiveModal:function(){return jn},setSidebarRowHeight:function(){return Fn},setSidebarRowResizingStatus:function(){return Vn},setView:function(){return Un},setWindow:function(){return zn},setWindowAutoScroll:function(){return Gn},setWorkspace:function(){return $n},toggleModuleInteraction:function(){return Zn},undockModalFromSidebarRow:function(){return qn},updateSidebarRowLimits:function(){return Kn},updateViews:function(){return Jn}});var t={};n.r(t),n.d(t,{extractWorkspace:function(){return Oi},getAppFrameMarginLeft:function(){return Ci},getAppFrameMarginTop:function(){return Di},getAppFrameMaximumDragLimitStyles:function(){return Bi},getAppFrameMaximumPossibleZoom:function(){return Li},getAppFrameMaximumWidth:function(){return xi},getAppFramePseudoWrapperBoxModel:function(){return Si},getAppFrameStyle:function(){return ji},getAppFrameWidth:function(){return Wi},getAppFrameZoom:function(){return ki},getAttributeState:function(){return Fi},getBreakpoint:function(){return Vi},getBuilderBarButtons:function(){return wr},getDockingAreas:function(){return zi},getDraggedToUndockSidebarModal:function(){return Gi},getElementProperty:function(){return wi},getElements:function(){return yi},getGlobalPreload:function(){return $i},getHoveredDockingArea:function(){return Zi},getHoveredSidebarDockingAreaId:function(){return qi},getHoveredSidebarRowDockingArea:function(){return Ki},getLargestEnabledVisualView:function(){return Yi},getModuleInteractionEventTarget:function(){return Ji},getModuleInteractionStatus:function(){return Xi},getModulesPermissions:function(){return Qi},getResizePosition:function(){return er},getSidebarHandleCondition:function(){return ar},getSidebarLastRowId:function(){return nr},getSidebarMaximumWidth:function(){return ir},getSidebarModalDimension:function(){return rr},getSidebarModalInfo:function(){return or},getSidebarModalNames:function(){return _i},getSidebarProps:function(){return tr},getSidebarRow:function(){return pi},getSidebarRowDimensionLimits:function(){return sr},getSidebarRowHeight:function(){return Hi},getSidebarRowOffset:function(){return Ui},getSidebarRowSidebar:function(){return lr},getSidebarRowsHeight:function(){return dr},getSmallestEnabledVisualView:function(){return ur},getView:function(){return Ai},getViewItem:function(){return Pi},getViews:function(){return cr},getWindow:function(){return Ii},getWindowAutoScroll:function(){return pr},hasInteraction:function(){return mr},hasModulesPermission:function(){return fr},is100vwVisualView:function(){return Ti},isElementVisible:function(){return hr},isInteractionLayerActive:function(){return vr},isSidebarModal:function(){return br},isUserDefinedWindowProperty:function(){return Ni},isViewBreakpoint:function(){return gr}});var r=window.vendor.React,o=n.n(r),a=window.lodash,s=window.divi.data;const d=()=>{const e=(0,s.select)("divi/modal-library"),t=(0,s.dispatch)("divi/modal-library");if(!e)return;const n=e.getActiveModals({returnedProperties:["name","autoCloseOnClickOutside","isActive"]});n&&Object.values(n).forEach((e=>{e?.autoCloseOnClickOutside&&e?.isActive&&t.close({name:e.name})}))};var l=window.divi.window;const u=e=>{l.topWindow.location.href=e},c=()=>{const e=(0,s.select)("divi/app-ui").getAppFrameZoom({format:"percentage"}),t=e+10>100?100:e+10;(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:t,setter:"user"})},p=()=>{const e=(0,s.select)("divi/app-ui").getAppFrameZoom({format:"percentage"}),t=e-10<10?10:e-10;(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:t,setter:"user"})};var m=window.jQuery,f=n.n(m);function h(e){this.message=e}h.prototype=new Error,h.prototype.name="InvalidCharacterError";var v="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new h("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,r=0,o=0,a="";i=t.charAt(o++);~i&&(n=r%4?64*n+i:i,r++%4)?a+=String.fromCharCode(255&n>>(-2*r&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return a};function b(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(v(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return v(t)}}function g(e){this.message=e}g.prototype=new Error,g.prototype.name="InvalidTokenError";var y=function(e,t){if("string"!=typeof e)throw new g("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(b(e.split(".")[n]))}catch(e){throw new g("Invalid token specified: "+e.message)}},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var E=function(){function e(t){_(this,e),this.type=t,"string"==typeof(arguments.length<=1?void 0:arguments[1])?(this.name=arguments.length<=1?void 0:arguments[1],this.items=arguments.length<=2?void 0:arguments[2]):(this.name=null,this.items=arguments.length<=1?void 0:arguments[1]),Array.isArray(this.items)||(this.items=[this.items])}return w(e,[{key:"toJSON",value:function(){return{name:this.name,_functionTreePrimitive:!0,type:this.type,items:this.items}}}]),e}(),M=function(e){function t(){var e;_(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this,"sequence"].concat(i)))}return S(t,e),t}(E),R=function(e){function t(){var e;_(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this,"parallel"].concat(i)))}return S(t,e),t}(E),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var N=function(e){function t(e){k(this,t);var n=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.message||e));return n.name="FunctionTreeError",n}return T(t,e),O(t,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),C=function(e){function t(e,n,i,r){k(this,t);var o=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return o.name="FunctionTreeExecutionError",o.execution=e,o.funcDetails=n,o.payload=i,o}return T(t,e),O(t,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,execution:{name:this.execution.name},funcDetails:{name:this.funcDetails.name,functionIndex:this.funcDetails.functionIndex},payload:this.payload,stack:this.stack}}}]),t}(N),D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function P(e){if(e.displayName)return e.displayName;if(e.name)return e.name;var t=e.toString(),n=void 0;return 0===t.indexOf("async function")?n="async function ":0===t.indexOf("function")&&(n="function "),t=(t=t.substr(n?n.length:0)).substr(0,t.indexOf("("))}function B(e){return e&&!Array.isArray(e)&&"object"===(void 0===e?"undefined":D(e))&&!(e instanceof E)}function L(e,t,n,i){if(n instanceof E){var r=n.toJSON();return Object.assign(r,{items:L(e,t,r.items,n instanceof R).items})}if(Array.isArray(n))return new M(n.reduce((function(i,r,o){if(r instanceof E){var a=r.toJSON();return i.concat(Object.assign(a,{items:L(e,t,a.items,r instanceof R).items}))}if("function"==typeof r){var s={name:r.displayName||P(r),functionIndex:t.push(r)-1,function:r},d=n[o+1];return B(d)&&(s.outputs={},Object.keys(d).forEach((function(n){if(r.outputs&&!~r.outputs.indexOf(n))throw new N("Outputs object doesn't match list of possible outputs defined for function.");s.outputs[n]=L(e,t,"function"==typeof d[n]?[d[n]]:d[n])}))),i.concat(s)}if(B(r))return i;if(Array.isArray(r)){var l=L(e,t,r);return i.concat(l)}throw new N('Unexpected entry in "'+e+'". '+function(e,t){return"\n[\n"+e.map((function(e){return e===t?"  "+(void 0===t?"undefined":D(t))+", <-- PROBLEM":"function"==typeof e?"  "+P(e)+",":e instanceof E?"  [ "+e.type.toUpperCase()+" ],":Array.isArray(e)?"  [ SEQUENCE ],":"  { PATHS },"})).join("\n")+"\n]\n  "}(n,r))}),[])).toJSON();throw new N("Unexpected entry in tree")}var x=function(e,t){return L(e,[],"function"==typeof t?[t]:t)},W=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var j=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.path=t,this.payload=n}return W(e,[{key:"toJSON",value:function(){return{path:this.path,payload:this.payload,_functionTreePath:!0}}}]),e}(),F=j,V=n(620),H=n.n(V);function U(e,t){return e._functionTreePrimitive&&e.type===t}function z(e,t,n,i,r,o,a,s,d){!function t(d,l,u,c,p){n((function(){function n(e){t(d,l+1,e,u,p)}function m(n,r){return function(o){var a=Object.assign({},u,o?o.payload:{});if(o&&n.outputs){var s=Object.keys(n.outputs);if(!~s.indexOf(o.path))throw new C(e,n,u,"function "+n.name+" must use one of its possible outputs: "+s.join(", ")+".");i(n,o.path,a),t(n.outputs[o.path].items,0,a,u,r)}else r(a)}}var f=d[l];if(f)if(U(f,"sequence"))t(f.items,0,u,c,n);else if(U(f,"parallel")){var h=f.items.length,v=[];o(u,h),f.items.forEach((function(i,r){return i.function?e.runFunction(i,u,c,m(i,(function(e){v.push(e),v.length===h?(s(e,h),n(Object.assign.apply(Object,[{}].concat(v)))):a(e,h-v.length)}))):t(i.items,0,u,c,(function(e){v.push(e),v.length===h?(s(e,h),n(Object.assign.apply(Object,[{}].concat(v)))):a(e,h-v.length)})),v}))}else e.runFunction(f,u,c,m(f,n));else d!==e.staticTree&&r(u),p(u)}))}([e.staticTree],0,t,null,d)}var G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function $(e){return e&&(e instanceof Promise||"function"==typeof e.then&&"function"==typeof e.catch)}function Z(e){return!(null!==e&&"object"===(void 0===e?"undefined":G(e))&&!Array.isArray(e)&&e.constructor!==Object)}var q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var J=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.wrap,r=void 0===i||i,o=n.ignoreDefinition,a=void 0!==o&&o;Y(this,e),this.definition=t,"function"!=typeof t&&(a||this.verifyDefinition(t),this.wrap=r,this.ProviderConstructor=function(e){this.context=e},this.ProviderConstructor.prototype=t,this.WrappedProviderConstructor=function(e,t){this.context=t,this.providerName=e},this.WrappedProviderConstructor.prototype=Object.keys(a?{}:t).reduce((function(e,n){var i=t[n];return e[n]=function(){for(var e=this,t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=i.apply(this,r);return $(a)?a.then((function(t){return e.context.debugger.send({type:"provider",datetime:Date.now(),method:e.providerName+"."+n,args:r,isPromise:!0,isRejected:!1,returnValue:Z(t)?t:"[CAN_NOT_SERIALIZE]"}),t})).catch((function(t){throw e.context.debugger.send({method:e.providerName+"."+n,args:r,isPromise:!0,isRejected:!0}),t})):(this.context.debugger.send({type:"provider",datetime:Date.now(),method:this.providerName+"."+n,args:r,returnValue:Z(a)?a:"[CAN_NOT_SERIALIZE]"}),a)},e}),{}))}return K(e,[{key:"verifyDefinition",value:function(e){if(!this.ignoreDefinition){if("object"!==(void 0===e?"undefined":q(e))||null===e)throw new Error("The definition passed as Provider is not valid");Object.keys(e).forEach((function(t){if("function"!=typeof e[t])throw new Error("The property "+t+" passed to Provider is not a method")}))}}},{key:"get",value:function(e){return"function"==typeof this.definition?this.definition(e):new this.ProviderConstructor(e)}},{key:"getWrapped",value:function(e,t){return"function"==typeof this.definition?this.definition(t):new this.WrappedProviderConstructor(e,t)}}]),e}(),X=J,Q=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var te=function(){function e(){ee(this,e)}return Q(e,[{key:"getValue",value:function(){throw new Error('Extending ResolveValue requires you to add a "getValue" method')}}]),e}();!function(e){function t(e){ee(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.cvalue=e,n}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,e),Q(t,[{key:"getValue",value:function(e){var t=e.resolve,n=this.cvalue;return t.isResolveValue(n)?t.value(n):Object.keys(n).reduce((function(e,i){return e[i]=t.value(n[i]),e}),{})}}])}(te);var ne=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var ie=function(e){function t(e,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.type=e,o.getter=n,o.strings=i,o.values=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ne(t,[{key:"getTags",value:function(){return[this].concat(this.getNestedTags())}},{key:"getPath",value:function(e){var t=this;return this.strings.reduce((function(n,i,r){var o=t.values[r];return o instanceof te?n+i+o.getValue(e):n+i+(void 0!==o?o:"")}),"")}},{key:"getValue",value:function(e){return this.getter(this.getPath(e),e)}},{key:"getNestedTags",value:function(){var e=this;return this.strings.reduce((function(n,i,r){var o=e.values[r];return o instanceof t?n.concat(o):n}),[])}},{key:"toString",value:function(){return this.type+"`"+this.pathToString()+"`"}},{key:"pathToString",value:function(){var e=this;return this.strings.reduce((function(n,i,r){var o=e.values[r];return o instanceof t?n+i+"${"+o.toString()+"}":n+i+(void 0!==o?o:"")}),"")}}]),t}(te);function re(e,t){return function(n){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];if(r.some((function(e){return void 0===e})))throw new Error("One of the values passed inside the tag interpolated to undefined. Please check.");return new ie(e,t,n,r)}}var oe=new X({isTag:function(e){if(!(e instanceof ie))return!1;for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!n.length||n.reduce((function(t,n){return t||n===e.type}),!1)},isResolveValue:function(e){return e instanceof te},value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e instanceof te?e.getValue(t?Object.assign({},this.context,t):this.context):e},path:function(e){if(e instanceof ie)return e.getPath(this.context);throw new Error("You are extracting a path from an argument that is not a Tag.")}},{wrap:!1}),ae=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function de(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e){return!e||"object"===(void 0===e?"undefined":se(e))&&!Array.isArray(e)}function ce(e,t,n,i){var r=e;return r.execution=t,r.functionDetails=n,r.payload=Object.assign({},i,{_execution:{id:t.id,functionIndex:n.functionIndex},error:e.toJSON?e.toJSON():{name:e.name,message:e.message,stack:e.stack}}),r}var pe=function(){function e(t,n,i,r){le(this,e),this.id=Date.now()+"_"+Math.floor(1e4*Math.random()),this.name=t||n.name||this.id,this.staticTree=n,this.functionTree=i,this.datetime=Date.now(),this.errorCallback=r,this.hasThrown=!1,this.isAsync=!1,this.runFunction=this.runFunction.bind(this)}return ae(e,[{key:"runFunction",value:function(e,t,n,i){if(!this.hasThrown){var r=this.createContext(e,t,n),o=this.functionTree,a=this.errorCallback,s=this,d=void 0;o.emit("functionStart",s,e,t);try{d=e.function(r)}catch(l){return this.hasThrown=!0,a(ce(l,s,e,t),s,e,t)}if($(d))o.emit("asyncFunction",s,e,t,d),this.isAsync=!0,d.then((function(n){if(n instanceof F)o.emit("functionEnd",s,e,t,n),i(n.toJSON());else{if(e.outputs)throw o.emit("functionEnd",s,e,t,n),new C(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" needs to be a path of either "+Object.keys(e.outputs)));if(!ue(n))throw o.emit("functionEnd",s,e,t,n),new C(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" is not a valid result"));o.emit("functionEnd",s,e,t,n),i({payload:n})}})).catch((function(n){if(!s.hasThrown)if(n instanceof Error)s.hasThrown=!0,a(ce(n,s,e,t),s,e,t);else if(n instanceof F)o.emit("functionEnd",s,e,t,n),i(n.toJSON());else if(e.outputs){var r=new C(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" needs to be a path of either "+Object.keys(e.outputs)));s.hasThrown=!0,a(ce(r,s,e,t),s,e,t)}else if(ue(n))o.emit("functionEnd",s,e,t,n),i({payload:n});else{var d=new C(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" is not a valid result"));s.hasThrown=!0,a(ce(d,s,e,t),s,e,t)}}));else if(d instanceof F)o.emit("functionEnd",s,e,t,d),i(d.toJSON());else if(e.outputs){var l=new C(s,e,t,new Error("The result "+JSON.stringify(d)+" from function "+e.name+" needs to be a path of either "+Object.keys(e.outputs)));this.hasThrown=!0,a(ce(l,s,e,t),s,e,t)}else if(ue(d))o.emit("functionEnd",s,e,t,d),i({payload:d});else{var u=new C(s,e,t,new Error("The result "+JSON.stringify(d)+" from function "+e.name+" is not a valid result"));this.hasThrown=!0,a(ce(u,s,e,t),s,e,t)}}}},{key:"createContext",value:function(e,t,n){var i=this.functionTree.contextProviders,r={execution:this,props:t||{},functionDetails:e,path:e.outputs?Object.keys(e.outputs).reduce((function(e,t){return e[t]=function(e){return new F(t,e)},e}),{}):null},o=i.debugger&&i.debugger.get(r,e,t,n),a=Object.keys(i).reduce((function(r,o){var a=i[o];return r[o]=a instanceof X?a.get(r,e,t,n):a,r}),r);return o?Object.keys(a).reduce((function(t,n){var r=i[n];return r&&r instanceof X&&r.wrap?t[n]="function"==typeof r.wrap?r.wrap(a,e):r.getWrapped(n,a):t[n]=a[n],t}),{}):a}}]),e}();!function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};le(this,t);var i=de(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(i.cachedTrees=[],i.cachedStaticTrees=[],i.executeBranchWrapper=n.executeBranchWrapper||function(e){e()},"object"!==(void 0===e?"undefined":se(e))||null===e||Array.isArray(e))throw new Error("You have to pass an object of context providers to FunctionTree");var r=Object.keys(e);if(r.indexOf("props")>=0||r.indexOf("path")>=0||r.indexOf("resolve")>=0||r.indexOf("execution")>=0||r.indexOf("debugger")>=0)throw new Error('You are trying to add a provider with protected key. "props", "path", "resolve", "execution" and "debugger" are protected');return i.contextProviders=Object.assign({},e,{resolve:oe}),i.run=i.run.bind(i),i}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,e),ae(t,[{key:"run",value:function(){var e=this,t=void 0,n=void 0,i=void 0,r=void 0,o=void 0,a=[].slice.call(arguments);if(a.forEach((function(e){"string"==typeof e?t=e:Array.isArray(e)||e instanceof E?n=e:n||"function"!=typeof e?"function"==typeof e?r=e:i=e:n=e})),!n)throw new Error("function-tree - You did not pass in a function tree");var s=function(r,a){var s=e.cachedTrees.indexOf(n);-1===s?(o=x(t,n),e.cachedTrees.push(n),e.cachedStaticTrees.push(o)):o=e.cachedStaticTrees[s];var d=new pe(t,o,e,(function(t,n,i,r){e.emit("error",t,n,i,r),a(t)}));e.emit("start",d,i),z(d,i,e.executeBranchWrapper,(function(t,n,i){e.emit("pathStart",n,d,t,i)}),(function(t){e.emit("pathEnd",d,t)}),(function(t,n){e.emit("parallelStart",d,t,n)}),(function(t,n){e.emit("parallelProgress",d,t,n)}),(function(t,n){e.emit("parallelEnd",d,t,n)}),(function(t){e.emit("end",d,t),r===a?r(null,t):r(t)}))};if(!r)return new Promise(s);s(r,r)}}])}(H());var me=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var fe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=e.nextWatchId++;this.id="Watch_"+n,this.rawId=n,this.name=null,this.type=t,this.executedCount=0,this.controller=null,this.modulePath="",this.dependencyMap=null}return me(e,[{key:"create",value:function(e,t,n){return this.name=n,this.controller=e,this.modulePath=t,this}},{key:"registerDependencies",value:function(){this.dependencyMap=this.createDependencyMap(),this.controller.dependencyStore.addEntity(this,this.dependencyMap),this.controller.devtools&&(this.controller.devtools.updateWatchMap(this,this.dependencyMap),this.controller.devtools.sendWatchMap([],[],0,0))}},{key:"destroy",value:function(){this.dependencyMap&&(this.controller.dependencyStore.removeEntity(this,this.dependencyMap),this.controller.devtools&&(this.controller.devtools.updateWatchMap(this,null,this.dependencyMap),this.controller.devtools.sendWatchMap([],[],0,0)))}},{key:"toJSON",value:function(){return{id:this.id,executedCount:this.executedCount,type:this.type,name:this.name}}}]),e}();fe.nextWatchId=0;var he=fe,ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ge=function(){function e(t,n){be(this,e),this.computed=t,this.propsTags=t.propsTags,this.nestedPath=n}return ve(e,[{key:"getValue",value:function(e){return this.nestedPath.reduce((function(e,t){return e&&e[t]}),this.computed.getValue(e))}},{key:"getDependencyMap",value:function(){return this.computed.getDependencyMap()}},{key:"clone",value:function(){return this.computed.clone()}},{key:"destroy",value:function(){return this.computed.destroy()}}]),e}(),ye=function(e){function t(e){be(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Compute"));return n.computedCallback=e,n.isDirty=!0,n.value=null,n.props=null,n.getters=null,n.stateTags=[],n.propsTags=[],n.onUpdate=n.onUpdate.bind(n),n.dynamicGetter=n.dynamicGetter.bind(n),n.dynamicGetter.path=n.dynamicPathGetter.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ve(t,[{key:"createDependencyMap",value:function(){return this.controller.createDependencyMap(this.stateTags,this.props,this.modulePath)}},{key:"getDependencyMap",value:function(){return this.dependencyMap}},{key:"onUpdate",value:function(){this.isDirty=!0}},{key:"clone",value:function(){return new t(this.computedCallback).create(this.controller,this.modulePath,this.name+" (clone)")}},{key:"compute",value:function(){return this.executedCount++,this.computedCallback(this.getDynamicGetter())}},{key:"getDynamicGetter",value:function(){return this.stateTags=[],this.propsTags=[],this.dynamicGetter}},{key:"parseDependencies",value:function(e){var t=this;if(!(e instanceof ie))throw new Error('Cerebral - Only tags are allowed in the dynamic "get" of Compute');e.getTags().forEach((function(e){"props"===e.type?t.propsTags.push(e):t.stateTags.push(e)}))}},{key:"dynamicGetter",value:function(e){this.parseDependencies(e);var t=e.getValue(this.getters);return _e(t)?t.getValue(this.props):t}},{key:"dynamicPathGetter",value:function(e){return e.getPath(this.getters)}},{key:"hasChangedProps",value:function(e){var t=this,n=this.controller.createContext(e);return this.propsTags.reduce((function(e,i){return!!e||i.getValue(t.getters)!==i.getValue(n)}),!1)}},{key:"getValue",value:function(e){if(!this.controller)throw new Error("This Cerebral Compute has not been added to a module");if(!this.isDirty&&this.propsTags.length&&this.hasChangedProps(e)&&(this.isDirty=!0),this.isDirty){this.getters=this.controller.createContext(e),this.props=e,this.value=this.compute();var t=this.dependencyMap;this.dependencyMap=this.createDependencyMap(),this.controller.dependencyStore.updateEntity(this,t,this.dependencyMap),this.controller.devtools&&(this.controller.devtools.updateWatchMap(this,this.dependencyMap,t),this.controller.devtools.updateComputedState(this.name,this.value)),this.isDirty=!1}return this.value}},{key:"toString",value:function(){return this.getValue(this.props)}}]),t}(he);"function"==typeof Symbol&&Symbol.iterator;var we=[];function Ie(e,t){-1===we.indexOf(e)&&(we.push(e),console.warn(e+" is DEPRECATED - "+t))}function Se(e,t){var n=t.execution.name.split(".");return n.splice(0,n.length-1).concat(e).join(".")}function _e(e){return e instanceof ye||e instanceof ge}re("string",(function(e){return e})),re("path",(function(e){return e})),re("signal",(function(e,t){return Ie("tags.signal",'use the "sequences" tag instead'),t.controller.getSequence(e)})),re("signals",(function(e,t){return Ie("tags.signals",'use the "sequences" tag instead'),t.controller.getSequences(e)})),re("sequences",(function(e,t){return t.controller.getSequence(e)||t.controller.getSequences(e)})),re("state",(function(e,t){return t.controller.getState(e)})),re("module",(function(e,t){return Ie("tags.module",'use the "moduleState" tag instead'),t.controller.getState(Se(e,t))})),re("moduleState",(function(e,t){return t.controller.getState(Se(e,t))})),re("moduleSequences",(function(e,t){return t.controller.getSequence(Se(e,t))||t.controller.getSequences(Se(e,t))})),re("props",(function(e,t){return function(e,t){return t.split(".").reduce((function(e,n,i){if(i>0&&void 0===e)throw new Error('Cannot extract value at path "'+t+'" ("'+n+'" is not defined).');return e[n]}),e)}(t.props,e)}));const Ee={tags:"tags",categories:"categories",packs:"packs",favoritePacks:"favorites",cloudStatus:"activate",layout:"layouts",section:"sections",row:"rows",module:"modules",tb_template:"templates",tb_set:"template-sets",code_css:"snippets-css",code_css_no_selector:"snippets-css-ns",code_html:"snippets"};var Me=n(86636),Re=n.n(Me);const Oe={cache:{},offlineCacheTable:"DiviCloud",offlineCacheVersion:"1.4",cacheKey:"",init(e,t){window.ETCloudCache=window.ETCloudCache||{},this.cacheKey=e,(0,a.has)(window.ETCloudCache,e)||(0,a.set)(window.ETCloudCache,e,{}),this.getOfflineCache("cloud-cache-version").then((e=>{if(this.offlineCacheVersion!==e){Re().createInstance({name:this.offlineCacheTable}).clear().then((()=>{this.setOfflineCache("cloud-cache-version",this.offlineCacheVersion)}))}})),this.cache=window.ETCloudCache[e]},addData(e,t,n=!1,i=!1){if(n)(0,a.set)(window.ETCloudCache,e,t);else{const n=i?window.ETCloudCache[i]:this.cache;(0,a.set)(n,e,t)}},getData(e,t=[],n=!1){return n?(0,a.get)(window.ETCloudCache[n],e,t):(0,a.get)(this.cache,e,t)},clearData(){window.ETCloudCache={},(0,a.set)(window.ETCloudCache,this.cacheKey,{}),this.cache=window.ETCloudCache[this.cacheKey]},setOfflineCache(e,t,n=!1,i="items"){const r=Re().createInstance({name:this.offlineCacheTable});return n?r.getItem(e).then((n=>{let o=t;return o="array"===i?(0,a.merge)(n,t):n?(0,a.concat)(n,t).filter((function({id:e,item_location:t},n){const i=t||"local";return!this.has(n=e+i)&&this.add(n)}),new Set):t,r.setItem(e,o)})):r.setItem(e,t)},getOfflineCache(e){return Re().createInstance({name:this.offlineCacheTable}).getItem(e).then((e=>e))}};function ke(e="user",t=""){if("predefined"===e)return et_cloud_data.predefined_items_url;const n=function(e){try{return y(e)}catch(e){return"invalid-token"}}(t);return`${"invalid-token"===n?"":(0,a.get)(n,["aud",[1]],"")}/wp-json/cloud/v1`}function Ae(e,t={},n={},i=!1,r=0,o="",s=0){return Te().then((d=>{const l=(0,a.get)(d,"accessToken","");if(""===l)return i&&i({error:"auth_error"}),new Promise((e=>e({error:"auth_error"})));const u=(0,a.get)(d,"sharedFolders",[]),c=(0,a.find)(u,["id",s]);return c&&!o&&(o=`${c.endpoint}/cloud/v1`),function(e,t,n={},i={},r=!1,o=0,s=""){if(0!==o)return Ce({type:"post",resource:t,resourceId:o,accessToken:e,providedBaseUrl:s},n).then((e=>(r&&r(e),e)));const d=[];(0,a.isEmpty)(i)||(0,a.forEach)(i,((t,n)=>{(0,a.isEmpty)(t)||(0,a.forEach)(t,(t=>{d.push(Ne(t,n,e,s))}))}));"fullwidth"===n.width&&d.push(Ne("fullwidth","module_width",e,s));return(0,a.isEmpty)(d)?Ce({type:"post",resource:t,accessToken:e,providedBaseUrl:s},n).then((t=>(r&&r(t,e),t))):Promise.all(d).then((i=>{const o=(0,a.groupBy)(i,"taxonomy");return(0,a.forEach)(["categories","tags","module_width"],(e=>{const t=(0,a.get)(o,[e],[]);let i=[];(0,a.isEmpty)(t)||(i=(0,a.map)((0,a.keys)((0,a.keyBy)(t,"id")),a.toInteger)),n[e]=i})),Ce({type:"post",resource:t,accessToken:e,providedBaseUrl:s},n).then((t=>(r&&r(t,e),t)))}))}(l,e,t,n,i,r,o)})).catch((e=>(i&&i({error:e}),{error:e})))}function Te(e="",t=!1){return Oe.getOfflineCache("refreshTokenPart").then((n=>new Promise((i=>{f().ajax({type:"POST",url:et_cloud_data.ajaxurl,dataType:"json",data:{action:"et_cloud_update_tokens",et_cloud_token_nonce:et_cloud_data.nonces.et_cloud_refresh_token,et_cloud_access_token:e,et_cloud_save_session:t,et_cloud_refresh_token_part:n},complete(e){const t=(0,a.get)(e,"responseJSON.data",{});Oe.setOfflineCache("refreshTokenPart",t.refreshTokenPart).then((()=>i(t)))}})}))))}function Ne(e,t,n,i=""){return new Promise((r=>{if((0,a.isUndefined)(e)||""===e)return r({});return Ce({type:"post",resource:t,accessToken:n,providedBaseUrl:i},{name:e}).then((e=>{if(e.error&&"term_exists"!==e.error)return r({});const n="term_exists"===(0,a.get)(e,"code","")?e.data.term_id:e.id;r({taxonomy:t,id:n})}))}))}function Ce(e={},t={}){const{type:n,resource:i,resourceId:r,source:o,queryString:s,providedUrl:d,providedBaseUrl:l,etAccount:u,accessToken:c,includeHeaders:p}=e;let m=d||"";const f="predefined"===o&&"cloudStatus"!==i?`${(0,a.get)(u,"username","")}:${(0,a.get)(u,"apiKey","")}`:c,h=("predefined"!==o||"favoritePacks"===i||"layout"===i||"cloudStatus"===i)&&!d;if(!m){const e=l&&""!==l?l:ke(o,f),t=function(e){return(0,a.get)(Ee,e,e)}(i);m=`${e}/${t}`,r&&(m=`${m}/${r}`),s&&(m=`${m}?${s}`)}const v={method:n,mode:"cors"};(0,a.isEmpty)(t)||(v.body=JSON.stringify(t));const b=d?{"Content-Type":"application/x-www-form-urlencoded"}:{"Content-Type":"application/json; charset=UTF-8",Accept:"application/json"};if(h){if(!f)return new Promise((e=>e({code:"missing_token",error:"Your Divi Cloud session has ended. Please try logging in again. If you continue to experience authorization failures, try closing Library modal and opening it again so that your authorization token can be regenerated."})));b.Authorization=`Bearer ${f}`,v.credentials="same-origin"}return v.headers=b,function(e,t,n=!1){const i="post"===t.method?300:15;return t.signal=(e=>{const t=new AbortController;return setTimeout((()=>t.abort()),1e3*e),t})(i).signal,fetch(e,t).then((e=>{if(503===e.status)throw new Error(`${e.status} - ${e.statusText}`);return e.json().then((t=>({totalPages:e.headers.get("x-wp-totalpages"),totalItems:e.headers.get("x-wp-total"),totalCloudItems:e.headers.get("X-ET-API-CLOUD-ITEM-COUNT"),body:t})))})).then((e=>(0,a.get)(e,"body.code")?{error:e.body.code,...e.body}:n?e:e.body)).catch((t=>(console.log("CLOUD API REQUEST ERROR:",e,t),{error:t})))}(m,v,p)}var De=window.vendor.wp.i18n,Pe=window.divi.rest,Be=window.divi.serializedPost;const Le=e=>{(0,s.dispatch)("divi/modal-library").open({name:"divi/progress-bar",dimension:{width:500,height:150},attributes:{progress:10,heading:(0,De.__)("Saving to Cloud","et_builder")}});const t=(0,s.select)("divi/edit-post").getContent(),n=(0,Be.serializeModuleFlatObjects)(t.asMutable({deep:!0})),i=(0,s.select)("divi/page-settings").getSettings(),r=(0,s.select)("divi/serialized-post").getUsedGlobalColorIds(),o=(0,Be.extractGlobalVariablesIds)(n),a=(0,s.select)("divi/global-data").getGlobalColorsToExport(r),d=(0,s.select)("divi/global-data").getGlobalVariablesToExport(o),l=(0,s.select)("divi/settings").getSetting(["layout","type"]),u=new FormData;(0,s.dispatch)("divi/rest").setInProgress("sync-to-server",!0),(0,s.dispatch)("divi/rest").setInProgress("sync-to-server--publish",!0),u.append("content",n),u.append("global_colors",JSON.stringify(a)),u.append("global_variables",JSON.stringify(d)),u.append("post",e),u.append("context","et_builder"),u.append("return_content","true");const c=t=>{(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/portability/export",data:t},!0).then((n=>{const i=n?.timestamp||"";if(void 0!==n.page&&void 0!==n.totalPages){const e=t;e.append("page",String(Number(n.page)+1)),e.append("timestamp",i),(0,s.dispatch)("divi/modal-library").setAttributes({name:"divi/progress-bar",attributes:{progress:Math.floor(Number(n.page)/Number(n.totalPages)*80)},merge:!0}),c(e)}else{const t={content:JSON.stringify(n)};(0,s.dispatch)("divi/modal-library").setAttributes({name:"divi/progress-bar",attributes:{progress:90},merge:!0}),Ae(l,t,[],(()=>{(0,s.dispatch)("divi/rest").setInProgress("sync-to-server",!1),(0,s.dispatch)("divi/rest").setInProgress("sync-to-server--publish",!1),(0,s.dispatch)("divi/modal-library").setAttributes({name:"divi/progress-bar",attributes:{progress:100},merge:!0}),setTimeout((()=>{(0,s.dispatch)("divi/modal-library").close({name:"divi/progress-bar"})}),1e3)}),e,"")}})).then((()=>{(0,s.dispatch)("divi/history").setSavedState({content:n,settings:i})})).catch((e=>{console.log(e)}))};c(u)},xe=()=>{(0,s.dispatch)("divi/serialized-post").syncToServer({syncType:"publish"})},We=()=>{(0,s.dispatch)("divi/serialized-post").syncToServer({syncType:"draft"})},je=({isActive:e})=>{e?(0,s.dispatch)("divi/modal-library").close({name:"divi/help"}):((0,s.dispatch)("divi/help").setCurrentListName("divi/default"),(0,s.dispatch)("divi/help").setCurrentVideo(0),(0,s.dispatch)("divi/modal-library").open({name:"divi/help"}))};var Fe=window.divi.constantLibrary;const Ve=({isModalActive:e,modalName:t,modalOffset:n,modalWidth:i,buttonOffset:r,owner:o})=>{if(e)(0,s.dispatch)("divi/modal-library").close({name:t});else{const e="divi/add-to-library"===t,d=28+10,l=i-28,u=Fe.modal.defaults.offset.left===n?.left&&Fe.modal.defaults.offset.left===n?.top||e&&(0,a.isEmpty)(o)?{top:r.top+d,left:r.left-l}:{};(0,s.dispatch)("divi/modal-library").open({name:t,offset:u,owner:o,attributes:{saveToDiviCloud:"off"}})}},He=({isActive:e})=>{e?(0,s.dispatch)("divi/modal-library").close({name:"divi/page-settings"}):(0,s.dispatch)("divi/modal-library").open({name:"divi/page-settings"})},Ue=({isActive:e})=>{e?(f()("html").attr("data-et-app-view","desktop"),(0,s.dispatch)("divi/app-ui").setView("desktop"),f()(window).trigger("resize")):(f()("html").attr("data-et-app-view","wireframe"),(0,s.dispatch)("divi/app-ui").setView("wireframe"))},ze=()=>{const e=(e=>{const t=(0,s.select)("divi/settings").getEnabledBreakpoints().map((e=>e.name)),n=t.indexOf(e);return-1===n?t[0]||"desktop":t[(n+1)%t.length]})((0,s.select)("divi/app-ui").getView());(0,s.dispatch)("divi/app-ui").setView(e)},Ge=({postTitle:e,updatePostTitle:t})=>{const n=(0,r.useRef)(e),[i,a]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{i||(n.current=e)}),[e]),o().createElement("h1",{className:"et-vb-page-bar-title",contentEditable:!0,suppressContentEditableWarning:!0,onFocus:()=>{n.current=e,a(!0)},onInput:e=>{const n=e.target;t(n?.innerText)},onBlur:()=>{a(!1)},dangerouslySetInnerHTML:{__html:i?n?.current:e}})},$e=()=>{const{postTitle:e}=(0,s.useSelect)((e=>({postTitle:e("divi/page-settings").getSetting("postTitle")}))),{update:t}=(0,s.useDispatch)("divi/page-settings");return o().createElement(Ge,{postTitle:e,updatePostTitle:e=>{t("postTitle",e)}})};var Ze=n(93967),qe=n.n(Ze),Ke=window.divi.iconLibrary,Ye=window.divi.tooltip;const Je=({name:e,active:t,iconSvg:n,label:i,onClick:a,style:s})=>{const[d,u]=(0,r.useState)(!1);return o().createElement("button",{className:qe()({"et-vb-page-bar-button":!0,[`et-vb-page-bar-button--${e}`]:!0,"et-vb-page-bar-button--active":t,"et-vb-page-bar-button--hover":d}),onClick:l.handleOnClickFallback,type:"button","data-tooltip-id":`et-vb-page-bar-tooltip-${e}`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:s,onMouseDown:a},o().createElement(Ke.IconSvg,{name:n?.name,color:"transparent",iconComponentProps:{color:"#FFFFFF"}}),o().createElement(Ye.TooltipContainer,{id:`et-vb-page-bar-tooltip-${e}`,windowLocation:"top",position:"page-settings"===e?"center-right":"bottom-center",verticalDistance:20},i))},Xe=({name:e,active:t,iconSvg:n,label:i,onClick:a})=>{const[s,d]=(0,r.useState)(!1);return o().createElement("button",{className:qe()({"et-vb-page-bar-responsive-button":!0,[`et-vb-page-bar-responsive-button--${e}`]:!0,"et-vb-page-bar-responsive-button--active":t,"et-vb-page-bar-responsive-button--hover":s}),onClick:l.handleOnClickFallback,type:"button","data-tooltip-id":`et-vb-page-bar-tooltip-${e}`,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onMouseDown:a},o().createElement(Ke.IconSvg,{name:n?.name,color:"transparent",viewBox:n?.viewBox??"0 0 28 28",iconComponentProps:{color:t||s?"#ffffff":"var(--medium-gray--inverse)"}}),o().createElement(Ye.TooltipContainer,{id:`et-vb-page-bar-tooltip-${e}`,windowLocation:"top",position:"bottom-center",verticalDistance:20},i))},Qe=e=>{e.preventDefault(),(0,s.dispatch)("divi/app-ui").resetWindow({attr:"width",windowLocation:"app",setter:"user"})};var et=window.divi.fieldLibrary;const tt=({defaultValue:e,enable:t,hasReset:n,name:i,onBlur:r,onChange:a,onFocus:s,onResetClick:d,value:u})=>{if(!t)return null;const c="zoom"===i?o().createElement(Ke.IconSvg,{size:10,name:"divi/search-enhancement",viewBox:"6 6 18 18"}):o().createElement(Ke.IconSvg,{size:10,name:"divi/responsive-width",color:"var(--medium-gray)",viewBox:"2 1 18 18"});return o().createElement("div",{className:qe()({"et-vb-page-bar-responsive-select-wrapper":!0,[`et-vb-page-bar-responsive-select-wrapper--${i}`]:!0})},o().createElement(et.Text,{name:`et-vb-page-bar-responsive-select--${i}`,defaultValue:e,value:u,onBlur:r,onChange:a,onFocus:s,renderBefore:()=>o().createElement("div",{className:"et-vb-page-bar-responsive-select-icon"},c),renderAfter:()=>n?o().createElement("button",{className:"et-vb-page-bar-responsive-select-reset et-vb-page-bar-responsive-select-button--reset",onClick:l.handleOnClickFallback,type:"button","aria-label":(0,De.__)("Reset","et_builder"),onMouseDown:d},o().createElement(Ke.IconSvg,{size:10,name:"divi/responsive-reset",color:"var(--medium-gray)",viewBox:"-3 -3 20 20"})):null,showPlaceholderOnEmpty:!0}))};tt.defaultProps={onBlur:a.noop,onChange:a.noop,onFocus:a.noop,onResetClick:a.noop};const nt=(0,a.debounce)((({defaultAppFrameWidth:e,appFrameMaximumWidth:t,editedValue:n,resetWindow:i,setEditedValue:r,setWindow:o,valueRefCurrent:a})=>{const s=parseInt(n);if(n){if(s>t)return void r("");const n=Number.isNaN(s)?e:s;o({attr:"width",value:n,windowLocation:"app",setter:"user",allowBreakpointSwitching:!0});r((d=String(n),`${parseInt(d)}px`))}else a&&i({attr:"width",windowLocation:"app",setter:"user"}),r("");var d}),800),it=()=>{const{appFrameMaximumWidth:e,appWindowWidth:t,isAppWindowWidthModified:n,view:i}=(0,s.useSelect)((e=>({appFrameMaximumWidth:e("divi/app-ui").getAppFrameMaximumWidth(),appWindowWidth:e("divi/app-ui").getWindow("width","app"),isAppWindowWidthModified:e("divi/app-ui").isUserDefinedWindowProperty({attr:"width",windowLocation:"app"}),view:e("divi/app-ui").getView()}))),{resetWindow:a,setAppFrameResizeStatus:d,setWindow:l}=(0,s.useDispatch)("divi/app-ui"),u="wireframe"!==i,c=(0,r.useRef)(""),[p,m]=(0,r.useState)(!1),[f,h]=(0,r.useState)("");return(0,r.useEffect)((()=>{n?(c.current=`${t}px`,h(`${t}px`)):(c.current="",h(""))}),[n,t]),o().createElement(tt,{defaultValue:`${t}px`,enable:u,hasReset:n,onFocus:()=>{m(!0),d({status:!0,triggeringElement:"page-bar-select-resize",position:!1})},onBlur:()=>{m(!1),d({status:!1,triggeringElement:!1,position:!1})},onChange:n=>{nt({defaultAppFrameWidth:t,appFrameMaximumWidth:e,editedValue:n.inputValue,resetWindow:a,setEditedValue:h,setWindow:l,valueRefCurrent:c.current}),h(n.inputValue)},onResetClick:Qe,name:"width",value:p?f:c.current})};var rt=window.vendor.wp.hooks,ot=window.divi.uiLibrary;const at=()=>{const e=(0,s.select)("divi/app-ui").getView(),t=(0,s.select)("divi/app-ui").getAppFrameMaximumPossibleZoom({format:"percentage",view:e,roundingUpPercentage:!1}),n=(0,s.select)("divi/app-ui").getAppFrameZoom({format:"percentage"});return[{name:"reset",label:(0,De.__)("Reset","et_builder"),onClick:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:100,setter:"visualBuilder"}),(0,s.dispatch)("divi/right-click-options").unset()},bottomSeparator:!0},{name:"zoom-out",enable:n-10>=10,label:(0,De.__)("Zoom Out","et_builder"),onClick:()=>{p(),(0,s.dispatch)("divi/right-click-options").unset()},shortcut:ot.isAppleOS?["","-"]:["Ctrl","-"]},{name:"zoom-to-75",enable:t>=75,label:(0,De.__)("Zoom to 75%","et_builder"),onClick:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:75,setter:"user"}),(0,s.dispatch)("divi/right-click-options").unset()}},{name:"zoom-to-50",enable:t>=50,label:(0,De.__)("Zoom to 50%","et_builder"),onClick:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:50,setter:"user"}),(0,s.dispatch)("divi/right-click-options").unset()}},{name:"zoom-to-25",enable:t>=25,label:(0,De.__)("Zoom to 25%","et_builder"),onClick:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:25,setter:"user"}),(0,s.dispatch)("divi/right-click-options").unset()}}]},st=(0,a.debounce)((({appFrameZoom:e,defaultAppFrameZoom:t,editedValue:n,setAppFrameZoom:i,setEditedValue:r})=>{const o=Math.round(parseFloat(n));if(n){const n=1,a=o>t||o<n?e:Number.isNaN(o)?t:o;i({value:a,setter:"user"}),r(`${a}%`)}else e&&i({value:t,setter:"visualBuilder"}),r("")}),800),dt=()=>{const{appFrameZoom:e,defaultAppFrameZoom:t}=(0,s.useSelect)((e=>{const t=e("divi/app-ui").getView();return{appFrameZoom:e("divi/app-ui").getAppFrameZoom({format:"percentage"}),defaultAppFrameZoom:e("divi/app-ui").getAppFrameMaximumPossibleZoom({format:"percentage",view:t,roundingUpPercentage:!1})}})),{setAppFrameZoom:n}=(0,s.useDispatch)("divi/app-ui"),i=e&&t!==e,[a,d]=(0,r.useState)(!1),[l,u]=(0,r.useState)("");(0,r.useEffect)((()=>{(0,rt.addFilter)("divi.rightClickOptions.optionsMap","divi",(e=>(e.pageBarResponsiveSelectZoom=at,e)))}),[]);const c=a?l:t===e?"":`${e}%`;return o().createElement(tt,{defaultValue:`${t}%`,enable:!0,hasReset:i,onFocus:n=>{d(!0);!l&&t===e||l===`${e}%`||u(`${e}%`),(e=>{const t=(0,s.select)("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),n=(0,s.select)("divi/app-ui").getElementProperty({elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"}),i=e.target?.getBoundingClientRect()?.left;(0,s.dispatch)("divi/right-click-options").set({cursorPosition:{x:i,y:t+n+5},optionType:"pageBarResponsiveSelectZoom",owner:{optionType:"pageBarResponsiveSelectZoom"},windowLocation:"top"})})(n)},onBlur:()=>{d(!1)},onChange:i=>{u(i.inputValue),st({appFrameZoom:e,defaultAppFrameZoom:t,editedValue:i.inputValue,setAppFrameZoom:n,setEditedValue:u})},onResetClick:()=>{u("");const e=(0,s.select)("divi/app-ui").getView(),t=(0,s.select)("divi/app-ui").getAppFrameMaximumPossibleZoom({format:"percentage",view:e,roundingUpPercentage:!1});n({value:t,setter:"visualBuilder"})},name:"zoom",value:c})},lt=({breakpoints:e,currentResponsiveView:t,onResponsiveChange:n,isBreakpointsSettingsActive:i,onBreakpointsSettingsClick:a})=>o().createElement("div",{className:"et-vb-page-bar-responsive-controls"},o().createElement("div",{className:"et-vb-page-bar-responsive-buttons-wrapper"},o().createElement(r.Fragment,null,o().createElement(Xe,{name:"more",active:i,iconSvg:{name:"divi/more",viewBox:"-13 -6 30 30",size:13},label:(0,De.__)("More","et_builder"),onClick:a}),e.map((e=>o().createElement(Xe,{key:`et-vb-page-bar-responsive-button--${e?.name}`,name:e?.name,active:e?.name===t,iconSvg:{name:e?.icon?.name,viewBox:e?.icon?.viewBox},label:e?.label,onClick:()=>{n(e?.name)}}))))),o().createElement(it,null),o().createElement(dt,null)),ut=e=>{f()("html").attr("data-et-app-view",e),(0,s.dispatch)("divi/app-ui").setView(e);const t=(0,s.select)("divi/app-ui").getAppFrameMaximumPossibleZoom({view:e,format:"percentage",roundingUpPercentage:!1});(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:t,setter:"visualBuilder"})},ct=e=>{const t=(0,s.select)("divi/modal-library").isModalActive("divi/breakpoints-settings"),n=e.nativeEvent.target;if(t)(0,s.dispatch)("divi/modal-library").close({name:"divi/breakpoints-settings"});else{const e=28,t=15;(0,s.dispatch)("divi/modal-library").open({name:"divi/breakpoints-settings",offset:{top:n.getBoundingClientRect().top+e+t,left:n.getBoundingClientRect().left}})}},pt=()=>{const{breakpoints:e,currentResponsiveView:t,isBreakpointsSettingsActive:n}=(0,s.useSelect)((e=>({breakpoints:e("divi/settings").getEnabledBreakpoints(),currentResponsiveView:e("divi/app-ui").getView(),isBreakpointsSettingsActive:e("divi/modal-library").isModalActive("divi/breakpoints-settings")})));return o().createElement(lt,{breakpoints:e,currentResponsiveView:t,onResponsiveChange:ut,onBreakpointsSettingsClick:ct,isBreakpointsSettingsActive:n})},mt=()=>{const e=(0,s.select)("divi/app-preferences").getPreferences({mode:"preferences"})?.appAdminBar?.visible,t=(0,s.select)("divi/settings").getSetting(["conditionalTags","is_tb"]),n=(0,s.select)("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"});return e&&!t?n:0},ft=()=>{const e=(0,s.select)("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),t=f()(".et_vertical_nav").length>0;let n=0;return e&&(n-=e),f()("#top-header").length>0&&(n+=f()("#top-header").height()),f()("#main-header").length>0&&!t&&(n+=f()("#main-header").height()),n},ht=(e,t,n)=>t.includes(e)?e:n,vt=e=>{if(!e||!e.root||!e.root.children)return!0;const t=e.root.children;if((0,a.isEmpty)(t))return!0;if(t.length>1)return!1;const n=e[t[0]];return!n||!n.children||!(n.children.length>0)},bt=e=>{if("localhost.test"===window.location.hostname)return!1;return!!vt(e)},gt=e=>{if(!bt(e))return;switch((0,s.select)("divi/app-preferences").getPreferences({mode:"preferences"}).pageCreationFlowOnStart){case"default":(0,s.dispatch)("divi/modal-library").open({name:"divi/page-creation"});break;case"choosePremadeLayout":(0,s.dispatch)("divi/modal-library").open({name:"divi/load-layout",tab:"premade-layouts"});break;case"buildWithAi":{const e={aiMode:"layout",type:"layout_with_ai",contextData:{module:""},additionalInfo:{field_name:"",fields:[]}};jQuery(window).trigger("et_ai_container_ready",[e,"et-ai-app"]);break}}},yt=e=>{const t=(0,s.select)("divi/modal-library").getActiveModals({returnedProperties:["name","dimension","dimensionMinimum","offset","toggleTimestamp","canBeSavedOnWorkspace"]}),n=(0,s.select)("divi/app-ui").extractWorkspace({activeModals:t});return{id:e?.id??"last-use",label:e?.label??(0,De.__)("Last Used","et_builder"),window:n.window,appFramePseudoWrapper:n.appFramePseudoWrapper,elements:n.elements,sidebarRows:n.sidebarRows,view:n.view,breakpoint:n.breakpoint,attributeState:n.attributeState,interactionLayers:n.interactionLayers,activeFloatingModals:n.activeFloatingModals}},wt=e=>{(0,s.dispatch)("divi/app-ui").addBuilderBarButton(e)};var It=window.divi.moduleUtils;const St=()=>{const e=(0,Be.serializeModuleFlatObjects)((0,s.select)("divi/edit-post").getContent()?.asMutable({deep:!0})),t=(0,s.select)("divi/page-settings").getSettings()?.asMutable({deep:!0}),n=(0,s.select)("divi/history").getSavedState()?.asMutable({deep:!0}),i=e=>(0,It.maybeUnwrapPlaceholderBlock)(e).replace(/\r\n/g,"\n"),r=!(0,a.isEqual)(i(n?.content??""),i(e)),o=!(0,a.isEqual)(n?.settings,t);return r||o},_t=()=>{const e=(0,s.select)("divi/settings").getSetting(["layout","type"]),t={section:["root","section","fullwidth-section","specialty-section","unsupported","layout"],row:["root","section","fullwidth-section","specialty-section","row","row-inner","unsupported","layout"],module:["root","section","fullwidth-section","specialty-section","row","row-inner","column","specialty-column","column-inner","group","module","fullwidth-module","child-module","unsupported","layout"]};if(e in t){t[e].forEach((e=>{["add","delete"].forEach((t=>{(0,s.dispatch)("divi/app-ui").setModulePermission({moduleType:e,permissionType:t,permissionValue:!1})}))}))}},Et=e=>{const{isCreatingPreview:t,isSyncToServerInProgress:n,postStatus:i,postUrl:a,editUrl:d,adminUrl:c,isThemeBuilder:p,remoteItemId:m,elements:{save:f,preview:h}}=e,[v,b]=(0,r.useState)(n?"active":"idle"),g=(0,r.useRef)(),y=(0,r.useRef)(!1),w=(0,r.useRef)(!1),I="publish"===i,S="idle"===v,_=e=>{w.current||St()&&e.preventDefault()},E=()=>{p?window.jQuery(window).trigger("et-tb-close-modal"):window.history.length>2?window.history.back():h?u(a):l.topWindow.close()},M=()=>{w.current=!0,m?(()=>{const{id:e}=(0,s.select)("divi/settings").getSetting(["post"]);return(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/update-item",keepalive:!0,data:{data:{itemPayload:{updateType:"delete_permanently"},clickedItem:{id:e}}}})})().then(E).catch((e=>{console.log("Failed to remove temporary cloud layout.",e)})):E()},R=()=>{We()},O=()=>{m?Le(m):xe()},k=e=>{e.preventDefault(),y.current=St(),y.current?(0,s.dispatch)("divi/modal-library").open({name:"divi/unsaved-changes",attributes:{onDiscardAndExit:()=>{M()},onSaveAndExit:()=>{I?O():R()},onCloseModal:()=>{y.current=!1}}}):M()};(0,r.useEffect)((()=>(clearTimeout(g.current),n?b("active"):n||"active"!==v||(b("done"),g.current=setTimeout((()=>b("idle")),1e3)),()=>clearTimeout(g.current))),[n]),(0,r.useEffect)((()=>{y.current&&"done"===v&&M()}),[v]),(0,r.useEffect)((()=>(l.topWindow.addEventListener("beforeunload",_),()=>{l.topWindow.removeEventListener("beforeunload",_)})),[]);const A={active:{label:(0,De.__)("Saving","et_builder"),iconName:"divi/loading",iconAnimation:"rotate-center"},done:{label:(0,De.__)("Saved","et_builder"),iconName:"divi/check",iconAnimation:null},idle:{label:m?(0,De.__)("Save Cloud Item","et_builder"):"publish"!==i?(0,De.__)("Publish","et_builder"):(0,De.__)("Save","et_builder"),iconName:null,iconAnimation:null}}?.[v],T=A.iconName?o().createElement(Ke.IconSvg,{name:A.iconName,animation:A.iconAnimation,color:"#fff",styles:{margin:"-4px auto"}}):A.label;return(0,rt.addFilter)("divi.rightClickOptions.optionsMap","divi",(e=>(e.pageBarExitMenu=()=>(({onExitClick:e,postUrl:t,editUrl:n,adminUrl:i})=>{const r=window.DiviSettingsData.post.type,{postTypeLabel:o,isPostTypePublic:a}=window.DiviSettingsData.currentPage,s=(r,o)=>{const a=r.ctrlKey||r.metaKey,s=2===r.button;if(!a&&!s)switch(o){case"back":e(r);break;case"dashboard":u(i);break;case"view-post":u(t);break;case"edit-post":u(n)}},d=(0,ot.isAppleOS)(),l=[{name:"back",label:"Back",onClick:e,shortcut:d?["",""]:["",""]},{name:"dashboard",label:"Dashboard",url:i,onClick:e=>s(e,"dashboard"),shortcut:d?["","","d"]:["","","d"]}];if(a)return[l[0],{name:`view-${r}`,label:`View ${o}`,url:t,onClick:e=>s(e,"view-post"),shortcut:d?["","e"]:["","e"]},{name:`edit-${r}`,label:`Edit ${o}`,url:n,onClick:e=>s(e,"edit-post"),shortcut:d?["","","e"]:["","","e"]},l[1]];return l})({onExitClick:k,postUrl:a,editUrl:d,adminUrl:c}),e))),o().createElement("div",{className:"et-vb-page-bar-right-side-save-button"},o().createElement("div",{className:"et-vb-page-bar-exit-button-wrapper"},o().createElement("div",{className:"et-vb-page-bar-exit-button"},o().createElement("a",{onClick:k,onContextMenu:e=>{e.preventDefault(),(e=>{e.preventDefault(),(0,s.dispatch)("divi/right-click-options").set({cursorPosition:{x:e.clientX,y:e.clientY},optionType:"pageBarExitMenu",owner:{optionType:"pageBarExitMenu"},windowLocation:"top"})})(e)},href:p?"#":a,className:"et-vb-page-bar-save-button et-vb-page-bar-save-button--exit"},(0,De.__)("Exit","et_builder")),o().createElement("div",{onClick:l.handleOnClickFallback,onContextMenu:e=>e.preventDefault(),className:"et-vb-page-bar-exit-button--dropdown-menu",onKeyDown:e=>e.preventDefault(),role:"button",tabIndex:0,"aria-label":(0,De.__)("Exit Dropdown","et_builder"),onMouseDown:e=>{(e=>{const t=(0,s.select)("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),n=(0,s.select)("divi/app-ui").getElementProperty({elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"});(0,s.dispatch)("divi/right-click-options").set({cursorPosition:{x:e.clientX+5,y:t+n-1},optionType:"pageBarExitMenu",owner:{optionType:"pageBarExitMenu"},windowLocation:"top"})})(e)}},o().createElement(Ke.IconSvg,{name:"divi/caret-down",color:"#fff",viewBox:"0 0 12 12",styles:{width:"18px",minWidth:"18px",height:"18px"}})))),!p&&h?o().createElement("button",{onClick:l.handleOnClickFallback,className:qe()({"et-vb-page-bar-save-button":!0,"et-vb-page-bar-save-button--preview":!0,"et-vb-page-bar-save-button--preview-saving":t}),type:"button",onMouseDown:()=>{(0,s.dispatch)("divi/serialized-post").syncToServer({syncType:"preview"})}},t?(0,De.__)("Creating Preview Link...","et_builder"):(0,De.__)("Preview","et_builder")):null,I||!S||m?null:o().createElement("button",{onClick:l.handleOnClickFallback,className:"et-vb-page-bar-save-button et-vb-page-bar-save-button--draft",type:"button",onMouseDown:R},(0,De.__)("Save Draft","et_builder")),f?o().createElement("button",{onClick:l.handleOnClickFallback,className:"et-vb-page-bar-save-button",type:"button",disabled:!S,onMouseDown:O},T):null)},Mt=({buttons:e,isCreatingPreview:t,isSyncToServerInProgress:n,isThemeBuilder:i,postStatus:r,postUrl:a,editUrl:s,postType:d,adminUrl:l,remoteItemId:u,elements:{addToLibrary:c,clear:p,colorMode:m,history:f,pageSaveBarButton:h,portability:v,redo:b,undo:g},hasUndo:y,hasRedo:w})=>o().createElement("div",{className:"et-vb-page-bar-tools"},o().createElement("div",{className:"et-vb-page-bar-tools-action-buttons"},m&&o().createElement(et.Toggle,{name:"interface-mode",value:e.appColorMode.active?"on":"off",onChange:e.appColorMode.onClick,className:"et-vb-page-bar-color-mode-toggle"}),g&&o().createElement(Je,{name:"undo",active:!1,iconSvg:{name:"divi/modal-undo-enhancement"},label:(0,De.__)("Undo","et_builder"),onClick:e.undo.onClick,style:{opacity:y?null:.4}}),b&&o().createElement(Je,{name:"redo",active:!1,iconSvg:{name:"divi/modal-redo-enhancement"},label:(0,De.__)("Redo","et_builder"),onClick:e.redo.onClick,style:{opacity:w?null:.4}}),f&&o().createElement(Je,{name:"history",active:e.history.active,iconSvg:{name:"divi/clock-enhancement"},label:(0,De.__)("History","et_builder"),onClick:e.history.onClick}),v&&o().createElement(Je,{name:"portability",active:e.portability.active,iconSvg:{name:"divi/portability-enhancement"},label:(0,De.__)("Export & Import","et_builder"),onClick:e.portability.onClick}),p&&o().createElement(Je,{name:"clear-layout",active:e.clearLayout.active,iconSvg:{name:"divi/delete"},label:(0,De.__)("Clear Layout","et_builder"),onClick:e.clearLayout.onClick}),c&&o().createElement(Je,{name:"add-to-library",active:e.addToLibrary.active,iconSvg:{name:"divi/save-enhancement"},label:(0,De.__)("Add to Library","et_builder"),onClick:e.addToLibrary.onClick})),o().createElement(Et,{isSyncToServerInProgress:n,isCreatingPreview:t,postStatus:r,postUrl:a,editUrl:s,postType:d,adminUrl:l,remoteItemId:u,elements:h,isThemeBuilder:i})),Rt=({remoteItemId:e,elements:t})=>{const{addToLibraryModalDimension:n,addToLibraryModalOffset:i,addToLibraryModalOwner:r,appColorMode:l,clearLayoutModalDimension:u,clearLayoutModalOffset:c,hasUndo:p,hasRedo:m,hasPresetSessionUndo:f,hasPresetSessionRedo:h,historyModalDimension:v,historyModalOffset:b,isAddToLibraryModalOpen:g,isClearLayoutModalOpen:y,isCreatingPreview:w,isHistoryModalOpen:I,isPortabilityModalOpen:S,isPresetSessionActive:_,isSavingDraft:E,isSavingPublish:M,isSavingAnyLayout:R,portabilityModalDimension:O,portabilityModalOffset:k,postStatus:A,postUrl:T,editUrl:N,postType:C,adminUrl:D,isThemeBuilder:P}=(0,s.useSelect)((e=>({addToLibraryModalDimension:e("divi/modal-library")?.getModal("divi/add-to-library")?.dimension,addToLibraryModalOwner:e("divi/modal-library")?.getModal("divi/add-to-library")?.owner,addToLibraryModalOffset:e("divi/modal-library")?.getModal("divi/add-to-library")?.offset,appColorMode:e("divi/app-preferences").get(["app","colorMode"]),clearLayoutModalDimension:e("divi/modal-library")?.getModal("divi/clear-layout")?.dimension,clearLayoutModalOffset:e("divi/modal-library")?.getModal("divi/clear-layout")?.offset,hasUndo:e("divi/history").hasUndo(),hasRedo:e("divi/history").hasRedo(),hasPresetSessionUndo:e("divi/history").hasPresetSessionUndo(),hasPresetSessionRedo:e("divi/history").hasPresetSessionRedo(),historyModalDimension:e("divi/modal-library")?.getModal("divi/history")?.dimension,historyModalOffset:e("divi/modal-library")?.getModal("divi/history")?.offset,isAddToLibraryModalOpen:e("divi/modal-library")?.getModal("divi/add-to-library")?.isActive,isClearLayoutModalOpen:e("divi/modal-library")?.getModal("divi/clear-layout")?.isActive,isCreatingPreview:e("divi/rest").isInProgress("sync-to-server--preview"),isHistoryModalOpen:e("divi/modal-library")?.getModal("divi/history")?.isActive,isPortabilityModalOpen:e("divi/modal-library")?.getModal("divi/portability")?.isActive,isPresetSessionActive:e("divi/history").isPresetSessionActive(),isSavingDraft:e("divi/rest").isInProgress("sync-to-server--draft"),isSavingPublish:e("divi/rest").isInProgress("sync-to-server--publish"),isSavingAnyLayout:e("divi/global-layouts").isSavingAnyLayout(),portabilityModalDimension:e("divi/modal-library")?.getModal("divi/portability")?.dimension,portabilityModalOffset:e("divi/modal-library")?.getModal("divi/portability")?.offset,postStatus:e("divi/settings").getSetting(["post","status"]),postUrl:e("divi/settings").getSetting(["post","url"]),editUrl:e("divi/settings").getSetting(["post","editUrl"]),postType:e("divi/settings").getSetting(["post","type"]),adminUrl:e("divi/settings").getSetting(["urls","admin"]),isThemeBuilder:e("divi/settings").getSetting(["conditionalTags","is_tb"])}))),B=E||M||R,{undo:L,redo:x,presetSessionUndo:W,presetSessionRedo:j}=(0,s.useDispatch)("divi/history"),F=_?f:p,V=_?h:m;return o().createElement(Mt,{buttons:{addToLibrary:{onClick:e=>{e.stopPropagation(),d();const t=e.nativeEvent.target;Ve({isModalActive:g,modalName:"divi/add-to-library",modalOffset:i,modalWidth:n?.width??280,buttonOffset:{top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left},owner:""})},active:g&&(0,a.isEmpty)(r)},clearLayout:{onClick:e=>{e.stopPropagation(),d();const t=e.nativeEvent.target;Ve({isModalActive:y,modalName:"divi/clear-layout",modalOffset:c,modalWidth:u?.width??280,buttonOffset:{top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left}})},active:y},history:{onClick:e=>{e.stopPropagation(),d();const t=e.nativeEvent.target;Ve({isModalActive:I,modalName:"divi/history",modalOffset:b,modalWidth:v?.width??280,buttonOffset:{top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left}})},active:I},portability:{onClick:e=>{e.preventDefault(),e.stopPropagation(),d();const t=e.nativeEvent.target;Ve({isModalActive:S,modalName:"divi/portability",modalOffset:k,modalWidth:O?.width??280,buttonOffset:{top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left}})},active:S},appColorMode:{onClick:e=>{const t="on"===e.inputValue?"light":"dark";(0,s.dispatch)("divi/app-preferences").set(["app","colorMode"],t)},active:"light"===l},redo:{onClick:e=>{if(e.preventDefault(),_){if(!h)return;j()}else{if(!m)return;x()}}},undo:{onClick:e=>{if(e.preventDefault(),_){if(!f)return;W()}else{if(!p)return;L()}}}},elements:t,hasUndo:F,hasRedo:V,remoteItemId:e,isCreatingPreview:w,isSyncToServerInProgress:B,postUrl:T,editUrl:N,postType:C,adminUrl:D,postStatus:"publish"===A?"publish":"draft",isThemeBuilder:P})},Ot=e=>{const{adminBarHeight:t,brandedModalHeaderHeight:n,buttons:i,remoteItemId:r,elements:{addToLibrary:a,clear:s,colorMode:d,history:l,pageSaveBarButton:u,pageSettings:c,portability:p,redo:m,responsiveButtons:f,undo:h}}=e;return o().createElement("div",{className:"et-vb-page-bar",style:{top:t+n}},o().createElement("div",{className:"et-vb-page-bar-settings"},c?o().createElement(Je,{name:"page-settings",active:i.pageSettings.active,iconSvg:{name:"divi/settings-enhancement"},label:(0,De.__)("Page Settings","et_builder"),onClick:i.pageSettings.onClick}):null,o().createElement($e,null)),f&&o().createElement(pt,null),o().createElement(Rt,{remoteItemId:r,elements:{addToLibrary:a,clear:s,colorMode:d,history:l,pageSaveBarButton:u,portability:p,redo:m,undo:h}}))},kt=()=>{const{adminBarHeight:e,brandedModalHeaderHeight:t,postStatus:n,isPageSettingsModalOpen:i,isEditingLibraryLayout:r,remoteItemId:d}=(0,s.useSelect)((e=>({isEditingLibraryLayout:e("divi/settings").isEditingLibraryLayout(),remoteItemId:e("divi/settings").getSetting(["layout","remoteItemId"]),adminBarHeight:e("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),brandedModalHeaderHeight:e("divi/app-ui").getElementProperty({elementName:"brandedModalHeader",propertyGroup:"dimension",propertyName:"height"}),postStatus:e("divi/settings").getSetting(["post","status"]),isPageSettingsModalOpen:e("divi/modal-library")?.getModal("divi/page-settings")?.isActive})));(0,a.includes)(["publish","draft"],n)||console.warn(`Invalid post status: ${n}. Visual Builder only expects post status to be either 'draft' or 'publish'`);const l={addToLibrary:!d,clear:!r,colorMode:!0,history:!0,pageSaveBarButton:{save:!0,preview:!r},pageSettings:!d,portability:!r,redo:!0,responsiveButtons:!0,undo:!0};return o().createElement(Ot,{adminBarHeight:e,brandedModalHeaderHeight:t,buttons:{pageSettings:{onClick:()=>{He({isActive:i})},active:i}},elements:l,remoteItemId:d})},At=({name:e,active:t,iconSvg:n,label:i,activeModals:a,onClick:s})=>{const[d,u]=(0,r.useState)(!1),c=t??a.includes(e),p=e.replace(/\//g,"-");return o().createElement("button",{className:qe()({"et-vb-builder-bar-button":!0,[`et-vb-builder-bar-button--${p}`]:!0,"et-vb-builder-bar-button--active":c,"et-vb-builder-bar-button--hover":d}),onClick:l.handleOnClickFallback,type:"button","data-tooltip-id":`et-vb-builder-bar-tooltip-${e}`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onMouseDown:s},o().createElement(Ke.IconSvg,{name:n?.name,color:"transparent",iconComponentProps:{color:"divi/add"===e?c?"#326BFF":"#ffffff":c?"#326BFF":d?"#273039":"#A2B0C1"}}),o().createElement(Ye.TooltipContainer,{id:`et-vb-builder-bar-tooltip-${e}`,windowLocation:"top",position:"center-right"},i))},Tt=({adminBarHeight:e,brandedModalHeaderHeight:t,canAddLayout:n,canManageGlobalVariables:i,isActionOnHoverActive:a,isParentActionOnHoverActive:s,isWireframeView:d,isXRayActive:l,onClickActionOnHover:u,onClickBuilderSettings:c,onClickHelp:p,onClickInspector:m,onClickLayers:f,onClickVariableManager:h,onClickLoadLayout:v,onClickParentActionOnHover:b,onClickWireframeView:g,onClickXRay:y,pageBarHeight:w,builderBarButtons:I,activeModals:S})=>{const _=[n&&{order:0,iconSvg:{name:"divi/add"},label:(0,De.__)("Add Layout","et_builder"),name:"divi/load-layout",onClick:v},{order:1,iconSvg:{name:"divi/layers-enhancement"},label:(0,De.__)("Layers","et_builder"),name:"divi/layers",onClick:f},{order:2,iconSvg:{name:"divi/inspector"},label:(0,De.__)("Inspector","et_builder"),name:"divi/inspector",onClick:m},i&&{order:3,iconSvg:{name:"divi/global-variable"},label:(0,De.__)("Variable Manager","et_builder"),name:"divi/manage-global-variable",onClick:h},{active:d,order:4,iconSvg:{name:"divi/wireframe-enhancement"},label:(0,De.__)("Wireframe View","et_builder"),name:"divi/wireframe-view",onClick:g,hasSeparator:!0},{active:a,order:5,iconSvg:{name:"divi/hover-actions-enhancement"},label:(0,De.__)("Action Icons On Hover","et_builder"),name:"divi/interaction-action-on-hover",onClick:u},{active:s,order:6,iconSvg:{name:"divi/parent-hover-actions-enhancement"},label:(0,De.__)("Parent Action Icons On Hover ","et_builder"),name:"divi/interaction-parent-action-on-hover",onClick:b},{active:l,order:7,iconSvg:{name:"divi/xray-enhancement"},label:(0,De.__)("X-Ray","et_builder"),name:"divi/interaction-x-ray",onClick:y,hasSeparator:!0},{order:8,iconSvg:{name:"divi/tools-enhancement"},label:(0,De.__)("Builder Settings","et_builder"),name:"divi/builder-settings",onClick:c},{order:9,iconSvg:{name:"divi/question-enhancement"},label:(0,De.__)("Help","et_builder"),name:"divi/help",onClick:p}].filter(Boolean),E=(0,r.useMemo)((()=>[...I,..._].sort(((e,t)=>e.order===t.order?e.name.localeCompare(t.name):e.order-t.order))),[I,_]);return o().createElement("div",{className:"et-vb-builder-bar-wrap",style:{top:e+t+w}},E.map((e=>o().createElement(o().Fragment,{key:e.name},o().createElement(At,{active:e.active,iconSvg:e.iconSvg,label:e.label,name:e.name,onClick:e.onClick,activeModals:S}),e.hasSeparator&&o().createElement("div",{className:"et-vb-builder-bar-separator"})))))},Nt=()=>{const{adminBarHeight:e,brandedModalHeaderHeight:t,builderBarWidth:n,isActionOnHoverActive:i,isBuilderSettingsModalOpen:r,isEditingLibraryLayout:a,isHelpModalOpen:d,isLoadLayoutOpen:l,isParentActionOnHoverActive:u,isWireframeView:c,isXRayActive:p,layoutType:m,pageBarHeight:f,sidebarLeftWidth:h,sidebarRightWidth:v,topWindowHeight:b,topWindowWidth:g,builderBarButtons:y,activeModals:w,isManageGlobalVariableOpen:I,canManageGlobalVariables:S}=(0,s.useSelect)((e=>({activeModals:e("divi/modal-library").getActiveModalNames({excludeModalNames:["divi/page-settings","divi/history","divi/portability","divi/clear-layout"]}),isBuilderSettingsModalOpen:e("divi/modal-library").isModalActive("divi/builder-settings"),isHelpModalOpen:e("divi/modal-library").isModalActive("divi/help"),isLoadLayoutOpen:e("divi/modal-library").isModalActive("divi/load-layout"),isManageGlobalVariableOpen:e("divi/modal-library").isModalActive("divi/manage-global-variable"),isWireframeView:"wireframe"===e("divi/app-ui").getView(),isActionOnHoverActive:e("divi/app-ui").isInteractionLayerActive("actionOnHover"),isParentActionOnHoverActive:e("divi/app-ui").isInteractionLayerActive("parentActionOnHover"),isXRayActive:e("divi/app-ui").isInteractionLayerActive("xRay"),isEditingLibraryLayout:e("divi/settings").isEditingLibraryLayout(),layoutType:e("divi/settings").getSetting(["layout","type"]),builderBarButtons:e("divi/app-ui").getBuilderBarButtons(),adminBarHeight:e("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),brandedModalHeaderHeight:e("divi/app-ui").getElementProperty({elementName:"brandedModalHeader",propertyGroup:"dimension",propertyName:"height"}),pageBarHeight:e("divi/app-ui").getElementProperty({elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"}),topWindowWidth:e("divi/app-ui").getWindow("width","top"),topWindowHeight:e("divi/app-ui").getWindow("height","top"),builderBarWidth:e("divi/app-ui").getElementProperty({elementName:"builderBar",propertyGroup:"dimension",propertyName:"width"}),sidebarLeftWidth:e("divi/app-ui").getElementProperty({elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),sidebarRightWidth:e("divi/app-ui").getElementProperty({elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),canManageGlobalVariables:e("divi/settings").checkRolePermission("variables_manager","edit_theme_options")}))),{setInteractionLayer:_}=(0,s.useDispatch)("divi/app-ui"),{isLayersModalOpen:E,isInspectorModalOpen:M}=(0,s.useSelect)((e=>({isLayersModalOpen:e("divi/modal-library").isModalActive("divi/layers"),isInspectorModalOpen:e("divi/modal-library").isModalActive("divi/inspector")}))),R=!a||"layout"===m,O=(e,t,n)=>{(0,s.dispatch)("divi/app-preferences").set(["app","interactionLayers"],{actionOnHover:e,parentActionOnHover:t,xRay:n})};return o().createElement(Tt,{adminBarHeight:e,brandedModalHeaderHeight:t,canAddLayout:R,canManageGlobalVariables:S,isActionOnHoverActive:i,isParentActionOnHoverActive:u,isWireframeView:c,isXRayActive:p,onClickActionOnHover:()=>{_({name:"actionOnHover",active:!i}),O(!i,u,p)},onClickBuilderSettings:()=>{r?(0,s.dispatch)("divi/modal-library").close({name:"divi/builder-settings"}):(0,s.dispatch)("divi/modal-library").open({name:"divi/builder-settings"})},onClickHelp:()=>{je({isActive:d})},onClickInspector:()=>{if(M)(0,s.dispatch)("divi/modal-library").close({name:"divi/inspector"});else{const e=(0,s.select)("divi/modal-library").isModalActive("divi/page-settings"),t=(0,s.select)("divi/modal-library").getModalOwner("divi/module"),n=(0,s.select)("divi/modal-library").getModalOwner("divi/module-shortcode"),i=e?"":t||n||"";(0,s.dispatch)("divi/modal-library").open({name:"divi/inspector",owner:i})}},onClickLayers:()=>{E?(0,s.dispatch)("divi/modal-library").close({name:"divi/layers"}):(0,s.dispatch)("divi/modal-library").open({name:"divi/layers"})},onClickVariableManager:()=>{I?(0,s.dispatch)("divi/modal-library").close({name:"divi/manage-global-variable"}):(0,s.dispatch)("divi/modal-library").open({name:"divi/manage-global-variable",dimension:{width:420,height:400}})},onClickLoadLayout:t=>{if(t.stopPropagation(),l)(0,s.dispatch)("divi/modal-library").close({name:"divi/load-layout"});else{const t=32;(0,s.dispatch)("divi/modal-library").close({name:"divi/add-module"}),(0,s.dispatch)("divi/modal-library").open({name:"divi/load-layout",dimension:{width:g-(n+h+v+2*t),height:b-(e+f+2*t)},offset:{top:e+f+t,left:n+h+t}})}},onClickParentActionOnHover:()=>{_({name:"parentActionOnHover",active:!u}),O(i,!u,p)},onClickWireframeView:()=>{Ue({isActive:c})},onClickXRay:()=>{_({name:"xRay",active:!p}),O(i,u,!p)},pageBarHeight:f,builderBarButtons:y,activeModals:w})};let Ct=-1;const Dt=({dimension:e,position:t,setElementProperty:n})=>{const[i,a]=(0,r.useState)(!1),s="left"===t?"sidebarLeft":"sidebarRight",d=i=>{const r="left"===t?i?.screenX-Ct:Ct-i?.screenX;n({elementName:s,propertyGroup:"dimension",propertyName:"width",value:e?.width+r})},u=()=>{Ct=-1,a(!1),l.topWindow.removeEventListener("mousemove",d),l.topWindow.removeEventListener("mouseup",u)};return o().createElement(o().Fragment,null,o().createElement("div",{className:qe()({"et-vb-sidebar-resize-handle":!0,[`et-vb-sidebar-resize-handle--${t}`]:!0,"et-vb-sidebar-resize-handle--resizing":i}),onMouseDown:e=>{a(!0),Ct=e?.screenX,l.topWindow.addEventListener("mousemove",d),l.topWindow.addEventListener("mouseup",u)},role:"button",tabIndex:0},o().createElement("span",{className:"et-vb-sidebar-resize-handle-label"},(0,De.__)("Drag to resize","et_builder"))),i?o().createElement("div",{className:"et-vb-sidebar-resize-handle-mousetrap"}):null)},Pt=({position:e})=>{const{setElementProperty:t}=(0,s.useDispatch)("divi/app-ui"),{dimension:n,dimensionMinimum:i,sidebarMaximumWidth:r,sidebarHandleCondition:a}=(0,s.useSelect)((t=>{const n=t("divi/app-ui").getSidebarProps(e);return{...n,dimensionMinimum:t("divi/modal-library").getMaximumModalDimensionMinimum(n.activeModals),sidebarMaximumWidth:t("divi/app-ui").getSidebarMaximumWidth(e),sidebarHandleCondition:t("divi/app-ui").getSidebarHandleCondition()}}));if("disable"===a)return null;return o().createElement(Dt,{dimension:n,position:e,setElementProperty:e=>{const{width:n,height:o}=i,a=n??0,s=o??0;if("dimension"===e.propertyGroup){if("width"===e.propertyName){if(a>=e.value)return void t({...e,value:a});if(r<=e.value)return void t({...e,value:r})}if("height"===e.propertyName&&s>=e.value)return void t({...e,value:s})}t(e)}})};var Bt=window.divi.errorBoundary,Lt=window.divi.draggable;const xt=({active:e,isDragging:t,label:n,modalName:i,navContextMenuCallback:r,onElementClick:a,onElementDrag:s,onElementRelease:d,placeholderStyle:l,sidebarRowId:u,style:c})=>{const p=t&&o().createElement("button",{className:"et-vb-sidebar-row-nav et-vb-sidebar-row-nav-drag-placeholder",style:l,type:"button"},n);return o().createElement(o().Fragment,null,o().createElement(Lt.Draggable,{key:`sidebar-row-nav-${i}`,isTopWindow:!0,className:qe()({"et-vb-sidebar-row-nav":!0,"et-vb-sidebar-row-nav--active":e,"et-vb-sidebar-row-nav--dragging":t}),type:"button",style:c,onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),r({sidebarRowId:u,modalName:i,cursorPosition:{x:e.clientX,y:e.clientY},trigger:"navItem"})},onElementClick:a,onElementDrag:s,onElementRelease:d},n),p)};var Wt,jt=new Uint8Array(16);function Ft(){if(!Wt&&!(Wt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Wt(jt)}var Vt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Ht=function(e){return"string"==typeof e&&Vt.test(e)},Ut=[],zt=0;zt<256;++zt)Ut.push((zt+256).toString(16).substr(1));var Gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Ut[e[t+0]]+Ut[e[t+1]]+Ut[e[t+2]]+Ut[e[t+3]]+"-"+Ut[e[t+4]]+Ut[e[t+5]]+"-"+Ut[e[t+6]]+Ut[e[t+7]]+"-"+Ut[e[t+8]]+Ut[e[t+9]]+"-"+Ut[e[t+10]]+Ut[e[t+11]]+Ut[e[t+12]]+Ut[e[t+13]]+Ut[e[t+14]]+Ut[e[t+15]]).toLowerCase();if(!Ht(n))throw TypeError("Stringified UUID is invalid");return n};var $t=function(e,t,n){var i=(e=e||{}).random||(e.rng||Ft)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return Gt(i)};let Zt={screenX:0,screenY:0},qt=[],Kt=!1,Yt=!1,Jt=!1,Xt=!1,Qt="multiInstanceModal",en=!1;const tn=({active:e,sidebarRowId:t,modalName:n,navContextMenuCallback:i,setActiveModal:d})=>{const[l,u]=(0,r.useState)(!1),[c,p]=(0,r.useState)({}),[m,f]=(0,r.useState)({}),h=(0,s.select)("divi/modal-library").getModalLabelsByNames([n])?.[n];return o().createElement(xt,{active:e,isDragging:l,label:h,modalName:n,navContextMenuCallback:i,onElementClick:({event:e})=>{Zt={screenX:e.screenX,screenY:e.screenY},Yt=(0,s.select)("divi/app-ui").isSidebarModal(n);const t=(0,s.select)("divi/modal-library").getModal(n),i=t?.dimension?.width??400;Qt=t?.type??"multiInstanceModal",en=t?.snappable,qt=(0,s.select)("divi/app-ui").getDockingAreas({type:Qt,width:i}),en&&Yt&&(Xt=(0,s.select)("divi/app-ui").getSidebarModalInfo(n).sidebarRowId,Kt={id:"string"==typeof Xt?Xt:"",type:"sidebar-modal"})},onElementDrag:({sinceMouseDown:e,domRect:t})=>{const i={left:e.x+t.left,top:e.y+t.top};if(l||(u(!0),f({content:"",position:"relative",width:t.width,height:t.height,opacity:0}),(0,s.dispatch)("divi/modal-library").setDraggingState({name:n,status:!0})),p({...c,position:"fixed",top:i.top,left:i.left}),en){const e=(0,s.select)("divi/app-ui").getHoveredDockingArea(i,qt);if(Yt){Kt=!!e&&{id:e?.id,type:e?.type};"object"==typeof e&&Xt===e.id?Jt&&(Jt=!1):Jt||(Jt=!0)}else{const t=!!e&&{id:e?.id,type:e?.type};t!==Kt&&(Kt=t,(0,s.dispatch)("divi/app-ui").setHoveredSidebarDockingArea({sidebarDockingArea:t}))}}},onElementRelease:({event:e,sinceMouseDown:i,domRect:r})=>{const o={screenX:e.screenX,screenY:e.screenY};if((0,a.isEqual)(Zt,o))d({sidebarRowId:t,activeModal:n});else{if(p({}),u(!1),f({}),en)if(Yt)Jt&&!Kt&&((0,s.dispatch)("divi/app-ui").undockModalFromSidebarRow({modalName:n,sidebarRowId:(0,s.select)("divi/app-ui").getSidebarModalInfo(n)?.sidebarRowId}),(0,s.dispatch)("divi/modal-library").setOffset({name:n,offset:{left:i.x+r.left,top:i.y+r.top}}));else{const e={"sidebar-row":"above","sidebar-modal":"inside","sidebar-row-last":"below"};if("object"==typeof Kt)switch(Kt.type){case"sidebar-row":case"sidebar-modal":case"sidebar-row-last":(0,s.dispatch)("divi/app-ui").dockModalToSidebarRow({modalName:n,modalType:Qt,newSidebarRowId:$t(),sidebarRowId:Kt.id,position:(0,a.includes)(["above","inside","below"],e[Kt.type])?e[Kt.type]:"above"});break;case"sidebar":(0,s.dispatch)("divi/app-ui").dockModalToSidebar({modalName:n,modalType:Qt,newSidebarRowId:$t(),sidebarName:(0,a.includes)(["sidebarLeft","sidebarRight"],Kt.id)?Kt?.id:"sidebarLeft"})}}Kt=!1,Xt=!1,(0,s.dispatch)("divi/app-ui").setHoveredSidebarDockingArea({sidebarDockingArea:!1})}(0,s.dispatch)("divi/modal-library").setDraggingState({name:n,status:!1}),Zt={screenX:0,screenY:0}},placeholderStyle:m,sidebarRowId:t,style:c})};let nn=-1,rn=0,on=0;const an=({height:e,heightMaxLimit:t,heightMinLimit:n,resizing:i,setHeight:a,setResizeStatus:s,sidebarRowId:d,updateLimits:u})=>{(0,r.useEffect)((()=>{rn=t,on=n}),[t,n]);const c=t=>{const n=e+(t?.screenY-nn);n<rn&&n>on&&a({sidebarRowId:d,height:n})},p=()=>{nn=-1,s({sidebarRowId:d,status:!1}),l.topWindow.removeEventListener("mousemove",c),l.topWindow.removeEventListener("mouseup",p)};return o().createElement(o().Fragment,null,o().createElement("div",{className:"et-vb-sidebar-row-resize-handle",onMouseDown:e=>{u(d),s({sidebarRowId:d,status:!0}),nn=e?.screenY,l.topWindow.addEventListener("mousemove",c),l.topWindow.addEventListener("mouseup",p)},role:"button",tabIndex:0},o().createElement("span",{className:"et-vb-sidebar-row-resize-handle-label"},(0,De.__)("Drag to resize","et_builder"))),i?o().createElement("div",{className:"et-vb-sidebar-row-resize-handle-mousetrap"}):null)},sn=({height:e,resizing:t,sidebarRowId:n})=>{const{setSidebarRowHeight:i,updateSidebarRowLimits:r,setSidebarRowResizingStatus:a}=(0,s.useDispatch)("divi/app-ui"),{max:d,min:l}=(0,s.useSelect)((e=>{const t=e("divi/app-ui").getSidebarRowDimensionLimits(n,"height");return{max:t.max,min:t.min}}));return o().createElement(an,{height:e,heightMaxLimit:d,heightMinLimit:l,resizing:t,setHeight:i,setResizeStatus:a,sidebarRowId:n,updateLimits:r})},dn=(0,r.memo)((({activeDockingArea:e,activeModal:t,component:n,componentProps:i,height:s,id:d,index:l,isDraggedToUndock:u,modalIds:c,modalLabels:p,multiModal:m=!0,navContextMenuCallback:f=a.noop,resizing:h,setActiveModal:v})=>{const b=m?40:0,g="sidebar-modal"===e&&o().createElement(o().Fragment,null,o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--modal et-vb-sidebar-row-docking-area-highlight--modal--top"}),o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--modal et-vb-sidebar-row-docking-area-highlight--modal--right"}),o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--modal et-vb-sidebar-row-docking-area-highlight--modal--bottom"}),o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--modal et-vb-sidebar-row-docking-area-highlight--modal--left"})),y="sidebar-row"===e&&o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--row"}),w="sidebar-row-last"===e&&o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--row-last"});return o().createElement(o().Fragment,null,o().createElement(Bt.ErrorBoundary,{key:"sidebar-row-id",componentName:"sidebar-row-modal"},o().createElement("div",{className:qe()({"et-vb-sidebar-row":!0,"et-vb-sidebar-row--resizing":h,"et-vb-sidebar-row--multi-modal":m,"et-vb-sidebar-row--single-modal":!m,"et-vb-sidebar-row--dragged-to-undock":u,"et-vb-sidebar-row--first":0===l,"et-vb-sidebar-row-docking-area--row":"sidebar-row"===e,"et-vb-sidebar-row-docking-area--row-last":"sidebar-row-last"===e,"et-vb-sidebar-row-docking-area--modal":"sidebar-modal"===e}),style:{height:s}},g,y,w,m&&o().createElement("div",{className:"et-vb-sidebar-row-navs",onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),f({sidebarRowId:d,modalName:t,cursorPosition:{x:e.clientX,y:e.clientY},trigger:"navWrapper"})}},c?.map((e=>o().createElement(tn,{key:`sidebar-row-nav-${e}`,active:t===e,label:p?.[e],modalName:e,navContextMenuCallback:f,setActiveModal:v,sidebarRowId:d})))),o().createElement("div",{className:"et-vb-sidebar-row-content",style:{height:s-b}},(0,a.isFunction)(n)?(0,r.createElement)(n,i):null),o().createElement(sn,{height:s,sidebarRowId:d,resizing:h}))))})),ln=e=>{const{id:t,sidebarWidth:n}=e,i=(0,s.useSelect)((e=>{const n=e("divi/app-ui"),i=e("divi/modal-library"),o=n.getSidebarRow(t),a=n.getSidebarRowHeight(t),s=n.getHoveredSidebarRowDockingArea(t),d=(0,r.useMemo)((()=>i.getModalLabelsByNames(o?.modalIds)),[o?.modalIds]),l=n.getDraggedToUndockSidebarModal(),u=o?.activeModal,c=i.getModalProperty({modalName:u,property:"component"}),p=i.getModalProperty({modalName:u,property:"type"}),m=i.getModalProperty({modalName:u,property:"tab"}),f=i.getModalProperty({modalName:u,property:"group"}),h=i.getModalProperty({modalName:u,property:"owner"}),v=i.isModalActive(u);return{sidebarRow:o,sidebarRowHeight:a,hoveredSidebarRowDockingArea:s,modalLabels:d,sidebarModalDraggedToUndock:l,component:c,type:p,tab:m,group:f,owner:h,isActiveModal:v}})),{sidebarRow:o,sidebarRowHeight:d,hoveredSidebarRowDockingArea:l,modalLabels:u,sidebarModalDraggedToUndock:c,component:p,type:m,tab:f,group:h,owner:v,isActiveModal:b}=(0,r.useMemo)((()=>i),[i?.component,i?.type,i?.tab,i?.group,i?.owner,i?.isActiveModal,i?.sidebarRow,i?.sidebarRowHeight,i?.hoveredSidebarRowDockingArea,i?.modalLabels,i?.sidebarModalDraggedToUndock]),g="object"==typeof c&&t===c?.sidebarRowId,y=o?.activeModal,{setSidebarRowActiveModal:w}=(0,s.useDispatch)("divi/app-ui"),{open:I,openGroup:S}=(0,s.useDispatch)("divi/modal-library");(0,r.useEffect)((()=>{if(!b&&(I({name:o?.activeModal}),f&&h&&"string"==typeof f&&"object"==typeof h)){const e=h[f];if(e){const t=Array.isArray(e)?e:[e],n=t[0];S({name:o?.activeModal,tabName:f,groupId:n,groupIds:t})}}}),[o?.activeModal]);const _=b?o?.activeModal:"",E=(0,r.useCallback)((({cursorPosition:e,sidebarRowId:t,modalName:n,trigger:i})=>{(0,s.dispatch)("divi/right-click-options").set({cursorPosition:e,optionType:"sidebarRowNav",owner:{optionType:"sidebarRowNav",id:t,modalName:n,trigger:i},windowLocation:"top"})}),[s.dispatch]),M=(0,r.useMemo)((()=>({tab:f,group:h,name:y,type:m,owner:v,dimension:{width:n}})),[y,n,m,f,h,v]);if((0,r.useEffect)((()=>{if((0,a.isUndefined)(i?.component)){const n=(0,s.select)("divi/app-ui").getSidebarRowSidebar(e?.id);(0,s.dispatch)("divi/app-ui").removeSidebarRow({sidebarName:n,sidebarRowId:t})}}),[i?.component]),!i?.component)return null;const R=(0,r.useMemo)((()=>({...e,height:d,resizing:o?.resizing,activeModal:_,activeDockingArea:l,isDraggedToUndock:g,modalIds:o?.modalIds,modalLabels:u,multiModal:o?.multiModal,setActiveModal:w,navContextMenuCallback:E,component:p,componentProps:M})),[e,d,o?.resizing,b,l,g,o?.modalIds,u,o?.multiModal,w,E,p,n,M]);return(0,r.createElement)(dn,R)},un=({position:e,dimension:t,offset:n,rowIds:i})=>o().createElement(o().Fragment,null,o().createElement("div",{className:`et-vb-sidebar et-vb-sidebar--${e}`,style:{...t,...n}},o().createElement(Pt,{position:e}),o().createElement("div",{className:"et-vb-sidebar-row-wrapper"},i.map(((e,n)=>o().createElement(ln,{key:`sidebar-row-${e}`,id:e,index:n,sidebarWidth:t.width})))))),cn=({position:e})=>{const t="left"===e?"sidebarLeft":"sidebarRight",{setSidebarMinimumWidth:n}=(0,s.useDispatch)("divi/app-ui"),{dimension:i,dimensionMinimum:o,offset:a,rowIds:d}=(0,s.useSelect)((t=>{const n=t("divi/app-ui").getSidebarProps(e);return{...n,dimensionMinimum:t("divi/modal-library").getMaximumModalDimensionMinimum(n.activeModals)}}));(0,r.useEffect)((()=>{n({sidebarName:t,minimumWidth:o?.width??0})}),[o.width]);const l={dimension:{width:Math.max(o?.width??0,i?.width),height:Math.max(o?.height??0,i?.height)},rowIds:d,offset:a,position:e};return(0,r.createElement)(un,l)},pn=({adminBarHeight:e,builderBarWidth:t,pageBarHeight:n,dockingArea:i})=>{if(!i)return null;return o().createElement("div",{className:"et-vb-sidebar-docking-indicator",style:{top:e+n+3,bottom:3,left:"sidebarLeft"===i?t+3:null,right:"sidebarRight"===i?3:null}})},mn=({appFrameMarginLeft:e,appFrameMarginTop:t,appFrameWidth:n,getWindow:i,is100vwVisualView:r,isAppWindowWidthModified:a,isAppFrameCoversAppArea:d,isDragged:l,position:u,resetWindow:c,setWindow:p,topWindowWidth:m,zoomScale:f})=>{if(r&&!a)return null;if(!r&&d)return null;const h="left"===u,v=(n-n*f)/2,b="left"===u?e+v:null,g="right"===u?m-(e+n)-2+v-8:null;let y;return o().createElement(Lt.Draggable,{key:`app-frame-responsive-drag-handle--${u}`,isTopWindow:!0,className:qe()({"et-vb-app-frame-responsive-drag-wrapper":!0,"et-vb-app-frame-responsive-drag-wrapper--dragged":l,[`et-vb-app-frame-responsive-drag-wrapper--${u}`]:!0}),onElementClick:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameResizeStatus({status:!0,triggeringElement:"app-frame-draggable-handle",position:u})},onElementDrag:e=>{const t=e?.sinceMouseDown?.x??0;y=n+(h?-1*t*2:2*t),p({attr:"width",value:y,windowLocation:"app",setter:"user"})},onElementRelease:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameResizeStatus({status:!1,triggeringElement:!1,position:!1});const e=i("width","app");r&&e<y&&c({attr:"width",windowLocation:"app",setter:"user"})},style:{top:t,left:b,right:g}},o().createElement("div",{className:qe()({"et-vb-app-frame-responsive-drag-handle":!0,[`et-vb-app-frame-responsive-drag-handle--${u}`]:!0})},o().createElement("span",{className:"et-vb-app-frame-responsive-drag-handle-label"},(0,De.__)("Resize window","et_builder"))),o().createElement("span",{className:qe()({"et-vb-app-frame-responsive-drag-width":!0,[`et-vb-app-frame-responsive-drag-width--${u}`]:!0})},o().createElement("span",{className:"et-vb-app-frame-responsive-drag-width-number"},n),o().createElement("span",{className:"et-vb-app-frame-responsive-drag-width-unit"},"px")))},fn=({position:e})=>{const{appAreaWidth:t,appFrameMarginLeft:n,appFrameMarginTop:i,appFrameWidth:r,appWindowWidth:a,getWindow:d,resizePosition:l,is100vwVisualView:u,isAppWindowWidthModified:c,topWindowWidth:p,zoomScale:m}=(0,s.useSelect)((e=>({appAreaWidth:e("divi/app-ui").getElementProperty({elementName:"appArea",propertyGroup:"dimension",propertyName:"width"}),appFrameMarginLeft:e("divi/app-ui").getAppFrameMarginLeft(),appFrameMarginTop:e("divi/app-ui").getAppFrameMarginTop(),appFrameWidth:e("divi/app-ui").getAppFrameWidth(),appWindowWidth:e("divi/app-ui").getWindow("width","app"),getWindow:e("divi/app-ui").getWindow,resizePosition:e("divi/app-ui").getResizePosition({triggeringElement:"app-frame-draggable-handle"}),is100vwVisualView:e("divi/app-ui").is100vwVisualView(),isAppWindowWidthModified:e("divi/app-ui").isUserDefinedWindowProperty({attr:"width",windowLocation:"app"}),topWindowWidth:e("divi/app-ui").getWindow("width","top"),zoomScale:e("divi/app-ui").getAppFrameZoom({format:"decimal"})}))),{resetWindow:f,setWindow:h}=(0,s.useDispatch)("divi/app-ui"),v=r>=t,b=a||r;return o().createElement(mn,{appFrameMarginLeft:parseInt(n),appFrameMarginTop:parseInt(i),appFrameWidth:b,getWindow:d,is100vwVisualView:u,isAppWindowWidthModified:c,isAppFrameCoversAppArea:v,isDragged:!!l&&l===e,position:e,resetWindow:f,setWindow:h,topWindowWidth:p,zoomScale:m})},hn=({styles:e,is100vwVisualView:t})=>t?null:o().createElement("div",{className:"et-vb-app-frame-responsive-maximum-drag-limit",style:e}),vn=()=>{const{is100vwVisualView:e,styles:t}=(0,s.useSelect)((e=>({is100vwVisualView:e("divi/app-ui").is100vwVisualView(),styles:e("divi/app-ui").getAppFrameMaximumDragLimitStyles()})));return o().createElement(hn,{is100vwVisualView:e,styles:t})};var bn=window.divi.appPreferences,gn=window.divi.middleware,yn=window.divi.settings;const wn=({order:e,sidebarPosition:t,modal:n,newSidebarRowId:i})=>({type:"ADD_SIDEBAR_ROW",sidebarPosition:t,order:e,modal:(0,s.select)("divi/modal-library").getModal(n)?n:"",newSidebarRowId:i}),In=({modalName:e,modalType:t,sidebarName:n,newSidebarRowId:i})=>({type:"DOCK_MODAL_TO_SIDEBAR",modalName:e,modalType:t,sidebarName:n,newSidebarRowId:i}),Sn=({modalName:e,modalType:t,newSidebarRowId:n,position:i="inside",sidebarRowId:r})=>({type:"DOCK_MODAL_TO_SIDEBAR_ROW",modalName:e,modalType:t,newSidebarRowId:n,position:i,sidebarRowId:r}),_n=e=>({type:"ON_MODULE_INTERACTION_EVENT",event:e}),En=({sidebarName:e,sidebarRowId:t})=>({type:"REMOVE_SIDEBAR_ROW",sidebarName:e,sidebarRowId:t}),Mn=({modalName:e,overwrittenModalName:t})=>({type:"REPLACE_SIDEBAR_MODAL",modalName:e,overwrittenModalName:t}),Rn=e=>({type:"RESET_STATE",initialState:e}),On=e=>({type:"RESET_WINDOW",params:e}),kn=e=>({type:"SET_APP_FRAME_RESIZE_STATUS",params:e}),An=e=>({type:"SET_APP_FRAME_ZOOM",params:e}),Tn=e=>({type:"SET_ATTRIBUTE_STATE",attributeState:e}),Nn=e=>({type:"SET_DRAGGED_TO_UNPIN_SIDEBAR_MODAL",modalName:e}),Cn=({elementName:e,propertyGroup:t,propertyName:n,value:i})=>({type:"SET_ELEMENT_PROPERTY",elementName:e,propertyGroup:t,propertyName:n,value:i}),Dn=({elementName:e,visibility:t})=>({type:"SET_ELEMENT_VISIBILITY",elementName:e,visibility:t}),Pn=e=>({type:"SET_GLOBAL_PRELOAD",globalPreload:e}),Bn=({sidebarDockingArea:e})=>({type:"SET_HOVERED_SIDEBAR_DOCKING_AREA",sidebarDockingArea:e}),Ln=e=>({type:"SET_INTERACTION_LAYER",params:e}),xn=e=>({...e,type:"SET_MODULE_PERMISSION"}),Wn=e=>({type:"SET_SIDEBAR_MINIMUM_WIDTH",params:e}),jn=({sidebarRowId:e,activeModal:t})=>({type:"SET_SIDEBAR_ROW_ACTIVE_MODAL",sidebarRowId:e,activeModal:t}),Fn=({sidebarRowId:e,height:t})=>({type:"SET_SIDEBAR_ROW_HEIGHT",sidebarRowId:e,height:t}),Vn=({sidebarRowId:e,status:t})=>({type:"SET_SIDEBAR_ROW_RESIZING_STATUS",sidebarRowId:e,status:t}),Hn=e=>({type:"SET_SIDEBAR_HANDLE_CONDITION",condition:e}),Un=e=>({type:"SET_VIEW",view:e}),zn=e=>({type:"SET_WINDOW",params:e}),Gn=(e,t=10,n="")=>({type:"SET_WINDOW_AUTO_SCROLL",direction:e,distance:t,location:n}),$n=e=>({type:"SET_WORKSPACE",params:e}),Zn=e=>({type:"TOGGLE_MODULE_INTERACTION",status:e}),qn=({modalName:e,sidebarRowId:t,intent:n="undocking"})=>({type:"UNDOCK_MODAL_FROM_SIDEBAR_ROW",modalName:e,sidebarRowId:t,intent:n}),Kn=e=>({type:"UPDATE_SIDEBAR_ROW_LIMITS",sidebarRowId:e}),Yn=e=>({...e,type:"ADD_BUILDER_BAR_BUTTON"}),Jn=e=>({type:"UPDATE_VIEWS",params:e}),Xn=(e,t)=>{const n=e?.modalName;if("DOCK_MODAL_TO_SIDEBAR"===e.type){const t="sidebarLeft"===e.sidebarName?"left":"right";(0,s.dispatch)("divi/modal-library").setSidebarPosition({name:n,sidebarPosition:t})}if("DOCK_MODAL_TO_SIDEBAR_ROW"===e.type){const{sidebarRowId:i}=e;(0,a.includes)(t.getState().getIn(["elements","sidebarLeft","props","rowIds"]),i)?(0,s.dispatch)("divi/modal-library").setSidebarPosition({name:n,sidebarPosition:"left"}):(0,a.includes)(t.getState().getIn(["elements","sidebarRight","props","rowIds"]),i)&&(0,s.dispatch)("divi/modal-library").setSidebarPosition({name:n,sidebarPosition:"right"})}"UNDOCK_MODAL_FROM_SIDEBAR_ROW"===e.type&&"undocking"===e.intent&&(0,s.dispatch)("divi/modal-library").setSidebarPosition({name:n,sidebarPosition:!1})};let Qn,ei,ti;const ni={DOCK_MODAL_TO_SIDEBAR_ROW:[Xn],DOCK_MODAL_TO_SIDEBAR:[Xn],SET_WINDOW_AUTO_SCROLL:(e,t)=>{const{direction:n,distance:i,location:r}=e,o="layers"===r?l.topWindow.document.querySelector('.et-vb-modal-panel[data-id="layers"]'):window,a="layers"===r?"scrollTop":null,s="top"===n||"bottom"===n;(n!==Qn||i!==ei)&&(clearInterval(ti),s&&(ti=setInterval((()=>{const e=a in o?o?.[a]:window.scrollY,r="top"===n?e-i:e+i,s="desktop"===t.getState()?.breakpoint?window:l.topWindow;(o??s).scrollTo({top:r,left:s.pageXOffset,behavior:"smooth"})}),100)),Qn=n,ei=i)},SET_WORKSPACE:[e=>{const t=e?.params?.workspace?.activeFloatingModals;t&&(0,a.forEach)(t,(t=>{(0,s.dispatch)("divi/modal-library").open({name:t?.name,workspaceSettings:{origin:{appFramePseudoWrapper:e?.params?.workspace?.appFramePseudoWrapper,modal:{width:t?.dimension?.width,height:t?.dimension?.height,offsetLeft:t?.offset?.left,offsetTop:t?.offset?.top,minimumWidth:t?.dimensionMinimum?.width}},target:{appFramePseudoWrapper:(0,s.select)("divi/app-ui").getAppFramePseudoWrapperBoxModel(),topWindow:{width:(0,s.select)("divi/app-ui").getWindow("width","top"),height:(0,s.select)("divi/app-ui").getWindow("height","top")}}}})}))}],UNDOCK_MODAL_FROM_SIDEBAR_ROW:[Xn]};function ii(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var ri=e=>Array.isArray(e)?e:[e];function oi(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function ai(e,t){const n=[],{length:i}=e;for(let r=0;r<i;r++)n.push(e[r].apply(null,t));return n}Symbol(),Object.getPrototypeOf({});var si="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function di(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:i}=t;let r,o=0;function a(){let t=n;const{length:a}=arguments;for(let e=0,n=a;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const i=e.get(n);void 0===i?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=i}else{let e=t.p;null===e&&(t.p=e=new Map);const i=e.get(n);void 0===i?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=i}}const s=t;let d;if(1===t.s?d=t.v:(d=e.apply(null,arguments),o++),s.s=1,i){const e=r?.deref?.()??r;null!=e&&i(e,d)&&(d=e,0!==o&&o--);r="object"==typeof d&&null!==d||"function"==typeof d?new si(d):d}return s.v=d,d}return a.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>o,a.resetResultsCount=()=>{o=0},a}function li(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,i=(...e)=>{let t,i=0,r=0,o={},a=e.pop();"object"==typeof a&&(o=a,a=e.pop()),ii(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const s={...n,...o},{memoize:d,memoizeOptions:l=[],argsMemoize:u=di,argsMemoizeOptions:c=[],devModeChecks:p={}}=s,m=ri(l),f=ri(c),h=oi(e),v=d((function(){return i++,a.apply(null,arguments)}),...m);const b=u((function(){r++;const e=ai(h,arguments);return t=v.apply(null,e),t}),...f);return Object.assign(b,{resultFunc:a,memoizedResultFunc:v,dependencies:h,dependencyRecomputations:()=>r,resetDependencyRecomputations:()=>{r=0},lastResult:()=>t,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:d,argsMemoize:u})};return Object.assign(i,{withTypes:()=>i}),i}var ui=li(di),ci=Object.assign(((e,t=ui)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,i)=>(e[n[i]]=t,e)),{})))}),{withTypes:()=>ci});const pi=ui([e=>e.getIn(["sidebarRows"]),(e,t)=>t],((e,t)=>e.getIn([t]))),mi={REMOVE_SIDEBAR_ROW:[e=>t=>n=>{const i=n?.sidebarRowId,r=pi(e.getState(),i);if(r){const e=r?.activeModal;if("divi/module"===e){const e=(0,s.select)("divi/modal-library").getModal("divi/module")?.owner,t=(0,s.select)("divi/edit-post").getGlobalLayoutId(e);if(t&&(0,s.select)("divi/global-layouts").hasSyncWorthyChanges())return(0,s.dispatch)("divi/global-layouts").openConfirmationPopup({id:t}),null}}return t(n)}]},fi=e=>"singleInstanceModal"!==e,hi=(e,t)=>{const n=e.getIn(["elements",t.sidebarName,"props","rowIds"])?.asMutable()??[];if(!n.includes(t.sidebarRowId))return e;const i=n.filter((e=>e!==t.sidebarRowId)),r=e.getIn(["elements",t.sidebarName,"visible"]),o=i?.length>0&&r;return e.setIn(["elements",t.sidebarName,"props","rowIds"],i).setIn(["elements",t.sidebarName,"visible"],o).setIn(["sidebarRows"],e.getIn(["sidebarRows"]).without(t.sidebarRowId))};var vi=n(33042),bi=n.n(vi);const gi={width:0,height:0},yi=ui([e=>e?.getIn(["elements"]),e=>e?.getIn(["window","width","top","value"]),e=>e?.getIn(["window","height","top","value"])],((e,t,n)=>{const i={visible:e.adminBar.visible,dimension:e.adminBar.visible?{width:t,height:e.adminBar.dimension.height}:gi,offset:{top:e.adminBar.offset.top,left:e.adminBar.offset.left}},r={visible:e.diviTopMenu.visible,dimension:e.diviTopMenu.visible?{width:t,height:e.diviTopMenu.dimension.height}:gi,offset:{top:e.diviTopMenu.offset.top,left:e.diviTopMenu.offset.left}},o={visible:e.brandedModalHeader.visible,dimension:e.brandedModalHeader.visible?{width:t,height:e.brandedModalHeader.dimension.height}:gi,offset:{top:i.dimension.height,left:e.brandedModalHeader.offset.left}},a={visible:e.pageBar.visible,dimension:e.pageBar.visible?{width:t,height:e.pageBar.dimension.height}:gi,offset:{top:i.dimension.height+o.dimension.height,left:e.pageBar.offset.left}},s=i.dimension.height+o.dimension.height+a.dimension.height,d={visible:e.builderBar.visible,dimension:e.builderBar.visible?{width:e.builderBar.dimension.width,height:n-s}:gi,offset:{top:i.dimension.height+a.dimension.height,left:e.builderBar.offset.left}},l="number"==typeof e.sidebarLeft.props?.minimumWidth?e.sidebarLeft.props?.minimumWidth:0,u={visible:e.sidebarLeft.visible,dimension:e.sidebarLeft.visible?{width:Math.max(l,e.sidebarLeft.dimension.width),height:n-s}:gi,offset:{top:s,left:d.dimension.width}},c="number"==typeof e.sidebarRight.props?.minimumWidth?e.sidebarRight.props?.minimumWidth:0,p={visible:e.sidebarRight.visible,dimension:e.sidebarRight.visible?{width:Math.max(c,e.sidebarRight.dimension.width),height:n-s}:gi,offset:{top:s,right:e?.sidebarRight?.offset?.right??0}};return{adminBar:i,appArea:{visible:e.appArea.visible,dimension:e.appArea.visible?{width:t-(d.dimension.width+u.dimension.width+p.dimension.width),height:n-s}:gi},appFrame:{visible:e.appFrame.visible,dimension:e.appFrame.visible?{width:t-(d.dimension.width+u.dimension.width+p.dimension.width),height:n-s}:gi,props:e.appFrame.props},brandedModalHeader:o,builderBar:d,diviTopMenu:r,pageBar:a,sidebarLeft:u,sidebarRight:p}})),wi=ui([e=>yi(e),(e,t)=>t],((e,t)=>{const{elementName:n,propertyGroup:i,propertyName:r}=t,o=e?.[n],a=o?.[i],s=a?.[r];return s})),Ii=ui([e=>e.getIn(["window"]),(e,t)=>t,(e,t,n)=>n,(e,t,n,i)=>i],((e,t,n,i)=>e.getIn([t,n,"value"],i))),Si=ui([e=>wi(e,{elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),e=>wi(e,{elementName:"builderBar",propertyGroup:"dimension",propertyName:"width"}),e=>wi(e,{elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),e=>wi(e,{elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),e=>wi(e,{elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"}),e=>Ii(e,"width","top"),e=>Ii(e,"height","top")],((e,t,n,i,r,o,a)=>{const s=e+t,d=i+r;return{marginTop:d,marginRight:n,marginLeft:s,width:o-(s+n),height:a-d}})),_i=ui([e=>e.getIn(["sidebarRows"]),e=>e.getIn(["elements","sidebarLeft","props","rowIds"]),e=>e.getIn(["elements","sidebarRight","props","rowIds"])],((e,t,n)=>{const i=[].concat(t,n),r=e?.asMutable({deep:!0})??{},o=Object.keys(r).filter((e=>i.includes(e))).reduce(((e,t)=>(e[t]=r[t],e)),{});return Object.values(o).map((e=>e.modalIds)).flat()})),Ei=({modalId:e,sidebar:t,sidebarRowId:n,sidebarRowModalIds:i})=>{let r=t;const o=t.props.rowIds.filter((e=>e!==n)),a=t.getIn(["props","activeModals"]).asMutable();if(a.includes(e)){const t=i.filter((t=>t!==e))?.[0];r=t?r.setIn(["props","activeModals"],a.map((n=>n===e?t:n))):r.setIn(["props","activeModals"],a.filter((t=>t!==e)))}return 0!==i.length&&0!==o.length||(r=r.setIn(["props","rowIds"],o)),o.length<1&&(r=r.setIn(["visible"],!1).setIn(["props","activeModals"],[])),r},Mi=({sidebar:e,modalId:t,modalNameAlias:n})=>{const i=e.getIn(["props","activeModals"]).map((e=>e===t?n:e));return e.setIn(["props","activeModals"],i)},Ri=e=>!("canBeSavedOnWorkspace"in e)||("string"==typeof e.canBeSavedOnWorkspace||e.canBeSavedOnWorkspace),Oi=(e,t)=>{const n=e.getIn(["elements"]),i=t?.activeModals;let r=e.getIn(["sidebarRows"]),o=e.getIn(["elements","sidebarLeft"]),s=e.getIn(["elements","sidebarRight"]);const d=_i(e),l=(0,a.reduce)(i,((t,n,i)=>{const r=d.includes(i),o=Ri(n);if(!r&&o){const r="string"==typeof n.canBeSavedOnWorkspace?n.canBeSavedOnWorkspace:i;let a=o;i!==r&&(a=e.getIn([r,"canBeSavedOnWorkspace"],!0)),t=t.setIn([r],{...n,name:r,canBeSavedOnWorkspace:a})}return t}),bi()({})),u={};[o,s].forEach((e=>{e.props?.rowIds?.forEach((t=>{u[t]=e===o?"sidebarLeft":"sidebarRight"}))}));const c={};return(0,a.forEach)(r,((e,t)=>{(0,a.forEach)(e?.modalIds,(n=>{const a=i[n];if(a){const i=Ri(a),d=u[t],l=r.getIn([t,"modalIds"]).asMutable().filter((e=>e!==n));if("string"==typeof a.canBeSavedOnWorkspace){const i=a.canBeSavedOnWorkspace,u=e.modalIds.indexOf(n);r=r.setIn([t,"modalIds",u],i),a.name===r.getIn([t,"activeModal"])&&(r=r.setIn([t,"activeModal"],i)),c?.[i]?("sidebarLeft"===d&&(o=Ei({sidebar:o,sidebarRowId:t,modalId:n,sidebarRowModalIds:l})),"sidebarRight"===d&&(s=Ei({sidebar:s,sidebarRowId:t,modalId:n,sidebarRowModalIds:l})),r=r.without(t)):(c[i]=n,"sidebarLeft"===d&&(o=Mi({sidebar:o,modalId:n,modalNameAlias:i})),"sidebarRight"===d&&(s=Mi({sidebar:s,modalId:n,modalNameAlias:i})))}else if(!i){if(0===l.length)r=r.without(t);else if(r=r.setIn([t,"modalIds"],l),n===e.activeModal){const e=l?.[0];r=r.setIn([t,"activeModal"],e)}"sidebarLeft"===d&&(o=Ei({sidebar:o,sidebarRowId:t,modalId:n,sidebarRowModalIds:l})),"sidebarRight"===d&&(s=Ei({sidebar:s,sidebarRowId:t,modalId:n,sidebarRowModalIds:l}))}}}))})),{view:e.getIn(["view"]),breakpoint:e.getIn(["breakpoint"]),attributeState:e.getIn(["attributeState"]),interactionLayers:e.getIn(["interactionLayers"]),activeFloatingModals:l,sidebarRows:r?.asMutable({deep:!0}),window:{top:{width:Ii(e,"width","top"),height:Ii(e,"height","top")},app:{width:Ii(e,"width","app"),height:Ii(e,"height","app")}},appFramePseudoWrapper:Si(e),elements:{...n,sidebarLeft:o?.asMutable({deep:!0}),sidebarRight:s?.asMutable({deep:!0})}}},ki=ui([e=>e.getIn(["elements","appFrame"]),(e,t)=>t],((e,t)=>{const n=e.getIn(["props","zoom","value"],100);return"decimal"===(t.format??"percentage")?n/100:n})),Ai=ui([e=>e],(e=>e.getIn(["view"],"desktop"))),Ti=ui([e=>"wireframe"===Ai(e),e=>{const t=Ai(e);return"100vw"===e.getIn(["views",t,"width"])}],((e,t)=>!e&&t)),Ni=ui([(e,t)=>e.getIn(["window",t.attr,t.windowLocation,"setter"])],(e=>"user"===e)),Ci=ui([e=>Ii(e,"width","top"),e=>Ii(e,"width","app"),e=>wi(e,{elementName:"builderBar",propertyGroup:"dimension",propertyName:"width"}),e=>wi(e,{elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),e=>wi(e,{elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),e=>ki(e,{format:"decimal"}),e=>Ni(e,{attr:"width",windowLocation:"app"}),e=>Ti(e),e=>"wireframe"===Ai(e)],((e,t,n,i,r,o,a,s,d)=>{if((s||d)&&!a&&!(1!==o))return`${n+i}px`;return`${n+i+(0,ot.getAppFrameMarginSides)({builderBarWidth:n,appWindowWidth:t,sidebarLeftWidth:i,sidebarRightWidth:r,topWindowWidth:e,is100vwVisualView:s,isUserDefinedAppWindowWidth:a,zoomScale:o})}px`})),Di=ui([e=>wi(e,{elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),e=>wi(e,{elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"})],((e,t)=>`${e+t}px`)),Pi=(e,t)=>e.getIn(["views",t],{width:"",height:"",label:"",icon:"",breakpoint:"desktop",maximum:{width:1400},minimum:{width:981},type:"visual",enable:!0}),Bi=ui([e=>wi(e,{elementName:"builderBar",propertyGroup:"dimension",propertyName:"width"}),e=>wi(e,{elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),e=>wi(e,{elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),e=>Ii(e,"width","top"),e=>{const t=Ai(e);return Pi(e,t)?.maximum?.width??Ii(e,"width","app")},e=>ki(e,{format:"decimal"}),e=>Ni(e,{attr:"width",windowLocation:"app"}),e=>Ti(e)],((e,t,n,i,r,o,a,s)=>{const d=r*o;return{width:d,left:e+t+(0,ot.getAppFrameMarginSides)({builderBarWidth:e,appWindowWidth:d,sidebarLeftWidth:t,sidebarRightWidth:n,topWindowWidth:i,is100vwVisualView:s,isUserDefinedAppWindowWidth:a,zoomScale:o})}})),Li=ui([e=>wi(e,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"}),e=>wi(e,{elementName:"appFrame",propertyGroup:"dimension",propertyName:"width"}),e=>Ii(e,"width","app"),(e,t)=>t?.format??"percentage",e=>Ni(e,{attr:"width",windowLocation:"app"}),(e,t)=>Pi(e,t?.view)?.minimum?.width??0,(e,t)=>t?.roundingUpPercentage??!1],((e,t,n,i,r,o,a)=>{const s=r?n>e?e/n:1:t<o?t/o:1;return"decimal"===i?s:a?Math.floor(100*s):100*s})),xi=ui([e=>ki(e,{format:"percentage"}),e=>wi(e,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"})],((e,t)=>t*(100/e))),Wi=ui([e=>{if("user"===e.getIn(["window","width","app","setter"]))return`${Ii(e,"width","app")}px`;const t=Ai(e),n=Pi(e,t);return n?.width?n.width:"100vw"},e=>Ii(e,"width","top"),e=>Ni(e,{attr:"width",windowLocation:"app"}),e=>ki(e,{format:"decimal"}),e=>wi(e,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"}),e=>{const t=Ai(e),n=Pi(e,t)?.minimum?.width;return n}],((e,t,n,i,r,o)=>{if("100vw"===e)return o>=r?o:n?r:r*(1/i);const a=(0,ot.parseAppFrameWidthValue)(e,t);return n?a:a>=r?r>=o?r:o:a})),ji=ui([(e,t)=>{const n=Pi(e,t?.view)?.width??"100vw",i=Ii(e,"width","top"),r=Wi(e),o=wi(e,{elementName:"builderBar",propertyGroup:"dimension",propertyName:"width"}),a=wi(e,{elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),s=wi(e,{elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),d=i?r:(({appWindowWidth:e,builderBarWidth:t,sidebarLeftWidth:n,sidebarRightWidth:i})=>"100vw"===e?`calc(${e} - ${t}px - ${n}px - ${i}px)`:e)({appWindowWidth:n,builderBarWidth:o,sidebarLeftWidth:a,sidebarRightWidth:s});return d},(e,t)=>{const n=wi(e,{elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),i=wi(e,{elementName:"brandedModalHeader",propertyGroup:"dimension",propertyName:"height"}),r=Pi(e,t?.view),o=wi(e,{elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"}),a=ki(e,{format:"decimal"}),s=(({adminBarHeight:e,appWindowHeight:t,brandedModalHeaderHeight:n,pageBarHeight:i,zoomScale:r})=>{const o=1/r;return`calc((${t} * ${o}) - ${(e+n+i)*o}px)`})({adminBarHeight:n,brandedModalHeaderHeight:i,appWindowHeight:r?.height??"100vh",pageBarHeight:o,zoomScale:a});return s},e=>Di(e),e=>Ci(e),e=>ki(e,{format:"decimal"})],((e,t,n,i,r)=>({width:e,height:t,marginTop:n,marginLeft:i,maxWidth:1!==r?e:null,transform:`translate(0px, 0px) scale(${r})`,transformOrigin:"top center"}))),Fi=ui([e=>e],(e=>e.getIn(["attributeState"],"value"))),Vi=ui([e=>e],(e=>e.getIn(["breakpoint"],"desktop"))),Hi=(e,t)=>{let n=0;const i=["sidebarLeft","sidebarRight"].find((n=>e.elements[n].props?.rowIds?.includes(t))),r=e.getIn(["sidebarRows",t,"dimension","height"]);if(r)n=r;else{const r=(e.getIn(["window","height","top","value"])??0)-(e.getIn(["elements","adminBar","visible"])?e.getIn(["elements","adminBar","dimension","height"])??0:0)-(e.getIn(["elements","brandedModalHeader","visible"])?e.getIn(["elements","brandedModalHeader","dimension","height"])??0:0)-(e.getIn(["elements","pageBar","dimension","height"])??0),o=e.getIn(["elements",i,"props","rowIds"]);let s=0,d=0;if(o?.length>1){const n=[];o.forEach((i=>{const r=e.getIn(["sidebarRows",i,"dimension","height"]);t!==i&&r&&n.push(r),r||d++})),s=(0,a.sum)(n)}n=d?(r-s)/d:r-s}return n},Ui=(e,t)=>{const n={top:0,left:0},i=["sidebarLeft","sidebarRight"].find((n=>e?.elements?.[n]?.props?.rowIds?.includes(t))),{adminBar:r,sidebarRight:o,pageBar:a}=yi(e);n.left="sidebarLeft"===i?0:e?.window?.width?.top?.value-o?.dimension?.width,n.top=r?.dimension?.height+a?.dimension?.height;const s=e?.elements?.[i]?.props?.rowIds?.asMutable()??[],d=s.indexOf(t),l=-1!==d?s.slice(0,d):s;return l.length>0&&l.forEach((t=>{const i=Hi(e,t);n.top+=i})),n},zi=(e,t={type:"multiInstanceModal",width:400})=>{const n=[],i=t?.width??400,r="singleInstanceModal"===t?.type;return["sidebarLeft","sidebarRight"].forEach((t=>{const o="sidebarRight"===t,a=e?.elements?.[t]?.dimension?.width;if(e?.elements?.[t]?.visible){const{builderBar:s}=e?.elements;e?.elements?.[t]?.props?.rowIds?.forEach((d=>{const l=Ui(e,d),u=Hi(e,d),c=e?.elements?.[t]?.props?.rowIds?.indexOf(d),p=c===e?.elements?.[t]?.props?.rowIds?.length-1,m=!r&&(e?.sidebarRows?.[d]?.multiModal??!0),f={id:d,type:"sidebar-row",top:l.top-4,left:o?l.left-a:l.left,width:o?a+i:a+s?.dimension?.width,height:m?8:p?u/2:u-4},h={id:d,type:"sidebar-modal",top:l.top+4,left:o?l.left-i:l.left,width:o?a+i:a+s?.dimension?.width,height:p?u-8:u-4};if(m?n.push(f,h):n.push(f),p){const e={id:d,type:"sidebar-row-last",top:m?l.top+u-8:l.top+u-u/2,left:o?l.left-i:l.left,width:o?a+i:a+s?.dimension?.width,height:m?8:u/2};n.push(e)}}))}else{const{adminBar:r,builderBar:a,pageBar:s}=e?.elements;n.push({id:t,type:"sidebar",top:r?.dimension?.height+s?.dimension?.height,left:o?e?.window?.width?.top?.value-i:0,width:o?i:a?.dimension?.width,height:e?.window?.height?.top?.value-(r?.dimension?.height+s?.dimension?.height)})}})),n},Gi=e=>e.getIn(["sidebarModalDraggedToUndock"]),$i=e=>0<e.getIn(["globalPreload"]),Zi=(e,t,n)=>(n??zi(e)).find((e=>{const{left:n,top:i,width:r,height:o}=e,a=n+r,s=i+o,d=t.left>=n&&t.left<=a,l=t.top>=i&&t.top<=s;return d&&l}))??!1,qi=e=>{const t=e?.sidebarHoveredDockArea;return!!t&&("sidebar"===t?.type&&t?.id)},Ki=(e,t)=>{const n=e?.sidebarHoveredDockArea;return!(!n||"object"!=typeof n)&&(n?.id===t&&("sidebar"!==n?.type&&n?.type))},Yi=e=>{const t=e.getIn(["views"])?.asMutable({deep:!0}),n=Object.values(t).filter((e=>e.enable&&"visual"===e.type)).sort(((e,t)=>e.minimum.width-t.minimum.width));return n[n.length-1]},Ji=e=>e.getIn(["moduleInteraction","event"]),Xi=ui([e=>e],(e=>e.getIn(["moduleInteraction","status"]))),Qi=e=>e.getIn(["modulesPermissions"]),er=ui([e=>e.getIn(["elements","appFrame","props","resize","status"]),(e,t)=>e.getIn(["elements","appFrame","props","resize","triggeringElement"])===t.triggeringElement,e=>e.getIn(["elements","appFrame","props","resize","position"])],((e,t,n)=>!(!e||!t)&&n)),tr=ui([(e,t)=>{const n="left"===t?"sidebarLeft":"sidebarRight";return yi(e)?.[n]},(e,t)=>{const n="left"===t?"sidebarLeft":"sidebarRight";return e.getIn(["elements",n,"props","rowIds"])},(e,t)=>{const n="left"===t?"sidebarLeft":"sidebarRight";return e.getIn(["elements",n,"props","minimumWidth"])},e=>e.getIn(["sidebarRows"])],((e,t,n,i)=>{const r=t?.map((e=>i.getIn([e,"activeModal"])));return{activeModals:r,dimension:e?.dimension??{},minimumWidth:n,offset:e?.offset??{},rowIds:t}})),nr=(e,t)=>{const n=tr(e,t)?.rowIds??[],i=n?.[n?.length-1];return i},ir=ui([(e,t)=>wi(e,{elementName:"left"===t?"sidebarLeft":"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),e=>wi(e,{elementName:"appFrame",propertyGroup:"props",propertyName:"minimumWidth"}),e=>wi(e,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"})],((e,t,n)=>n+e-t)),rr=ui([e=>e.getIn(["sidebarRows"]),e=>e.getIn(["elements"]),(e,t)=>t,(e,t)=>{const n=e.getIn(["sidebarRows"]);return Object.keys(n).find((e=>(n?.[e]?.modalIds??[]).includes(t)))},(e,t)=>{const n=e.getIn(["sidebarRows"]),i=Object.keys(n).find((e=>(n?.[e]?.modalIds??[]).includes(t)));return Hi(e,i)},(e,t,n)=>n,(e,t,n,i)=>"number"==typeof i?i:0],((e,t,n,i,r,o="multiInstanceModal",a=0)=>{const s={};if(!i)return s;const d=["sidebarLeft","sidebarRight"].find((e=>t[e].props?.rowIds?.includes(i))),l="multiInstanceModal"===o?40:0;if(s.height=r-l,d){const e=t.getIn([d,"dimension","width"]),n=Math.max(a,e);n&&(s.width="sidebarLeft"===d?n-1:n)}return s})),or=(e,t)=>{const n=Object.keys(e.sidebarRows).find((n=>(e?.sidebarRows?.[n]?.modalIds??[]).includes(t))),i=["sidebarLeft","sidebarRight"].find((t=>e?.elements?.[t]?.props?.rowIds?.includes(n)));return{sidebarRowId:n,sidebarName:i,active:e?.sidebarRows?.[n]?.activeModal===t}},ar=e=>e.getIn(["sidebarHandleCondition"],"enable"),sr=(e,t,n)=>({max:e.getIn(["sidebarRows",t,"maximum",n]),min:e.getIn(["sidebarRows",t,"minimum",n])}),dr=(e,t)=>{const n=e?.sidebarRows??{},i=(0,a.pick)(n,t);return(0,a.mapValues)(i,(e=>e?.dimension?.height??null))},lr=(e,t)=>["sidebarLeft","sidebarRight"].find((n=>e?.elements?.[n]?.props?.rowIds?.includes(t))),ur=e=>{const t=e.getIn(["views"])?.asMutable({deep:!0});return Object.values(t).filter((e=>e.enable&&"visual"===e.type)).sort(((e,t)=>e.minimum.width-t.minimum.width))[0]},cr=e=>e.getIn(["views"]),pr=e=>e.getIn(["windowAutoScroll"]),mr=(e,t)=>{const n=e.getIn(["interactionLayers"]).asMutable(),i=Object.keys((0,a.pickBy)(n,Boolean));return(0,a.includes)(i,e.getIn(["interactionLayersMap"]).getIn(t))},fr=(e,t,n)=>{const i=e.getIn(["modulesPermissions"]);return!!(0,a.get)(i,[t,n])},hr=ui([(e,t)=>e.getIn(["elements",t])],(e=>e?.visible??!0)),vr=(e,t)=>e.getIn(["interactionLayers",t]),br=ui([e=>_i(e),(e,t)=>t],((e,t)=>(e??[]).includes(t))),gr=(e,t)=>{const n=Ai(e);return Pi(e,n)?.breakpoint===t},yr=[],wr=e=>{const t=e?.builderBarButtons;return t?Array.from(t):yr},Ir=(e,t)=>{if(e.getIn(["window",t.params.attr,t.params.windowLocation,"setter"])!==t?.params?.setter)return e;let n=e.getIn(["window",t.params.attr,t.params.windowLocation,"value"]);const i=Ai(e),r=Pi(e,i);if("width"===t.params.attr)"app"===t.params.windowLocation&&(n=(0,ot.parseAppFrameWidthValue)(r.width,Ii(e,"width","top")));return e.setIn(["window",t.params.attr,t.params.windowLocation,"value"],n).setIn(["window",t.params.attr,t.params.windowLocation,"setter"],"visualBuilder")},Sr=(e,t)=>{const n=ur(e);if((n?.maximum?.width??e.getIn(["views","phone","maximum","width"]))>=t)return n?.breakpoint??"phone";const i=(e=>{const t=e.getIn(["views"])?.asMutable({deep:!0}),n={};return(0,a.forEach)(t,(t=>{if("visual"!==t.type)return;if(!t.enable)return;const i={name:t.breakpoint,maximum:{width:e.getIn(["views",t.breakpoint,"maximum","width"])},minimum:{width:e.getIn(["views",t.breakpoint,"minimum","width"])}};n[t.breakpoint]=i})),n})(e),r=(0,a.find)(i,(e=>{const n=e.minimum.width<=t,i=t<=e.maximum.width;return n&&i})),o=Yi(e);return r?.name??o?.breakpoint??"desktop"},_r=(e,t)=>{let n=e;const{attributeState:i,breakpoint:r,elements:o,interactionLayers:s,sidebarRows:d}=t?.params?.workspace,l=t?.params?.breakpointsNames??It.defaultBreakpointNames,u=e.getIn(["attributeState"]);if(i&&i!==u){const e=ht(i,It.states,u);n=n.setIn(["attributeState"],e)}const c=e.getIn(["breakpoint"]);if(r&&r!==c){const e=ht(i,l,c);n=n.setIn(["breakpoint"],e)}if(o&&(n=n.setIn(["elements","sidebarLeft"],{visible:o?.sidebarLeft?.visible??n?.elements?.sidebarLeft?.visible,dimension:{...n?.elements?.sidebarLeft?.dimension,...o?.sidebarLeft?.dimension},props:{...n?.elements?.sidebarLeft?.props,...o?.sidebarLeft?.props}}),n=n.setIn(["elements","sidebarRight"],{visible:o?.sidebarRight?.visible??n?.elements?.sidebarRight?.visible,dimension:{...n?.elements?.sidebarRight?.dimension,...o?.sidebarRight?.dimension},offset:{...n?.elements?.sidebarRight?.offset,...o?.sidebarRight?.offset},props:{...n?.elements?.sidebarRight?.props,...o?.sidebarRight?.props}})),s&&(n=n.setIn(["interactionLayers"],{...n?.interactionLayers,...s})),d){const e=(e=>{const t={};return Object.keys(e).forEach((n=>{const i=e[n];"string"==typeof i.id&&Array.isArray(i.modalIds)&&i.modalIds.every((e=>"string"==typeof e))&&"string"==typeof i.activeModal&&"boolean"==typeof i.multiModal&&(t[n]={id:i.id,modalIds:i.modalIds,activeModal:i.activeModal,multiModal:i.multiModal})})),t})(d);(0,a.isObject)(e)&&(n=n.setIn(["sidebarRows"],e))}return n},Er="desktop",Mr={add:!0,delete:!0},Rr="visualBuilder",Or={visible:!1,dimension:{width:200},props:{activeModals:[],rowIds:[],minimumWidth:0}},kr={visible:!0,dimension:{width:280},offset:{right:0},props:{activeModals:[],rowIds:["row-1"],minimumWidth:0}},Ar={"row-1":{id:"row-1",modalIds:["divi/page-settings"],activeModal:"divi/page-settings",multiModal:!1}},Tr=bi()({attributeState:"value",breakpoint:Er,view:Er,windowAutoScroll:{direction:!1,speed:10,distance:10,location:""},interactionLayers:{basic:!0,parentHighlightOnHover:!1,addModuleOnHover:!0,parentAddModuleOnHover:!0,actionOnHover:!0,parentActionOnHover:!0,xRay:!1},interactionLayersMap:{module:{addModuleButtonOnHover:"addModuleOnHover",optionsOnHover:"actionOnHover",highlightOnHover:"basic",xRayHighlight:"xRay"},parent:{addModuleButtonOnHover:"parentAddModuleOnHover",optionsOnHover:"parentActionOnHover",highlightOnHover:"parentHighlightOnHover",xRayHighlight:"xRay"}},views:{wireframe:{width:"100vw",height:"100vh",breakpoint:"desktop",enable:!0,maximum:{width:2818},minimum:{width:300},type:"wireframe"},ultraWide:{width:"1640px",height:"100vh",breakpoint:"ultraWide",enable:!1,maximum:{width:1840},minimum:{width:1440},type:"visual"},widescreen:{width:"1360px",height:"100vh",breakpoint:"widescreen",enable:!1,maximum:{width:1439},minimum:{width:1280},type:"visual"},desktop:{width:"100vw",height:"100vh",breakpoint:"desktop",enable:!0,maximum:{width:2818},minimum:{width:1024},type:"visual"},tabletWide:{width:"1002px",height:"100vh",breakpoint:"tabletWide",enable:!1,maximum:{width:1024},minimum:{width:980},type:"visual"},tablet:{width:"920px",height:"100vh",breakpoint:"tablet",enable:!0,maximum:{width:980},minimum:{width:860},type:"visual"},phoneWide:{width:"814px",height:"100vh",breakpoint:"phoneWide",enable:!1,maximum:{width:860},minimum:{width:767},type:"visual"},phone:{width:"384px",height:"100vh",breakpoint:"phone",enable:!0,maximum:{width:767},minimum:{width:0},type:"visual"}},window:{width:{top:{setter:Rr,value:0},app:{setter:Rr,value:0}},height:{top:{setter:Rr,value:0},app:{setter:Rr,value:0}},pageXOffset:{top:{setter:Rr,value:0},app:{setter:Rr,value:0}},pageYOffset:{top:{setter:Rr,value:0},app:{setter:Rr,value:0}},documentWidth:{top:{setter:Rr,value:0},app:{setter:Rr,value:0}},documentHeight:{top:{setter:Rr,value:0},app:{setter:Rr,value:0}}},elements:{adminBar:{visible:!0,dimension:{height:32},offset:{top:0,left:0}},brandedModalHeader:{visible:!1,dimension:{height:32},offset:{left:0}},diviTopMenu:{visible:!0,dimension:{height:0},offset:{left:0}},pageBar:{visible:!0,dimension:{height:48},offset:{left:0}},builderBar:{visible:!0,dimension:{width:48},offset:{left:0}},builderBarButtons:[],sidebarLeft:Or,appArea:{visible:!0},appFrame:{visible:!0,dimension:{width:0,height:0},props:{minimumWidth:300,zoom:{value:100,setter:Rr},resize:{status:!1,triggeringElement:!1,position:!1}}},sidebarRight:kr},globalPreload:0,sidebarRows:Ar,sidebarHoveredDockArea:!1,sidebarHandleCondition:"enable",sidebarModalDraggedToUndock:!1,moduleInteraction:{status:"on",event:null},modulesPermissions:{root:Mr,section:Mr,"fullwidth-section":Mr,"specialty-section":Mr,row:Mr,"row-inner":Mr,column:Mr,"specialty-column":Mr,"column-inner":Mr,group:Mr,module:Mr,"fullwidth-module":Mr,"child-module":Mr,unsupported:Mr,layout:Mr}}),Nr=(e,t)=>{const n=(0,rt.applyFilters)("divi.appUi.validAttributeStates",["value","hover","sticky"]);switch(t.type){case"DOCK_MODAL_TO_SIDEBAR":return((e,t)=>{const{modalName:n,modalType:i,sidebarName:r}=t;if(!["sidebarLeft","sidebarRight"].includes(r))return e;const o=fi(i),a=t?.newSidebarRowId??$t(),s={id:a,modalIds:[n],activeModal:n,multiModal:o};return e.setIn(["elements",r,"visible"],!0).setIn(["elements",r,"props","rowIds"],[a]).setIn(["sidebarRows",a],s)})(e,t);case"DOCK_MODAL_TO_SIDEBAR_ROW":return((e,t)=>{const{modalName:n,modalType:i,sidebarRowId:r,position:o}=t;if(!e?.getIn(["sidebarRows",r]))return e;const a=fi(i),s=["sidebarLeft","sidebarRight"].find((t=>e?.elements?.[t]?.props?.rowIds?.includes(r))),d=e.getIn(["elements",s,"props","rowIds"])?.asMutable()??[],l=d.indexOf(r);if("above"===o){const i=t?.newSidebarRowId??$t(),r={id:i,modalIds:[n],activeModal:n,multiModal:a};return d.splice(l,0,i),e.setIn(["elements",s,"props","rowIds"],d).setIn(["sidebarRows",i],r)}if("inside"===o){const t=(e?.getIn(["sidebarRows",r,"modalIds"])?.asMutable()??[]).concat(n);return e.setIn(["sidebarRows",r,"modalIds"],t).setIn(["sidebarRows",r,"activeModal"],n)}if("below"===o){const i=t?.newSidebarRowId??$t(),r={id:i,modalIds:[n],activeModal:n,multiModal:a};return d.splice(l+1,0,i),e.setIn(["elements",s,"props","rowIds"],d).setIn(["sidebarRows",i],r)}return e})(e,t);case"ADD_SIDEBAR_ROW":return((e,t)=>{const n=t?.newSidebarRowId??$t(),i={id:n,modalIds:t.modal?[t.modal]:[],activeModal:t.modal},r="left"===t.sidebarPosition?"sidebarLeft":"sidebarRight",o=e.getIn(["elements",r,"props","rowIds"])?.asMutable()??[],a=[...o.slice(0,t.order),n,...o.slice(t.order,o.length)];return e.setIn(["elements",r,"props","rowIds"],a).setIn(["sidebarRows",n],i)})(e,t);case"REMOVE_SIDEBAR_ROW":return hi(e,t);case"REPLACE_SIDEBAR_MODAL":return((e,t)=>{const{modalName:n,overwrittenModalName:i}=t,r=or(e,i);if(r){const t=e.getIn(["sidebarRows",r?.sidebarRowId,"modalIds"])?.indexOf(i),o=i===e.getIn(["sidebarRows",r?.sidebarRowId,"activeModal"]);if(-1<t)return o?e.setIn(["sidebarRows",r?.sidebarRowId,"modalIds",t],n).setIn(["sidebarRows",r?.sidebarRowId,"activeModal"],n):e.setIn(["sidebarRows",r?.sidebarRowId,"modalIds",t],n)}return e})(e,t);case"UNDOCK_MODAL_FROM_SIDEBAR_ROW":return((e,t)=>{const{modalName:n,sidebarRowId:i}=t,r=e?.sidebarRows?.[i]?.modalIds.asMutable()??[],o=r.filter((e=>e!==n)),a=r.indexOf(n),s=e?.sidebarRows?.[i]?.activeModal,d=n===s?o.length?o[a]?o[a]:o[o.length-1]:"":s,l=e.setIn(["sidebarRows",i,"modalIds"],o).setIn(["sidebarRows",i,"activeModal"],d);return o.length>0?l:hi(l,{type:"REMOVE_SIDEBAR_ROW",sidebarName:["sidebarLeft","sidebarRight"].find((t=>e?.elements?.[t]?.props?.rowIds?.includes(i))),sidebarRowId:i})})(e,t);case"RESET_STATE":return t?.initialState?t.initialState:Tr;case"RESET_WINDOW":return Ir(e,t);case"SET_APP_FRAME_RESIZE_STATUS":return e.setIn(["elements","appFrame","props","resize","status"],t.params.status).setIn(["elements","appFrame","props","resize","triggeringElement"],t.params.triggeringElement);case"SET_ATTRIBUTE_STATE":return(0,a.isArray)(n)&&(0,a.includes)(n,t.attributeState)?e.setIn(["attributeState"],t.attributeState):e;case"SET_INTERACTION_LAYER":return e.setIn(["interactionLayers",t.params.name],t.params.active);case"SET_VIEW":return((e,t)=>{const n=Yi(e)?.breakpoint??"desktop",i=e.getIn(["views",t.view,"breakpoint"],n),r="desktop"===i?e.getIn(["attributeState"]):"value",o=e.setIn(["attributeState"],r).setIn(["view"],t.view).setIn(["breakpoint"],i);return Ii(e,"width","app")?Ir(o,{type:"RESET_WINDOW",params:{attr:"width",windowLocation:"app",setter:"user"}}):o})(e,t);case"SET_WINDOW":return((e,t)=>{const{attr:n,value:i,windowLocation:r,setter:o}=t.params,s=t?.params?.largestVisualViewName??"desktop",d=t.params?.allowBreakpointSwitching??!1;if(i===e.getIn(["window",n,r,"value"]))return e;const l=Ai(e),u=Pi(e,l),c="app"===r,p="width"===n,m="100vw"===e.getIn(["views",l,"width"]),f=Ti(e),h="user"===o,v="visualBuilder"===o,b=u?.minimum?.width,g=u?.maximum?.width,y=wi(e,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"}),w=Object.keys((0,a.pickBy)(e.views,(e=>"100vw"===e?.width)));if(h&&c&&p){if(i>g||i<b){if(i>xi(e))return e;if(d){const t=Sr(e,i);return e.setIn(["view"],t).setIn(["breakpoint"],t).setIn(["window","width","app","value"],i).setIn(["window","width","app","setter"],"user")}return i>=g?e.setIn(["window","width","app","value"],g):i<=b?e.setIn(["window","width","app","value"],b):e}if(!m&&i>=y)return e.setIn(["window","width","app","value"],y)}if(v&&c&&p){if(i<=b){const t=e.setIn(["window",n,r,"value"],b).setIn(["window",n,r,"setter"],o),i=Li(t,{view:l,format:"percentage",roundingUpPercentage:!1});return e.setIn(["window",n,r,"value"],b).setIn(["window",n,r,"setter"],o).setIn(["elements","appFrame","props","zoom","value"],i)}if(i>g){const t=Li(e,{format:"percentage",view:l,roundingUpPercentage:!1}),n=w.includes(l)?i:e.getIn(["views",s,"maximum","width"]),r=e.getIn(["elements","appFrame","props","zoom","value"]),o=e.getIn(["elements","appFrame","props","zoom","setter"]),d=e.getIn(["views",l,"minimum","width"]),u="user"===o&&i>=d?r:t;let c=e.setIn(["elements","appFrame","props","zoom","value"],u).setIn(["window","width","app","value"],n);return(0,a.forEach)(w,(e=>{c=c.setIn(["views",e,"maximum","width"],n)})),c}if(!m&&i>=y)return e.setIn(["window","width","app","value"],y)}const I=e.setIn(["window",n,r,"value"],i).setIn(["window",n,r,"setter"],o),S=c&&p&&f?xi(I):e.getIn(["views",s,"maximum","width"]),_=Li(I,{format:"percentage",view:l,roundingUpPercentage:!1}),E="user"===e.getIn(["elements","appFrame","props","zoom","setter"])?e.getIn(["elements","appFrame","props","zoom","value"]):_;let M=e.setIn(["elements","appFrame","props","zoom","value"],E).setIn(["window",n,r,"value"],i).setIn(["window",n,r,"setter"],o);return(0,a.forEach)(w,(e=>{M=M.setIn(["views",e,"maximum","width"],S)})),M})(e,t);case"SET_WINDOW_AUTO_SCROLL":return e.setIn(["windowAutoScroll","direction"],t.direction).setIn(["windowAutoScroll","distance"],t.distance).setIn(["windowAutoScroll","location"],t.location);case"SET_WORKSPACE":return _r(e,t);case"SET_GLOBAL_PRELOAD":{const n=e.getIn(["globalPreload"]);return!0===t.globalPreload?e.setIn(["globalPreload"],n+1):0<n?e.setIn(["globalPreload"],n-1):e}case"SET_ELEMENT_VISIBILITY":return e.setIn(["elements",t.elementName,"visible"],t.visibility);case"SET_ELEMENT_PROPERTY":return((e,t)=>{const n=e.setIn(["elements",t.elementName,t.propertyGroup,t.propertyName],t.value);let i=n.getIn(["elements","appFrame","props","zoom","value"]);const r=["sidebarLeft","sidebarRight"].includes(t.elementName),o="dimension"===t.propertyGroup,a="width"===t.propertyName;if(r&&o&&a){const e=Ai(n);"wireframe"!==e&&wi(n,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"})<(Pi(n,e)?.minimum?.width??0)&&(i=Li(n,{view:e,format:"percentage",roundingUpPercentage:!1}))}return n.setIn(["elements","appFrame","props","zoom","value"],i)})(e,t);case"SET_SIDEBAR_MINIMUM_WIDTH":return e.setIn(["elements",t.params.sidebarName,"props","minimumWidth"],t.params.minimumWidth);case"SET_SIDEBAR_ROW_ACTIVE_MODAL":return(0,a.includes)(e.getIn(["sidebarRows",t.sidebarRowId,"modalIds"]),t.activeModal)?e.setIn(["sidebarRows",t.sidebarRowId,"activeModal"],t.activeModal):e;case"SET_SIDEBAR_ROW_HEIGHT":return e.setIn(["sidebarRows",t.sidebarRowId,"dimension","height"],t.height);case"SET_HOVERED_SIDEBAR_DOCKING_AREA":return e.setIn(["sidebarHoveredDockArea"],t.sidebarDockingArea);case"SET_SIDEBAR_HANDLE_CONDITION":return e.setIn(["sidebarHandleCondition"],t.condition);case"SET_DRAGGED_TO_UNPIN_SIDEBAR_MODAL":return((e,t)=>{const{modalName:n}=t;if(!1===n)return e.setIn(["sidebarModalDraggedToUndock"],!1);const i=Object.keys(e.sidebarRows).find((t=>e.sidebarRows[t].modalIds.includes(n)));return i?e.setIn(["sidebarModalDraggedToUndock"],{sidebarRowId:i,modalName:n}):e})(e,t);case"SET_SIDEBAR_ROW_RESIZING_STATUS":return e.setIn(["sidebarRows",t.sidebarRowId,"resizing"],t.status);case"SET_APP_FRAME_ZOOM":return((e,t)=>{const n=t?.params?.value,i=t?.params?.setter??"visualBuilder",r=Yi(e)?.breakpoint??"desktop",o=(0,a.isNumber)(n)?n:parseFloat(n),s=xi(e.setIn(["elements","appFrame","props","zoom","value"],o)),d=wi(e,{elementName:"appFrame",propertyGroup:"dimension",propertyName:"width"}),l=Math.max(s,d),u=Ni(e,{attr:"width",windowLocation:"app"});return Ti(e)&&!u?e.setIn(["elements","appFrame","props","zoom","value"],o).setIn(["elements","appFrame","props","zoom","setter"],i).setIn(["window","width","app","value"],s).setIn(["views","wireframe","maximum","width"],l).setIn(["views",r,"maximum","width"],l):e.setIn(["elements","appFrame","props","zoom","value"],o).setIn(["elements","appFrame","props","zoom","setter"],i).setIn(["views","wireframe","maximum","width"],s).setIn(["views",r,"maximum","width"],s)})(e,t);case"UPDATE_SIDEBAR_ROW_LIMITS":return((e,t)=>{let n=e;const{sidebarRowId:i}=t,r=e.elements.adminBar.dimension.height+e.elements.pageBar.dimension.height,o=e.window.height.top.value-r,s=["sidebarLeft","sidebarRight"].find((t=>e?.elements?.[t]?.props?.rowIds?.includes(i))),d=e?.elements?.[s]?.props?.rowIds??[];if(d.length>1){const t=d.map((t=>t===i?0:e?.sidebarRows?.[t]?.dimension?.height??200)),r=o-(0,a.sum)(t);n=e.setIn(["sidebarRows",i,"maximum","height"],r).setIn(["sidebarRows",i,"minimum","height"],200)}else n=e.setIn(["sidebarRows",i,"maximum","height"],o).setIn(["sidebarRows",i,"minimum","height"],200);return n})(e,t);case"TOGGLE_MODULE_INTERACTION":return e.setIn(["moduleInteraction","status"],t.status);case"ON_MODULE_INTERACTION_EVENT":return e.setIn(["moduleInteraction","event"],t.event);case"SET_MODULE_PERMISSION":return e.setIn(["modulesPermissions",t.moduleType,t.permissionType],t.permissionValue);case"ADD_BUILDER_BAR_BUTTON":return((e,t)=>{const n=e.getIn(["builderBarButtons"])?.asMutable()??[];if(n.some((e=>e.name===t.name)))return e;const i=[...n,t];return e.setIn(["builderBarButtons"],i)})(e,t);case"UPDATE_VIEWS":return((e,t)=>{let n=e;const i=t?.params?.breakpoints,r=Object.values(i).sort(((e,t)=>e.order-t.order)),o=r.length,s=r.filter((e=>e.enable)),d=s[s.length-1];return(0,a.forEach)(r,((e,t)=>{const i=d.name===e.name;let a=r[t-1];a?.baseDevice&&(a=r[t-2]);let s=r[t+1];if(s?.baseDevice&&(s=r[t+2]),n=e?.maxWidth?.value?n.setIn(["views",e.name,"maximum","width"],parseInt(e.maxWidth.value)):o-1===t&&e?.minWidth?.value?n.setIn(["views",e.name,"maximum","width"],parseInt(e.minWidth.value)+400):n.setIn(["views",e.name,"maximum","width"],parseInt(s?.minWidth?.value)-1),n=e?.minWidth?.value?n.setIn(["views",e.name,"minimum","width"],parseInt(e.minWidth.value)):0===t?n.setIn(["views",e.name,"minimum","width"],200):n.setIn(["views",e.name,"minimum","width"],parseInt(a?.maxWidth?.value)),i||e?.baseDevice)n=n.setIn(["views",e.name,"width"],"100vw");else{const t=(n.getIn(["views",e.name,"maximum","width"])+n.getIn(["views",e.name,"minimum","width"]))/2;n=n.setIn(["views",e.name,"width"],`${Math.ceil(t)}px`)}e?.baseDevice||(n=n.setIn(["views",e.name,"enable"],e.enable))})),n})(e,t);default:return e}},Cr=(e,t)=>t?.path&&!(0,a.isEmpty)(t.path)?e.getIn(t?.path):e,Dr={};window?.DiviAppUiData?.debug?.storeStateModal&&(Dr.debugState=Cr);const Pr=(n=Tr)=>{if((0,s.select)("divi/settings")||(0,yn.registerSettingsStore)(),(0,s.select)("divi/app-preferences")||(0,bn.registerAppPreferencesStore)(),(0,s.select)("divi/app-ui"))return;const i=(0,s.select)("divi/settings").getSetting(["preferences","viewMode"]),r="wireframe"===i?"desktop":i;"desktop"!==i&&(n=n.setIn(["view"],i).setIn(["breakpoint"],r),f()("html").attr("data-et-app-view",i));switch((0,s.select)("divi/app-preferences").get(["modal","preference"])){case"saved":{const e={params:{workspace:(0,s.select)("divi/settings").getSetting(["workspaces","builtIn","last-used"])?.asMutable({deep:!0})},type:"SET_WORKSPACE"};n=Nr(n,e);break}case"minimum":n=n.setIn(["elements","sidebarLeft"],Or).setIn(["elements","sidebarRight"],Or).setIn(["sidebarRows"],{});break;case"left":n=n.setIn(["elements","sidebarLeft"],kr).setIn(["elements","sidebarRight"],Or).setIn(["sidebarRows"],Ar);break;case"right":n=n.setIn(["elements","sidebarLeft"],Or).setIn(["elements","sidebarRight"],kr).setIn(["sidebarRows"],Ar)}const o=(0,s.registerStore)("divi/app-ui",{actions:e,reducer:Nr,selectors:{...t,...Dr},initialState:n});if((0,gn.applyMiddlewares)(o,mi),(0,gn.applyEffects)(o,ni),l.isIframe){l.topWindow.jQuery(".et-tb-branded-modal__header").length&&(0,s.dispatch)("divi/app-ui").setElementVisibility({elementName:"brandedModalHeader",visibility:!0})}(0,s.dispatch)("divi/app-ui").setElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height",value:mt()});const a=(0,s.select)("divi/settings").getSetting(["breakpoints","items"])?.asMutable({deep:!0});(0,s.dispatch)("divi/app-ui").updateViews({breakpoints:a})},Br=()=>{const e={top:l.topWindow,app:window},t=(0,s.select)("divi/settings").getSetting(["layout","remoteItemId"]),n=()=>{(0,s.dispatch)("divi/clipboard").syncState()};(0,a.forEach)(e,((e,t)=>{const i=()=>{const n=(0,s.select)("divi/app-ui").isUserDefinedWindowProperty({attr:"width",windowLocation:t}),i=(0,s.select)("divi/app-ui").isUserDefinedWindowProperty({attr:"height",windowLocation:t}),r=(0,s.select)("divi/app-ui").getLargestEnabledVisualView();n||(0,s.dispatch)("divi/app-ui").setWindow({windowLocation:t,attr:"width",value:e.jQuery(e).innerWidth(),setter:"visualBuilder",largestVisualViewName:r?.breakpoint??"desktop"}),i||(0,s.dispatch)("divi/app-ui").setWindow({windowLocation:t,attr:"height",value:e.jQuery(e).innerHeight(),setter:"visualBuilder",largestVisualViewName:r?.breakpoint??"desktop"})};i(),e.addEventListener("resize",(()=>{i()})),e.addEventListener("focus",n);e.addEventListener("DOMContentLoaded",(()=>{(0,s.dispatch)("divi/app-ui").setElementProperty({elementName:"diviTopMenu",propertyGroup:"dimension",propertyName:"height",value:ft()})}));(()=>{const n=(0,s.select)("divi/app-ui").getLargestEnabledVisualView();(0,s.dispatch)("divi/app-ui").setWindow({windowLocation:t,attr:"pageXOffset",value:e.pageXOffset,setter:"visualBuilder",largestVisualViewName:n?.breakpoint??"desktop"}),(0,s.dispatch)("divi/app-ui").setWindow({windowLocation:t,attr:"pageYOffset",value:e.pageYOffset,setter:"visualBuilder",largestVisualViewName:n?.breakpoint??"desktop"})})()})),t&&(0,s.dispatch)("divi/app-ui").undockModalFromSidebarRow({modalName:"divi/page-settings",sidebarRowId:"row-1"})}}(),(window.divi=window.divi||{}).appUi=i}();