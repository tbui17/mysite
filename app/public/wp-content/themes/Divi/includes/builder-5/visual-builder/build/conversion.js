!function(){"use strict";var e={d:function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{ConvertedPresetAttrs:function(){return L},ImportedPresetAttrs:function(){return z},contentNeedsMigration:function(){return h},convertContent:function(){return k},convertEmailServiceAccount:function(){return H},convertFontIcon:function(){return U},convertGlobalColor:function(){return O},convertIcon:function(){return B},convertImageAndIconWidth:function(){return V},convertImageIconWidth:function(){return Y},convertIncludeCategoriesValue:function(){return K},convertIncludeTabsValue:function(){return D},convertInlineFont:function(){return J},convertMultipleContent:function(){return w},convertPresets:function(){return I},convertShortcodeToGbFormat:function(){return F},convertSuccessRedirectQuery:function(){return q},convertTextColorValue:function(){return X},convertTrueFalseToOnOff:function(){return Q},enabled:function(){return n},encodeAttrs:function(){return T},formatDynamicContent:function(){return M},getAttrMap:function(){return u},getModuleGlobalColors:function(){return p},isLegacyAttributeName:function(){return G},isLegacyPostContent:function(){return y},maybeParseValue:function(){return l},normalizeAbSubjectId:function(){return R},parseShortcode:function(){return v},presetsNeedConversion:function(){return S},stickyStatus:function(){return s},valueSanitization:function(){return d}});var o=window.lodash;const n=(e,t,n,r={})=>{const i="responsive"===e?"_last_edited":`__${e}_enabled`,s=n[`${r?.[t]??t}${i}`];return(0,o.isString)(s)&&!(0,o.isUndefined)(s)&&s.startsWith("on")};var r=window.vendor.wp.hooks,i=window.divi.sanitize;const s=e=>{const t={active:!1,viewport:"desktop"},r="sticky_position";return n("responsive",r,e)?((0,o.has)(e,`${r}_phone`)&&"none"!==e[`${r}_phone`]&&""!==e[`${r}_phone`]&&(t.active=!0,t.viewport="phone"),(0,o.has)(e,`${r}_tablet`)&&"none"!==e[`${r}_tablet`]&&""!==e[`${r}_tablet`]&&(t.active=!0,t.viewport="tablet"),(0,o.has)(e,r)&&"none"!==e[r]&&""!==e[r]&&(t.active=!0,t.viewport="desktop")):(0,o.has)(e,r)&&"none"!==e[r]&&""!==e[r]&&(t.active=!0),t},c=["address_lat","address_lng","pin_address_lat","pin_address_lng","zoom_level"],a=["pin.desktop.value.lat","pin.desktop.value.lng","map.desktop.value.lat","map.desktop.value.lng","pin.desktop.value.zoom","map.desktop.value.zoom"],l=(e,t)=>c.includes(e)||a.includes(e)?Number(t):t,d=(e,t,n)=>{let r=e;if(["divi/map","divi/map-pin","divi/fullwidth-map"].includes(n)&&(0,o.isString)(r)&&(r=l(t,r)),"divi/section"===n&&["fullwidth","specialty"].includes(t)&&(r=t),["position_origin_a","position_origin_f","position_origin_r"].includes(t)&&(r=e.toString().replace("_"," ")),["background_position","background_pattern_repeat_origin","background_mask_position"].includes(t))switch(e){case"top_left":r="left top";break;case"top_center":r="center top";break;case"top_right":r="right top";break;case"center_left":r="left center";break;case"center_right":r="right center";break;case"bottom_left":r="left bottom";break;case"bottom_center":r="center bottom";break;case"bottom_right":r="right bottom"}"background_color_gradient_unit"===t&&(r=`100${e}`),t.startsWith("custom_css_")&&(r=e.toString().split("||").join("\n")),"divi/portfolio"===n&&"fullwidth"===t&&(r="off"===e?"grid":"fullwidth"),"text_orientation"===t&&"justified"===e&&(r="justify");return["bottom_divider_arrangement","bottom_divider_arrangement_phone","bottom_divider_arrangement_tablet","top_divider_arrangement","top_divider_arrangement_phone","top_divider_arrangement_tablet"].includes(t)&&(r="above_content"===e?"above":"below"),r=(e=>{const t=e.toString();return/%91|%93|%22|%92|%5c/.test(t)?t.replace(/%22/g,'"').replace(/%92/g,"\\").replace(/%91/g,"&#91;").replace(/%93/g,"&#93;").replace(/%5c/g,"\\"):e})(r),r},u=(e,t,c)=>{const a=e[t],l={},u=t.replace(/_tablet|_phone|__hover|__sticky/,"");let p="desktop",f="value";const b=(0,r.applyFilters)("divi.conversion.moduleLibrary.conversionMap",{})?.[c];if(t.endsWith("_tablet")||t.endsWith("_phone")){if(!n("responsive",u,e,b?.optionEnableMap))return{};p=t.endsWith("_tablet")?"tablet":"phone"}if(t.endsWith("__hover")){if(!n("hover",u,e,b?.optionEnableMap))return{};f="hover"}if(t.endsWith("__sticky")){const t=s(e);if(!n("sticky",u,e,b?.optionEnableMap))return{};p=t.active?t.viewport:"desktop",f="sticky"}let _=b?.attributeMap?.[u];if(["fb_built","bb_built","sticky_enabled","hover_enabled","_dynamic_attributes"].includes(u))return{};const g=b?.deprecatedMap;if(g&&g.includes(u))return{};if(((0,o.isUndefined)(_)||""===_)&&(_=!(0,o.isEmpty)(b?.attributeMap)&&Object.keys(b?.attributeMap).includes(u)?b?.attributeMap?.[u]:["admin_label","theme_builder_area","global_colors_info","on","locked","open"].includes(u)?`${(0,i.camelCase)(u)}.*`:["global_module","global_parent","nonconvertible","shortcodeName"].includes(u)?(0,i.camelCase)(u):["_builder_version","_module_preset"].includes(u)?(0,i.camelCase)(u.substring(1)):`unknownAttributes.${u}`),b?.conditionalAttributeConversionFunctionMap?.[u]){const t=b.conditionalAttributeConversionFunctionMap[u];"function"==typeof t&&(_=t(_,e))}const v=_.replace("*",`${p}.${f}`);if(b?.valueExpansionFunctionMap?.[u]){const t=b?.valueExpansionFunctionMap[u](a,{attrs:e,desktopName:u,moduleName:c,viewport:p,state:f});t instanceof Error||((0,o.isArray)(t)||(0,o.isObject)(t)?(0,o.forEach)(t,((e,t)=>{l[`${v}.${t}`]=e})):l[v]=t)}else(0,o.isString)(b?.attributeMap?.[u])?l[v]=d(a,u,c):l[v]=a;return l},p=e=>{let t={};const n=(0,o.get)(e,"global_colors_info","");try{const e=n.replace(/%91/g,"[").replace(/%93/g,"]").replace(/%22/g,'"');t=JSON.parse(e)}catch(e){}return["background_color_gradient_stops","button_bg_gradient_stops"].forEach((n=>{const r=(0,o.get)(e,n,"");if(!r)return;const i=r.match(/\bgcid-[\w-]+/g);i&&i.forEach((e=>{e in t||(t[e]=[]),t[e].includes(n)||t[e].push(n)}))})),t};var f=window.vendor.wp.shortcode,b=window.divi.constantLibrary;const _=(e,t,n)=>{const r=["_builder_version","_module_preset","nonconvertible"];return{...(0,o.keys)(e).filter((e=>r.includes(e))).reduce(((t,o)=>(t[o]=e[o],t)),{}),nonconvertible:n,shortcodeName:t}},g=e=>{const{nonconvertible:t,content:n,modules:r,shortcodeModules:i,shortcodeName:s}=e;if("yes"===t)return!1;if(["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column","et_pb_column_inner"].includes(s))return!0;const c=i[s].childrenName;if(!c)return!1;const a=(0,o.map)(c,(e=>r[e].d4Shortcode));return new RegExp(`^\\[(${a.join("|")})`).test((0,o.trim)(n))},v=(e,t,n)=>{const r=(0,o.filter)(t,(e=>!(0,o.isEmpty)(e.d4Shortcode))),i=(0,o.keyBy)(r,"name"),s=(0,o.keyBy)(r,"d4Shortcode");let c=(0,f.regexp)(b.shortcodeTagPattern).exec(e),a="",l="";const d=[];for(;null!==c;){const e=c&&c[2]&&"et_pb_unsupported"!==c[2]&&s[c[2]]?"no":"yes",r=c[2].toString(),u="yes"===e?_((0,o.get)((0,f.attrs)(c[3]),"named"),r,e):(0,o.get)((0,f.attrs)(c[3]),"named"),p=g({nonconvertible:e,content:c[5],modules:i,shortcodeModules:s,shortcodeName:r}),m=p?r:"";a=c.input,l="yes"===e?c[0]:p?v(c[5],t,m):c[5];const h=c[0];d.push({name:r,attrs:u,parentName:n??"",content:l,originalShortcode:h}),a=a.replace(c[0],""),c=(0,f.regexp)(b.shortcodeTagPattern).exec(a)}return d};var m=window.divi.rest;const h=e=>{if(!e||""===e.trim())return!1;const t=e.includes('"desktop":{"value"'),o=e.includes("\x3c!-- wp:divi");return t||o},y=e=>!!b.startsWithShortcodeRegExp.test(e)||!!(0,o.includes)(e,"\x3c!-- wp:divi/layout --\x3e"),k=async(e,t={})=>{if(!e||""===e.trim())return e;const{postId:o}=t;if(y(e))try{return(await(0,m.loggedFetch)({method:"POST",restRoute:"/divi/v1/content-conversion",data:{content:e,...o?{post_id:o}:{}}},!0)).converted_content||e}catch(t){return console.error("Server-side content conversion failed, falling back to original content:",t),e}else if(h(e))try{return(await(0,m.loggedFetch)({method:"POST",restRoute:"/divi/v1/content-migration",data:{content:e}},!0)).migrated_content||e}catch(t){return console.error("Server-side content migration failed, falling back to original content:",t),e}return e},w=async e=>{const t=e.map((e=>k(e)));return Promise.all(t)},j=e=>{if(!e||"string"!=typeof e)return!0;return parseInt(e.split(".")[0],10)<5},S=e=>{if(!e||"object"!=typeof e)return!1;const t=e;if(Object.values(t).some((e=>{if(e&&"object"==typeof e&&"presets"in e){const t=e.presets;if(t&&"object"==typeof t)return Object.values(t).some((e=>{if(e&&"object"==typeof e&&"version"in e){const{version:t}=e;return"string"==typeof t&&j(t)}return!1}))}return!1})))return!0;if("module"in t&&t.module&&"object"==typeof t.module){const e=t.module;return Object.values(e).some((e=>{if(e&&"object"==typeof e&&"items"in e){const{items:t}=e;if(t&&"object"==typeof t)return Object.values(t).some((e=>{if(e&&"object"==typeof e&&"version"in e){const{version:t}=e;return"string"==typeof t&&j(t)}return!1}))}return!1}))}return!1},I=async e=>{if(!e||"object"==typeof e&&0===Object.keys(e).length)return{presets:{},presetIdMappings:{},defaultImportedModulePresetIds:{},defaultImportedGroupPresetIds:{}};if(!S(e))return{presets:e,presetIdMappings:{},defaultImportedModulePresetIds:{},defaultImportedGroupPresetIds:{}};try{const t=await(0,m.loggedFetch)({method:"POST",restRoute:"/divi/v1/preset-conversion",data:{presets:e}},!0);return{presets:t.converted_presets||e,presetIdMappings:t.preset_id_mappings||{},defaultImportedModulePresetIds:t.defaultImportedModulePresetIds||{},defaultImportedGroupPresetIds:t.defaultImportedGroupPresetIds||{}}}catch(t){return console.error("Server-side preset conversion failed, falling back to original presets:",t),{presets:e,presetIdMappings:{},defaultImportedModulePresetIds:{},defaultImportedGroupPresetIds:{}}}};var $=window.divi.data,x=window.divi.globalData;const M=(e,t,o="content")=>`$variable(${JSON.stringify({type:o,value:{name:e,settings:t}})})$`,O=(e,t,o)=>{const n=Object.keys(o);for(let r=0;r<n.length;r++){const i=n[r];if(o[i].includes(t))if("object"==typeof e&&t.includes("_gradient_stops")){if((0,x.isGlobalColor)(`var(--${e.color})`)){const t=(0,$.select)("divi/global-data").getGlobalColorById(e.color);if(t&&e.color===i){e={position:e.position,color:"active"===t.status?M(i,{},"color"):t.color};break}if(e.color===i){const t=(0,$.select)("divi/global-data").getLegacyGlobalColors();if(t&&t[i]){const o=t[i],n="yes"===o.active?"active":"inactive";(0,$.dispatch)("divi/global-data").addGlobalColor({color:o.color,id:i,status:n}),e={position:e.position,color:"active"===n?M(i,{},"color"):o.color};break}if("string"==typeof e.color&&e.color.startsWith("gcid-")){e={position:e.position,color:`var(--${e.color})`};break}}}else if("string"==typeof e.color&&e.color.startsWith("gcid-")){e={position:e.position,color:`var(--${e.color})`};break}}else if((0,x.isGlobalColor)(`var(--${i})`)){const t=(0,$.select)("divi/global-data").getGlobalColorById(i);if(t&&e===i){e="active"===t.status?M(i,{},"color"):t.color;break}if(e===i){const t=(0,$.select)("divi/global-data").getLegacyGlobalColors();if(t&&t[i]){const o=t[i],n="yes"===o.active?"active":"inactive";(0,$.dispatch)("divi/global-data").addGlobalColor({color:o.color,id:i,status:n}),e="active"===n?M(i,{},"color"):o.color;break}}}}return"string"==typeof e&&e.startsWith("gcid-")?`var(--${e})`:e};var C=window.divi.moduleUtils;const E=/@ET-DC@([^@]+)@/,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",N=/@ET-DC@([^@]+)@/g,P=e=>{try{return e.replace(N,((e,t)=>{const o=(e=>{const t=String(e),o=[6,4,2,0],n=A.slice(0,-1);let r,i="",s=0,c=0,a="";try{for(let e=0;(r=n.indexOf(t[e]))>-1;e++)s=s<<6|r,e%4&&(c=255&s>>o[e%4],c<128?(i+=a?decodeURI(a):"",i+=String.fromCharCode(c),a=""):a+=`%${`0${c.toString(16)}`.slice(-2)}`);return i+=a?decodeURI(a):"",i}catch(e){throw new Error("base64 malformed!")}})(t);if(t!==(e=>{const t=String(e),o=[2,4,6,8];let n=A,r="",i=0;for(let e=0,s=0;e<t.length||63&i||(n="=",s%4!=0);e++){const c=t.charCodeAt(e),a=c>127?encodeURI(t.charAt(e)).split("%").slice(1).map((e=>parseInt(e,16))):[c];for(let e=0;e<a.length;e++)i=i<<8|a[e],r+=n.charAt(63&i>>o[s%4]),s++,3==s%4&&(r+=Number.isNaN(a[e])?"=":n.charAt(63&i),s++,i=0)}return r})(o))return e;const n=JSON.parse(o);return M(n.content,{...n.settings})}))}catch(t){return e}},G=e=>(0,$.select)("divi/settings").getSetting("legacyAttributeNames").includes(e),T=(e,t,n=null,i=null,s=null)=>{const c={};null!==n&&(e.content=n),e=(e=>((0,o.has)(e,"ab_subject")&&(0,o.has)(e,"ab_subject_id")&&(e={...e,disabled_on:"1"===e.ab_subject_id.toString()?"off|off|off":"on|on|on"}),(0,o.omit)(e,["ab_subject","ab_subject_id","ab_goal"])))(e);const a=p(e),d=(0,C.maybeRestorePresetModuleName)(t);if((0,o.forEach)((0,o.keys)(e),(n=>{if(n.endsWith("_last_edited")||n.endsWith("__hover_enabled")||n.endsWith("__sticky_enabled"))return;if("divi/section"===t&&["specialty","fullwidth"].includes(n)&&"on"!==e[n])return;if("global_colors_info"===n)return;const r=u(e,n,d);(0,o.keys)(r).length>0&&(0,o.forEach)(r,((t,r)=>{var i;(0,o.size)(a)>0&&(t=O(t,n,a)),!(0,o.isObject)(t)&&(i=t?.toString()??"",E.test(i))&&(t=P(t.toString())),["divi/map","divi/map-pin","divi/fullwidth-map"].includes(d)&&(t=l(r,t)),(0,o.set)(c,r,t),"background_enable_color"===n&&"off"===t&&(0,o.set)(c,"module.decoration.background.desktop.value.color",""),"divi/social-media-follow-network"!==d||Object.prototype.hasOwnProperty.call(e,"background_color")||(0,o.set)(c,"module.decoration.background.desktop.value.color","")}))})),c.unknownAttributes&&"object"==typeof c.unknownAttributes){const o=(0,r.applyFilters)("divi.conversion.moduleLibrary.conversionMap",{}),n=Object.keys(c.unknownAttributes),i={},s={da_disable_devices:{da_is_popup:"on"}};n.forEach((n=>{if(G(n))return;if(s[n]){const t=s[n];let o=!0;if(Object.keys(t).forEach((n=>{const r=t[n];e[n]&&e[n]===r||(o=!1)})),!o)return}const r=Object.entries(o).some((([e,o])=>{if(e===t)return!1;return Object.keys(o?.attributeMap??{}).includes(n)})),a=["collapsed","use_background_color"].includes(n);r||a||(i[n]=c.unknownAttributes[n])})),Object.keys(i).length>0?c.unknownAttributes=i:delete c.unknownAttributes}null!==i&&c.unknownAttributes&&Object.keys(c?.unknownAttributes).length>0&&(c.shortcodeName=s,c.content=i);return["divi/section","divi/row","divi/row-inner","divi/column","divi/column-inner","divi/group"].includes(d)&&(0,o.set)(c,"module.decoration.layout.desktop.value.display","block"),JSON.stringify(c)};let W;const F=(e,t=!0,n=null)=>{!0===t&&(W="");const r=(0,$.select)("divi/module-library").getModules("",!0),i=(0,o.filter)(r,(e=>!(0,o.isEmpty)(e.d4Shortcode)));let s={};return(0,o.forEach)(i,(e=>{s={...s,[e.d4Shortcode]:e.name}})),e.forEach((e=>{let t="yes"===(0,o.get)(e,"attrs.nonconvertible")?"yes":"no",r="yes"===t||(0,o.isUndefined)(s[e.name])?"divi/shortcode-module":s[e.name];const i="yes"!==t&&"string"==typeof e.content&&""!==e.content?e.content:null,c=n||e.attrs.global_module,a={...e.attrs,...n&&{global_parent:c}},l=T(a,r,i,e.originalShortcode,e.name);if(l.includes("unknownAttributes")&&s[e.name]&&(t="yes",r="divi/shortcode-module",e.originalShortcode&&(e.content=e.originalShortcode)),"object"==typeof e.content&&"divi/shortcode-module"!==r)W+=`\x3c!-- wp:${r} ${l} --\x3e`,F(e.content,!1,c),W+=`\x3c!-- /wp:${r} --\x3e`;else if("yes"===t){const t="string"==typeof e.content?e.content:"";W+=`\x3c!-- wp:${r} ${l} --\x3e${t}\x3c!-- /wp:${r} --\x3e`}else W+=`\x3c!-- wp:${r} ${l} --\x3e\x3c!-- /wp:${r} --\x3e`})),W},R=e=>{if(!e.includes("ab_subject_id"))return e;if(e.includes('ab_subject_id="1"'))return e;if(1===(e.match(/ab_subject_id/g)||[]).length){const t=e.match(/ab_subject_id="(\d+)"/);if(t&&"1"!==t[1])return e.replace(/ab_subject_id="\d+"/,'ab_subject_id="1"')}return e.replace(/ab_subject_id="\d+"/,'ab_subject_id="1"')};let z,L;z||(z={}),L||(L={});const U=e=>{const t=e.split("||"),n={},r=(0,o.get)(t,0,""),i=(0,o.get)(t,1,""),s=(0,o.get)(t,2,"");return r&&(n.unicode=r),i&&(n.type=i),s&&(n.weight=s),n},B=e=>{if(/^%*[0-9]*%*$/.test(e)){const t=["&#x22;","&#x33;","&#x37;","&#x3b;","&#x3f;","&#x43;","&#x47;","&#xe03a;","&#xe044;","&#xe048;","&#xe04c;"],n=/^%*([0-9]*)%*$/.exec(e)[1]||null;return{unicode:(0,o.isNull)(n)?"":t[parseInt(n)],type:"divi",weight:"400"}}return U(e)},D=e=>(0,o.isString)(e)?e.split("|").filter((e=>!(0,o.isEmpty)(e))):[],J=e=>(0,o.isString)(e)?e.split(","):[],V=e=>({image:e,icon:e}),Q=e=>"true"===e?"on":"off",q=e=>{let t=[];const o=["name","last_name","email","ip_address","css_id"],n=e?.split("|")??[];return n.length===o.length&&n.forEach(((e,n)=>{"on"===e&&(t=t.concat(o[n]))})),t},H=(e,{attrs:t,desktopName:o})=>{let n=t?.provider;n||(n="mailchimp");return[`${n}_list`,`${n}_account_name`].includes(o)?e:new Error(`The attribute name ${o} did match with selected provider ${n}.`)},K=e=>{if(!(0,o.isString)(e))return[];if((0,o.isEmpty)(e.trim()))return[];const t=e.split(",").map((e=>e.trim())).filter((e=>!(0,o.isEmpty)(e))),n=(0,C.getCategoriesForPostType)("product"),r=Array.isArray(n)&&n.length>0;return(0,o.map)(t,(e=>{if("all"===e||"current"===e)return e;const t=Number(e);if(!Number.isNaN(t)){if(r){return(0,o.find)(n,["term_id",t])?e:void 0}return e}})).filter(Boolean)},X=e=>({light:"dark",dark:"light"}[e]??e),Y=(e,t)=>{for(let o=0;o<e.length;o++){const n=e[o];if("use_icon_on"===n.condition&&"on"===t?.use_icon)return n.path;if("use_icon_off"===n.condition&&"off"===(t?.use_icon??"off"))return n.path}return e[0].path};(window.divi=window.divi||{}).conversion=t}();