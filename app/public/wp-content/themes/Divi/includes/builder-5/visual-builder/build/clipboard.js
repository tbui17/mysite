!function(){var t={33042:function(t,e,r){var n;!function(){"use strict";var o=function t(e){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function a(t){var e=Object.getPrototypeOf(t);return e?Object.create(e):{}}function s(t,e,r){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:r})}function i(t,e){s(t,e,(function(){throw new g("The "+e+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=e)||Array.isArray(r)||null===r||void 0!==e.use_static&&(o.use_static=Boolean(e.use_static));var c="__immutable_invariants_hold";function u(t){return"object"!=typeof t||(null===t||Boolean(Object.getOwnPropertyDescriptor(t,c)))}function p(t,e){return t===e||t!=t&&e!=e}function l(t){return!(null===t||"object"!=typeof t||Array.isArray(t)||t instanceof Date)}var d=["setPrototypeOf"],f=d.concat(["push","pop","sort","splice","shift","unshift","reverse"]),m=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),y=d.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function g(t){this.name="MyError",this.message=t,this.stack=(new Error).stack}function h(t,e){for(var r in s(t,c,!0),e)e.hasOwnProperty(r)&&i(t,e[r]);return Object.freeze(t),t}function M(t,e){var r=t[e];s(t,e,(function(){return W(r.apply(t,arguments))}))}function v(t,e,r){var n=r&&r.deep;if(t in this&&(n&&this[t]!==e&&l(e)&&l(this[t])&&(e=W.merge(this[t],e,{deep:!0,mode:"replace"})),p(this[t],e)))return this;var o=T.call(this);return o[t]=W(e),C(o)}g.prototype=new Error,g.prototype.constructor=Error;var b=W([]);function A(t,e,r){var n=t[0];if(1===t.length)return v.call(this,n,e,r);var o,a=t.slice(1),s=this[n];if("object"==typeof s&&null!==s)o=W.setIn(s,a,e);else{var i=a[0];o=""!==i&&isFinite(i)?A.call(b,a,e):L.call(x,a,e)}if(n in this&&s===o)return this;var c=T.call(this);return c[n]=o,C(c)}function C(t){for(var e in m){if(m.hasOwnProperty(e))M(t,m[e])}o.use_static||(s(t,"flatMap",S),s(t,"asObject",E),s(t,"asMutable",T),s(t,"set",v),s(t,"setIn",A),s(t,"update",F),s(t,"updateIn",G),s(t,"getIn",R));for(var r=0,n=t.length;r<n;r++)t[r]=W(t[r]);return h(t,f)}function w(){return new Date(this.getTime())}function S(t){if(0===arguments.length)return this;var e,r=[],n=this.length;for(e=0;e<n;e++){var o=t(this[e],e,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return C(r)}function I(t){if(void 0===t&&0===arguments.length)return this;if("function"!=typeof t){var e=Array.isArray(t)?t.slice():Array.prototype.slice.call(arguments);e.forEach((function(t,e,r){"number"==typeof t&&(r[e]=t.toString())})),t=function(t,r){return-1!==e.indexOf(r)}}var r=a(this);for(var n in this)this.hasOwnProperty(n)&&!1===t(this[n],n)&&(r[n]=this[n]);return U(r)}function T(t){var e,r,n=[];if(t&&t.deep)for(e=0,r=this.length;e<r;e++)n.push(P(this[e]));else for(e=0,r=this.length;e<r;e++)n.push(this[e]);return n}function E(t){"function"!=typeof t&&(t=function(t){return t});var e,r={},n=this.length;for(e=0;e<n;e++){var o=t(this[e],e,this),a=o[0],s=o[1];r[a]=s}return U(r)}function P(t){return!t||"object"!=typeof t||!Object.getOwnPropertyDescriptor(t,c)||t instanceof Date?t:W.asMutable(t,{deep:!0})}function O(t,e){for(var r in t)Object.getOwnPropertyDescriptor(t,r)&&(e[r]=t[r]);return e}function j(t,e){if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(t));var r,n,o=Array.isArray(t),s=e&&e.deep,i=e&&e.mode||"merge",c=e&&e.merger;function u(t,n,o){var i,u=W(n[o]),d=c&&c(t[o],u,e),f=t[o];void 0===r&&void 0===d&&t.hasOwnProperty(o)&&p(u,f)||(p(f,i=void 0!==d?d:s&&l(f)&&l(u)?W.merge(f,u,e):u)&&t.hasOwnProperty(o)||(void 0===r&&(r=O(t,a(t))),r[o]=i))}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(void 0===r&&(r=O(t,a(t))),delete r[n])}if(o)for(var f=0,m=t.length;f<m;f++){var y=t[f];for(n in y)y.hasOwnProperty(n)&&u(void 0!==r?r:this,y,n)}else{for(n in t)Object.getOwnPropertyDescriptor(t,n)&&u(this,t,n);"replace"===i&&d(this,t)}return void 0===r?this:U(r)}function N(t,e){var r=e&&e.deep;if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(t));return W.merge(this,t,{deep:r,mode:"replace"})}var D,_,k,x=W({});function L(t,e,r){if(!Array.isArray(t)||0===t.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=t[0];if(1===t.length)return B.call(this,n,e,r);var o,s=t.slice(1),i=this[n];if(o=this.hasOwnProperty(n)&&"object"==typeof i&&null!==i?W.setIn(i,s,e):L.call(x,s,e),this.hasOwnProperty(n)&&i===o)return this;var c=O(this,a(this));return c[n]=o,U(c)}function B(t,e,r){var n=r&&r.deep;if(this.hasOwnProperty(t)&&(n&&this[t]!==e&&l(e)&&l(this[t])&&(e=W.merge(this[t],e,{deep:!0,mode:"replace"})),p(this[t],e)))return this;var o=O(this,a(this));return o[t]=W(e),U(o)}function F(t,e){var r=Array.prototype.slice.call(arguments,2),n=this[t];return W.set(this,t,e.apply(n,[n].concat(r)))}function $(t,e){for(var r=0,n=e.length;null!=t&&r<n;r++)t=t[e[r]];return r&&r==n?t:void 0}function G(t,e){var r=Array.prototype.slice.call(arguments,2),n=$(this,t);return W.setIn(this,t,e.apply(n,[n].concat(r)))}function R(t,e){var r=$(this,t);return void 0===r?e:r}function V(t){var e,r=a(this);if(t&&t.deep)for(e in this)this.hasOwnProperty(e)&&(r[e]=P(this[e]));else for(e in this)this.hasOwnProperty(e)&&(r[e]=this[e]);return r}function z(){return{}}function U(t){return o.use_static||(s(t,"merge",j),s(t,"replace",N),s(t,"without",I),s(t,"asMutable",V),s(t,"set",B),s(t,"setIn",L),s(t,"update",F),s(t,"updateIn",G),s(t,"getIn",R)),h(t,d)}function W(t,e,r){if(u(t)||function(t){return"object"==typeof t&&null!==t&&(60103===t.$$typeof||t.$$typeof===n)}(t)||function(t){return"undefined"!=typeof File&&t instanceof File}(t)||function(t){return"undefined"!=typeof Blob&&t instanceof Blob}(t)||function(t){return t instanceof Error}(t))return t;if(function(t){return"object"==typeof t&&"function"==typeof t.then}(t))return t.then(W);if(Array.isArray(t))return C(t.slice());if(t instanceof Date)return a=new Date(t.getTime()),o.use_static||s(a,"asMutable",w),h(a,y);var a,i=e&&e.prototype,c=(i&&i!==Object.prototype?function(){return Object.create(i)}:z)();if(null==r&&(r=64),r<=0)throw new g("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var p in r-=1,t)Object.getOwnPropertyDescriptor(t,p)&&(c[p]=W(t[p],void 0,r));return U(c)}function Y(t){return function(){var e=[].slice.call(arguments),r=e.shift();return t.apply(r,e)}}function q(t,e){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?e.apply(n,r):t.apply(n,r)}}return W.from=W,W.isImmutable=u,W.ImmutableError=g,W.merge=Y(j),W.replace=Y(N),W.without=Y(I),W.asMutable=(D=V,_=T,k=w,function(){var t=[].slice.call(arguments),e=t.shift();return Array.isArray(e)?_.apply(e,t):e instanceof Date?k.apply(e,t):D.apply(e,t)}),W.set=q(B,v),W.setIn=q(L,A),W.update=Y(F),W.updateIn=Y(G),W.getIn=Y(R),W.flatMap=Y(S),W.asObject=Y(E),o.use_static||(W.static=t({use_static:!0})),Object.freeze(W),W}();void 0===(n=function(){return o}.call(e,r,e,t))||(t.exports=n)}()}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};!function(){"use strict";r.r(n),r.d(n,{ClipboardAttrsMapsParser:function(){return M},ClipboardAttrsMapsParserContainer:function(){return b},addComponentAttrsMaps:function(){return C},addItem:function(){return w},buildFieldLabelsMap:function(){return F},cacheGroupAttrsMaps:function(){return m},cacheState:function(){return S},clearAttrsMapsFromDB:function(){return yt},clearCommonGroupsCache:function(){return y},collectAllPageModuleIds:function(){return ft},collectModuleIdsByContext:function(){return mt},collectModuleIdsFromModule:function(){return lt},collectModuleIdsFromRootModules:function(){return dt},convertGroupPreset:function(){return z},copyModuleToClipboard:function(){return V},createCacheKey:function(){return l},deleteFromIndexedDB:function(){return k},effects:function(){return O},extractAttrsByDotNotationPaths:function(){return W},extractAttrsByGroupAttrsMap:function(){return U},getActiveComponentAttrsMaps:function(){return Ot},getAttrsMaps:function(){return B},getAttrsMapsFromDB:function(){return x},getCachedGroupAttrsMaps:function(){return f},getCachedGroupsCount:function(){return g},getComponentAttrsMaps:function(){return jt},getComponentAttrsMapsId:function(){return L},getCopyType:function(){return J},getDataFromIndexedDB:function(){return D},getElementContext:function(){return p},getFullAttrPath:function(){return K},getItems:function(){return Nt},getLastDependencyChange:function(){return j},getLastItem:function(){return _t},getLastSync:function(){return Dt},getOrWaitForAttrsMaps:function(){return H},hasOverlappingAttrNames:function(){return Q},hasOverlappingGroupNames:function(){return X},insertSourceIntoTargetAttrs:function(){return Z},isCommonEmptyGroup:function(){return d},loadAllAttrsMapsFromDB:function(){return gt},mapAttrsIntoMatchingGroupNameAttrs:function(){return tt},mergeAttrsIntoAttrs:function(){return nt},mergeFieldAttrIntoResponsiveAttr:function(){return at},mergeGroupPresets:function(){return ut},newAttribute:function(){return ot},openDB:function(){return N},pasteModuleFromClipboard:function(){return st},pasteModuleFromClipboardWithPosition:function(){return it},preGenerateAttrsMaps:function(){return pt},registerClipboardStore:function(){return kt},resetState:function(){return I},resetTargetAttrsBasedOnOverlapppingAttrs:function(){return rt},resetTargetAttrsBasedOnOverlapppingAttrsMaps:function(){return ct},saveToIndexedDB:function(){return _},setComponentAttrsMapsValue:function(){return P},setLastSync:function(){return E},syncState:function(){return T},waitUntilAttrsMapsReady:function(){return q}});var t={};r.r(t),r.d(t,{addComponentAttrsMaps:function(){return C},addItem:function(){return w},cacheState:function(){return S},resetState:function(){return I},setComponentAttrsMapsValue:function(){return P},setLastSync:function(){return E},syncState:function(){return T}});var e={};r.r(e),r.d(e,{getActiveComponentAttrsMaps:function(){return Ot},getComponentAttrsMaps:function(){return jt},getItems:function(){return Nt},getLastItem:function(){return _t},getLastSync:function(){return Dt}});var o=window.vendor.React,a=r.n(o),s=window.lodash,i=window.divi.contextLibrary;const c=["divi/admin-label","divi/animation","divi/attributes","divi/background","divi/border","divi/box-shadow","divi/conditions","divi/disabled-on","divi/filters","divi/interactions","divi/layout","divi/loop","divi/order","divi/overflow","divi/position","divi/scroll","divi/scroll-settings","divi/sizing","divi/spacing","divi/sticky","divi/text","divi/transform","divi/transition","divi/z-index"],u=new Map,p=t=>t?.split(".")[0]||"module",l=(t,e)=>`${t}:${p(e)}`,d=t=>c.includes(t),f=(t,e)=>{const r=l(t,e);return u.get(r)||null},m=(t,e,r)=>{if(d(t)){const n=l(t,e);u.set(n,r)}},y=()=>{u.clear()},g=()=>u.size,h=(t,e,r)=>{const n={fieldLabelsMap:{},attrsComponentMap:{},attrsStructureMap:{},attrsCategoryMap:{},attrsGroupNameMap:{[t]:e}};return Object.entries(e).forEach((([t,e])=>{e.forEach((e=>{const o=t?`${e}.${t}`:e;r.fieldLabelsMap?.[o]&&(n.fieldLabelsMap[o]=r.fieldLabelsMap[o]),r.attrsComponentMap?.[o]&&(n.attrsComponentMap[o]=r.attrsComponentMap[o]);const a=e.split(".");let s=r.attrsStructureMap,i=n.attrsStructureMap;a.forEach(((t,e)=>{if(s&&"object"==typeof s&&t in s)if(e===a.length-1){const e=s[t];i[t]=structuredClone(e)}else i[t]||(i[t]={}),s=s[t],i=i[t]})),Object.entries(r.attrsCategoryMap).forEach((([t,r])=>{if(r&&"object"==typeof r&&e in r){const o=r[e],a=n.attrsCategoryMap;a[t]||(a[t]={}),a[t][e]=structuredClone(o)}}))}))})),n},M=t=>{const{attrsMapsType:e,attrsMapsCallback:r,children:n,id:c,setComponentAttrsMapsValue:u}=t,l={fieldLabelsMap:{},attrsComponentMap:{},attrsStructureMap:{},attrsCategoryMap:{},attrsGroupNameMap:{}};(0,o.useEffect)((()=>{"module"===e&&l.attrsGroupNameMap&&Object.entries(l.attrsGroupNameMap).forEach((([t,e])=>{if(d(t)){const r={};Object.entries(e).forEach((([t,e])=>{e.forEach((e=>{const n=p(e);r[n]||(r[n]={}),r[n][t]||(r[n][t]=[]),r[n][t].push(e)}))})),Object.entries(r).forEach((([,e])=>{const r=Object.values(e).flat()[0],n=f(t,r),o=Object.entries(e).reduce(((t,[,e])=>t+e.length),0);if(n){const a=n.attrsGroupNameMap?.[t];if(o>(a?Object.entries(a).reduce(((t,[,e])=>t+e.length),0):0)){const n=h(t,e,l);m(t,r,n)}}else{const n=h(t,e,l);m(t,r,n)}}))}})),u({id:c,attrsMaps:l,resetActiveComponent:!0}),(0,s.isFunction)(r)&&r(l)}),[]);const y={optionType:e,isParsingAttrsMaps:!0};return a().createElement(i.clipboardAttrsMapsParserContext.Provider,{value:y},a().createElement(i.fieldContext.Provider,{value:{onContainerComponentMount:t=>{const{attrName:e,subName:r,groupName:n,clipboardCategory:o,label:a,component:s}=t,i=e.split(".");if(e){if(a&&"string"==typeof a){const t=r?`${e}.${r}`:e;l.fieldLabelsMap[t]=a}if(s?.name){const t=r?`${e}.${r}`:e;l.attrsComponentMap[t]=s.name}if(r){const t=r.split(".");let a=l.attrsStructureMap;i.forEach((t=>{a[t]||(a[t]={}),a=a[t]})),t.forEach(((e,r)=>{r===t.length-1?a[e]="":(a[e]||(a[e]={}),a=a[e])})),l.attrsCategoryMap.all||(l.attrsCategoryMap.all={}),l.attrsCategoryMap.all[e]||(l.attrsCategoryMap.all[e]={}),l.attrsCategoryMap.all[e][r]="","all"!==o&&(l.attrsCategoryMap[o]||(l.attrsCategoryMap[o]={}),l.attrsCategoryMap[o][e]||(l.attrsCategoryMap[o][e]={}),l.attrsCategoryMap[o][e][r]=""),n&&(l.attrsGroupNameMap[n]||(l.attrsGroupNameMap[n]={}),l.attrsGroupNameMap[n][r]||(l.attrsGroupNameMap[n][r]=[]),l.attrsGroupNameMap[n][r].push(e))}else{let t=l.attrsStructureMap;i.forEach(((e,r)=>{r===i.length-1?t[e]="":(t[e]||(t[e]={}),t=t[e])})),l.attrsCategoryMap.all||(l.attrsCategoryMap.all={}),l.attrsCategoryMap.all[e]="","all"!==o&&(l.attrsCategoryMap[o]||(l.attrsCategoryMap[o]={}),l.attrsCategoryMap[o][e]="")}}},onContainerComponentUnMount:()=>{},containerRenderer:()=>null}},a().createElement("div",{className:"et-vb-clipboard-attrs-maps-parser"},n)))};var v=window.divi.data;const b=()=>{const{id:t,attrsMapsType:e,children:r,attrsMapsCallback:n,setComponentAttrsMapsValue:a}=(0,v.useSelect)((t=>{const e=t("divi/clipboard").getActiveComponentAttrsMaps(),r=t("divi/clipboard").getComponentAttrsMaps(e);return{id:r?.id,attrsMapsType:r?.attrsMapsType,children:r?.component,attrsMapsCallback:r?.callback,setComponentAttrsMapsValue:(0,v.dispatch)("divi/clipboard").setComponentAttrsMapsValue}}));return(0,o.createElement)(M,{id:t,attrsMapsType:e,attrsMapsCallback:n,setComponentAttrsMapsValue:a},r)};var A=window.divi.middleware;const C=t=>({...t,type:"ADD_COMPONENT_ATTRS_MAPS"}),w=t=>({...t,type:"ADD_ITEM"}),S=()=>({type:"CACHE_STATE"}),I=()=>({type:"RESET_STATE"}),T=()=>({type:"SYNC_STATE"}),E=t=>({type:"SYNC_DATE",payload:t}),P=t=>({...t,type:"SET_COMPONENT_ATTRS_MAPS_VALUE"}),O={ADD_ITEM:[()=>{(0,v.dispatch)("divi/clipboard").cacheState()}],SET_COMPONENT_ATTRS_MAPS_VALUE:[t=>{const{attrsMaps:e}=t,r=(0,v.select)("divi/right-click-options").getState().asMutable({deep:!0}),{active:n}=r;if(n){const t=(0,s.pick)(r,["cursorPosition","optionType","owner","windowLocation"]);(0,s.set)(t,["owner","attrsMaps"],e),(0,v.dispatch)("divi/right-click-options").set(t)}}]},j=()=>{try{const t=(0,v.select)("divi/settings").getSetting("dependencyChangeDetection");return t?.lastDependencyChange??0}catch(t){return 0}},N=async(t,e,r)=>{const n=indexedDB.open(t,e);return new Promise(((t,e)=>{n.onupgradeneeded=t=>{const e=t.target.result;r&&r(e)},n.onsuccess=e=>{const r=e.target.result;t(r)},n.onerror=t=>{const{error:r}=t.target;e(r)}}))},D=async(t,e,r)=>{const n=t.transaction(e,"readonly").objectStore(e);return new Promise(((t,e)=>{const o=n.getAll(r);o.onsuccess=()=>t(o.result),o.onerror=()=>e(o.error)}))},_=async(t,e,r,n)=>{const o=t.transaction(e,"readwrite").objectStore(e);return new Promise(((t,e)=>{const a=n?o.put(r,n):o.put(r);a.onsuccess=()=>t(),a.onerror=()=>e(a.error)}))},k=async(t,e,r)=>{const n=t.transaction(e,"readwrite").objectStore(e);return new Promise(((t,e)=>{const o=n.delete(r);o.onsuccess=()=>t(),o.onerror=()=>e(o.error)}))},x=async t=>{try{const e=await N("DiviAttrsMaps",1,(t=>{if(!t.objectStoreNames.contains("attrsMaps")){t.createObjectStore("attrsMaps",{keyPath:"moduleName"}).createIndex("version","version",{unique:!1})}}));try{const r=e.transaction("attrsMaps","readonly").objectStore("attrsMaps"),n=await new Promise(((e,n)=>{const o=r.get(t);o.onsuccess=()=>e(o.result),o.onerror=()=>n(o.error)}));if(!n)return null;const o=j();return!n.lastDependencyChange||n.lastDependencyChange<o?(N("DiviAttrsMaps",1).then((e=>{k(e,"attrsMaps",t).catch((()=>{})).finally((()=>e.close()))})).catch((()=>{})),null):n.data}finally{e.close()}}catch(t){return null}},L=({attrsMapsType:t,name:e,moduleName:r,groupName:n,groupTabName:o,groupId:a})=>{switch(t){case"group":return`${t}-${r}-${n}-${a}`;case"groupTab":return`${t}-${r}-${n}-${o}`;case"module":return`${t}-${r}`;default:return`${t}-${e}`}},B=({attrsMapsType:t,moduleName:e,groupName:r,groupTabName:n})=>{const o=L({attrsMapsType:t,moduleName:e,groupName:r,groupTabName:n}),a=(0,v.select)("divi/clipboard").getComponentAttrsMaps(o);return a?a.getIn(["attrsMaps"]).asMutable({deep:!0}):(x(e).then((t=>{t&&(0,v.dispatch)("divi/clipboard").setComponentAttrsMapsValue({id:o,attrsMaps:t,resetActiveComponent:!1})})).catch((()=>{})),null)},F=t=>{const e={};if(t?.name){const r=B({attrsMapsType:"module",moduleName:t.name});r?.fieldLabelsMap&&Object.assign(e,r.fieldLabelsMap)}return e};var $=r(33042),G=r.n($),R=window.divi.moduleUtils;const V=t=>{if(!t)return;const e=(0,v.select)("divi/events").getSelectedModules().asMutable({deep:!0}).map((t=>t.id)),r=(0,s.uniq)(e.concat(t)),n=(0,s.flatten)(r.map((t=>(0,v.select)("divi/edit-post").getModuleStructureIds(t)))),o=(0,v.select)("divi/edit-post").getModulesByIds(n);if(r.length>1){const e=(0,v.select)("divi/edit-post").getModulesByIds(r),n=(0,R.extractModuleTypes)(e,{"fullwidth-section":"section","specialty-section":"section"});1===n.length&&(0,v.dispatch)("divi/clipboard").addItem({origin:t,clipboardType:"modules",payload:{moduleType:n[0],moduleIds:r,moduleObjects:o}})}else{const e=(0,s.get)(o,[t,"props","attrs"])?(0,s.get)(o,[t,"props","attrs"]).asMutable({deep:!0}):{};(0,v.dispatch)("divi/clipboard").addItem({origin:t,clipboardType:"module",payload:{moduleId:t,moduleType:(0,R.getModuleType)((0,s.get)(o,[t,"name"]),e),moduleObjects:G()(o)}})}},z=t=>{const{payload:e}=t.clipboardItem;if(!e)return null;const r=e.groupPreset||e.attrs?.groupPreset;if(!r)return null;const n=(0,v.select)("divi/edit-post").getModuleName(t.targetModuleId),o=(0,v.select)("divi/module-library").getModule(n),a=o?(0,R.getGroupPresetDefaultAttr)(o):{},s={};Object.entries(r).forEach((([t,e])=>{let r;r=t in a?t:"divi/button"===e.groupName?"button":(0,R.optionGroupPresetResolverGroupId)(e.groupName,n),r&&(s[r]={presetId:e.presetId??null,groupName:e.groupName})}));return{...e,groupPreset:G()(s)}},U=({attrs:t,attrsMap:e})=>{if((0,s.isEmpty)(t))return t;const r=(0,s.keys)(e);return(0,s.pick)(t,r)},W=({attrs:t,attrsMap:e})=>{const r={};return Object.keys(e).forEach((e=>{const n=(0,s.get)(t,e);if(void 0!==n){const t=e.split(".");let o=r;for(let e=0;e<t.length-1;e++){const r=t[e];o[r]||(o[r]={}),o=o[r]}o[t[t.length-1]]=n}})),r},Y=async(t,e,r,n)=>{if(((t,e,r)=>{if("group"===t&&d(e)){const t=r.attrsGroupNameMap?.[e];let n;t&&([n]=Object.values(t).flat()),m(e,n,r)}})(t,e,r),"undefined"!=typeof indexedDB)try{const t={moduleName:e,data:r,timestamp:Date.now(),lastDependencyChange:j()},n=await N("DiviAttrsMaps",1,(t=>{if(!t.objectStoreNames.contains("attrsMaps")){t.createObjectStore("attrsMaps",{keyPath:"moduleName"}).createIndex("version","version",{unique:!1})}}));try{if(!n.objectStoreNames.contains("attrsMaps"))throw new Error("attrsMaps store not found in database");await _(n,"attrsMaps",t)}finally{n.close()}}catch(t){}n(r)},q=async({id:t,attrsMapsType:e,name:r,component:n,callback:o,waitForCaching:a=!1})=>{const s=(0,v.select)("divi/clipboard").getComponentAttrsMaps(t);if(s){const t=s.getIn(["attrsMaps"]),e=t?t.asMutable({deep:!0}):{};o(e)}else{if("group"===e&&d(r)){const e=t.split("-"),n=e.length>=4?e.slice(3).join("-"):"",a=n?f(r,n):f(r);if(a)return(0,v.dispatch)("divi/clipboard").setComponentAttrsMapsValue({id:t,attrsMaps:a,resetActiveComponent:!1}),void o(a)}if("undefined"!=typeof indexedDB)try{const e=await x(r);if(e)return(0,v.dispatch)("divi/clipboard").setComponentAttrsMapsValue({id:t,attrsMaps:e,resetActiveComponent:!1}),void o(e)}catch(t){}if(a){const a=await((t,e,r,n)=>new Promise((o=>{(0,v.dispatch)("divi/clipboard").addComponentAttrsMaps({payload:{id:t,attrsMapsType:e,name:r,component:n,callback:t=>{o(t)}}})})))(t,e,r,n);await Y(e,r,a,o)}else(0,v.dispatch)("divi/clipboard").addComponentAttrsMaps({payload:{id:t,attrsMapsType:e,name:r,component:n,callback:t=>{Y(e,r,t,o).catch((()=>{}))}}})}},H=async({moduleIds:t,processModule:e,onComplete:r})=>{if(0===t.length)return void r?.();const n=[];t.forEach((t=>{const e=(0,v.select)("divi/edit-post").getModuleName(t);if(!e)return;const r=L({attrsMapsType:"module",moduleName:e}),o=(0,R.getSettingsComponent)(e);o&&n.push({moduleId:t,moduleName:e,attrsMapsId:r,component:o})})),0!==n.length?(await n.reduce((async(t,{moduleId:r,moduleName:n,attrsMapsId:o,component:a})=>{await t;try{await q({id:o,attrsMapsType:"module",name:n,component:a,callback:()=>{e(r)},waitForCaching:!0})}catch(t){}}),Promise.resolve()),r?.()):r?.()};function J(t,e){return"content"===t&&"divi/background"!==e?.toLowerCase()?"content":"style"}const K=({attrNamePath:t,breakpoint:e,state:r,subNamePath:n})=>t.concat([e,r]).concat(n),Q=(t,e)=>{const r=(0,s.keys)(t),n=(0,s.keys)(e);return(0,s.intersection)(r,n).length>0},X=(t,e)=>{const r=(0,s.keys)(t),n=(0,s.keys)(e);return(0,s.intersection)(r,n).length>0},Z=({sourceAttrs:t,targetAttrsMap:e,targetAttrs:r})=>{let n=r;if(t.groupPreset){const e=t.groupPreset.asMutable({deep:!0});Object.entries(e).forEach((([t,e])=>{n=n.setIn(["groupPreset",t],e)}))}return t.modulePreset&&(n=n.setIn(["modulePreset"],t.modulePreset)),(0,s.forEach)(e,((e,r)=>{if("groupPreset"===r||"modulePreset"===r)return;const o=t.getIn(r.split("."));o&&((0,s.isObject)(e)&&!(0,s.isEmpty)(e)?(0,s.forEach)(o,((t,o)=>{(0,s.forEach)(t,((t,a)=>{(0,s.forEach)(e,((e,i)=>{const c=i.split("."),u=t.getIn(c);if(!(0,s.isUndefined)(u)){const t=K({attrNamePath:r.split("."),breakpoint:o,state:a,subNamePath:c});n=n.setIn(t,u)}}))}))})):n=n.setIn(r.split("."),o))})),n},tt=({sourceAttrs:t,sourceAttrsGroupNameMap:e,targetAttrsGroupNameMap:r})=>{const n={};return(0,s.forEach)(e,((e,o)=>{(0,s.forEach)(e,((e,a)=>{const i=e[0],c=(0,s.get)(t,i);(0,s.isObject)(c)&&(0,s.forEach)(c,((t,e)=>{(0,s.forEach)(t,((t,i)=>{const c=(0,s.get)(t,a);if(c){const t=(0,s.get)(r,[o,a,0]);if(t){const r=[].concat(t.split(".")).concat([e,i]).concat(a.split("."));(0,s.set)(n,r,c)}}}))}))}))})),G()(n)};var et=window.divi.seamlessImmutableExtension;const rt=({sourceAttrs:t,targetAttrs:e})=>{let r=e;const n=t.asMutable({deep:!0}),o=(t,e,n=[])=>{t&&e&&Object.keys(t).forEach((a=>{const i=[...n,a],c=t[a],u=e[a];if("groupPreset"!==a&&"modulePreset"!==a)if(c&&u&&"object"==typeof c&&"object"==typeof u)o(c,u,i);else if(null!==c&&null!==u){const t=r.getIn(i);(0,s.isObject)(t)?(0,s.forEach)(t,((t,e)=>{(0,s.forEach)(t,((t,n)=>{const o=K({attrNamePath:i,breakpoint:e,state:n,subNamePath:[]});r=(0,et.removeEmptyProperties)((0,et.deepWithout)(r,o))}))})):r=(0,et.removeEmptyProperties)((0,et.deepWithout)(r,i))}}))};return o(n,e.asMutable({deep:!0})),r},nt=({sourceAttrs:t,targetAttrsMap:e,targetAttrs:r})=>{const n=rt({sourceAttrs:t,targetAttrs:r});return Z({sourceAttrs:t,targetAttrsMap:e,targetAttrs:n})},ot=(t,e=R.defaultBreakpointNames)=>{const r=(0,s.zipObject)(e,e.map((()=>(0,s.zipObject)(R.states,R.states.map((()=>""))))));return t?G()(r):r},at=({sourceFieldAttr:t,targetResponsiveAttr:e,targetSubName:r})=>{const n=ot(!0).merge(t,{deep:!0});let o=e;return(0,s.forEach)(n,((t,e)=>{(0,s.forEach)(t,((t,n)=>{const a=r?[e,n].concat(r.split(".")):[e,n];if(""===t){const t=a.length-1,r=a.slice(0,t),i=a.slice(t);if(o.getIn(a)){const t=o.getIn(r);o=o.setIn(r,t.without(i.join(".")))}const c=o.getIn([e,n]);if(c&&(0,s.isEmpty)(c)){const t=o?.[e];o=o.setIn([e],t.without(n))}}else o=o.setIn(a,t)}));const n=o.getIn([e]);n&&(0,s.isEmpty)(n)&&(o=o.without(e))})),o},st=t=>{if(!t)return;const e=(0,v.select)("divi/module-library").getModuleAppearanceSettings(),r=(0,v.select)("divi/settings").getSetting(["themeBuilder","layout"]),n=(0,v.select)("divi/module").getModuleCount(),o=(0,v.select)("divi/edit-post").getModule(t),a=(0,R.getModuleType)((0,s.get)(o,"name"),(0,s.get)(o,["props","attrs"],G()({})).asMutable({deep:!0})),i=(0,v.select)("divi/app-ui").hasModulesPermission(a,"add"),c=(0,v.select)("divi/clipboard").getLastItem(["module","modules"]),u=(0,v.select)("divi/edit-post").getParentModuleType(t),p=(0,s.get)(c,"clipboardType"),l=(c.clipboardType,(0,s.get)(c,["payload","moduleType"])),d=(0,R.isValidChild)(u,l)?"after":!!(0,R.isValidChild)(a,l)&&"inside";c&&d&&i&&("modules"===c.clipboardType?((0,v.dispatch)("divi/edit-post").copyModulesFromPayload({payload:{...c.payload,moduleIds:c.payload.moduleIds.asMutable({deep:!0})},position:d,targetId:t,moduleAppearanceSettings:e,themeBuilderLayout:r,moduleCount:n}),(0,v.dispatch)("divi/events").clearSelection()):"module"===p&&(0,v.dispatch)("divi/edit-post").copyModuleFromPayload({payload:c.payload,position:d,targetId:t,moduleAppearanceSettings:e,themeBuilderLayout:r,moduleCount:n},(0,s.get)(o,"name")))},it=(t,e)=>{if(!t)return;const r=(0,v.select)("divi/module-library").getModuleAppearanceSettings(),n=(0,v.select)("divi/settings").getSetting(["themeBuilder","layout"]),o=(0,v.select)("divi/module").getModuleCount(),a=(0,v.select)("divi/edit-post").getModule(t),i=(0,R.getModuleType)((0,s.get)(a,"name"),(0,s.get)(a,["props","attrs"],G()({})).asMutable({deep:!0})),c=(0,v.select)("divi/app-ui").hasModulesPermission(i,"add"),u=(0,v.select)("divi/clipboard").getLastItem(["module","modules"]),p=(0,v.select)("divi/edit-post").getParentModuleType(t),l=(0,s.get)(u,"clipboardType"),d=(u.clipboardType,(0,s.get)(u,["payload","moduleType"]));let f=!1;if("inside"===e){const t=(0,s.get)(a,"name"),e=(0,v.select)("divi/module-library").getModule(t)?.childrenName;f=!!(Array.isArray(e)&&0===e.length)&&"inside"}else f=!!(0,R.isValidChild)(p,d)&&e;u&&f&&c&&("modules"===u.clipboardType?((0,v.dispatch)("divi/edit-post").copyModulesFromPayload({payload:{...u.payload,moduleIds:u.payload.moduleIds.asMutable({deep:!0})},position:f,targetId:t,moduleAppearanceSettings:r,themeBuilderLayout:n,moduleCount:o}),(0,v.dispatch)("divi/events").clearSelection()):"module"===l&&(0,v.dispatch)("divi/edit-post").copyModuleFromPayload({payload:u.payload,position:f,targetId:t,moduleAppearanceSettings:r,themeBuilderLayout:n,moduleCount:o},(0,s.get)(a,"name")))},ct=({sourceAttrsMap:t,targetAttrsMap:e,targetAttrs:r})=>{let n=r;const o=(0,s.keys)(e);return(0,s.forEach)(t,((t,e)=>{if(!(0,s.includes)(o,e))return;if("groupPreset"===e)return;const a=r.getIn(e.split("."));if(a&&(0,s.isObject)(a))if((0,s.isObject)(t)&&!(0,s.isEmpty)(t)){const r=n.getIn(e.split("."));(0,s.forEach)(r,((r,o)=>{(0,s.forEach)(r,((r,a)=>{(0,s.forEach)(t,((t,i)=>{const c=i.split("."),u=r.getIn(c);if(!(0,s.isUndefined)(u)){const t=K({attrNamePath:e.split("."),breakpoint:o,state:a,subNamePath:c});n=(0,et.removeEmptyProperties)((0,et.deepWithout)(n,t))}}))}))}))}else n=(0,et.removeEmptyProperties)((0,et.deepWithout)(n,e.split(".")))})),n},ut=({sourcePresets:t,targetPresets:e})=>t?e?{...e,...t}:t:e,pt=async({moduleIds:t,onModuleReady:e,onComplete:r})=>{if(0===t.length)return void r?.();const n=new Set,o=[];t.forEach((t=>{const e=(0,v.select)("divi/edit-post").getModuleName(t);e&&!n.has(e)&&(n.add(e),o.push(t))}));const a=[],s=[];o.forEach((t=>{const e=(0,v.select)("divi/edit-post").getModuleName(t);if(!e)return;const r=L({attrsMapsType:"module",moduleName:e});(0,v.select)("divi/clipboard").getComponentAttrsMaps(r)?a.push(t):s.push(t)})),0===s.length?(a.forEach((t=>{const r=(0,v.select)("divi/edit-post").getModuleName(t);r&&e?.(t,r)})),r?.()):await H({moduleIds:o,processModule:t=>{const r=(0,v.select)("divi/edit-post").getModuleName(t);r&&e?.(t,r)},onComplete:()=>{r?.()}})},lt=t=>(0,v.select)("divi/edit-post").getModuleStructureIds(t),dt=t=>{const e=[];return t.forEach((t=>{const r=(0,v.select)("divi/edit-post").getModuleStructureIds(t);e.push(...r)})),e},ft=()=>{const t=(0,v.select)("divi/edit-post").getRootModuleIds();return dt(t)},mt=(t,e,r)=>t&&r?dt(r):e?lt(e):[],yt=async()=>{try{const t=await N("DiviAttrsMaps",1,(t=>{if(!t.objectStoreNames.contains("attrsMaps")){t.createObjectStore("attrsMaps",{keyPath:"moduleName"}).createIndex("version","version",{unique:!1})}})),e=t.transaction("attrsMaps","readwrite").objectStore("attrsMaps");await new Promise(((t,r)=>{const n=e.clear();n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})),t.close()}catch(t){}},gt=async()=>{try{const t=await N("DiviAttrsMaps",1,(t=>{if(!t.objectStoreNames.contains("attrsMaps")){t.createObjectStore("attrsMaps",{keyPath:"moduleName"}).createIndex("version","version",{unique:!1})}})),e=t.transaction("attrsMaps","readonly").objectStore("attrsMaps"),r=await new Promise(((t,r)=>{const n=e.getAll();n.onsuccess=()=>t(n.result),n.onerror=()=>r(n.error)}));t.close();const n=j();let o=0;return r.forEach((t=>{if(!t?.moduleName||!t?.data)return;if(!t.lastDependencyChange||t.lastDependencyChange<n)return;const e=L({attrsMapsType:"module",moduleName:t.moduleName});(0,v.dispatch)("divi/clipboard").setComponentAttrsMapsValue({id:e,attrsMaps:t.data,resetActiveComponent:!1}),o++})),o}catch(t){return 0}},ht={CACHE_STATE:[()=>t=>e=>{const r=t(e);return(async()=>{try{const t=(0,v.select)("divi/clipboard").getItems(),e=await N("D5Clipboard",1,(t=>{t.objectStoreNames.contains("clipboard")||t.createObjectStore("clipboard",{autoIncrement:!0})})),r=e.transaction("clipboard","readwrite").objectStore("clipboard");await new Promise(((t,e)=>{const n=r.clear();n.onsuccess=()=>t(),n.onerror=()=>e(n.error)})),await new Promise(((e,n)=>{const o=r.add(JSON.stringify(t),"items");o.onsuccess=()=>e(),o.onerror=()=>n(o.error)})),await new Promise(((t,e)=>{const n=r.add(Date.now(),"timestamp");n.onsuccess=()=>t(),n.onerror=()=>e(n.error)})),e.close()}catch(t){}})().catch((()=>{})),r}],SYNC_STATE:[()=>t=>async e=>{let r=[];try{const t=await N("D5Clipboard",1,(t=>{t.objectStoreNames.contains("clipboard")||t.createObjectStore("clipboard",{autoIncrement:!0})}));try{const e=await D(t,"clipboard","timestamp"),n=(0,v.select)("divi/clipboard").getLastSync();if(!n||e?.[0]>n){const e=await D(t,"clipboard","items");r=JSON.parse(e),(0,v.dispatch)("divi/clipboard").setLastSync(new Date)}}finally{t.close()}}catch(t){}return t({...e,payload:r})}]},Mt=G()({items:[],componentAttrsMaps:{},componentAttrsMapsActive:"",lastSync:null}),vt=(t,e)=>{switch(e.type){case"ADD_ITEM":{const r=50,n=(0,s.get)(t,["items","length"],0);if(n+1>r){const o=n+1-r;return t.setIn(["items"],t.getIn(["items"],[]).slice(o)).setIn(["items",String(r-1)],{clipboardType:e.clipboardType,origin:e.origin,payload:e.payload})}return t.setIn(["items",String(n)],{clipboardType:e.clipboardType,origin:e.origin,payload:e.payload})}case"ADD_COMPONENT_ATTRS_MAPS":{const{payload:r}=e,{id:n}=r;return t.setIn(["componentAttrsMaps",n],{id:n,...r}).setIn(["componentAttrsMapsActive"],n)}case"RESET_STATE":return Mt;case"SYNC_STATE":return!e.payload||(0,s.isEmpty)(e.payload)?t:t.setIn(["items"],[...e.payload]);case"CACHE_STATE":default:return t;case"SYNC_DATE":return t.setIn(["lastSync"],e.payload);case"SET_COMPONENT_ATTRS_MAPS_VALUE":return t=t.setIn(["componentAttrsMaps",e.id,"component"],null),e.resetActiveComponent&&(t=t.setIn(["componentAttrsMapsActive"],"")),t.setIn(["componentAttrsMaps",e.id,"attrsMaps"],e.attrsMaps)}};function bt(t,e="expected a function, instead received "+typeof t){if("function"!=typeof t)throw new TypeError(e)}var At=t=>Array.isArray(t)?t:[t];function Ct(t){const e=Array.isArray(t[0])?t[0]:t;return function(t,e="expected all items to be functions, instead received the following types: "){if(!t.every((t=>"function"==typeof t))){const r=t.map((t=>"function"==typeof t?`function ${t.name||"unnamed"}()`:typeof t)).join(", ");throw new TypeError(`${e}[${r}]`)}}(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function wt(t,e){const r=[],{length:n}=t;for(let o=0;o<n;o++)r.push(t[o].apply(null,e));return r}Symbol(),Object.getPrototypeOf({});var St="undefined"!=typeof WeakRef?WeakRef:class{constructor(t){this.value=t}deref(){return this.value}};function It(t,e={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=e;let o,a=0;function s(){let e=r;const{length:s}=arguments;for(let t=0,r=s;t<r;t++){const r=arguments[t];if("function"==typeof r||"object"==typeof r&&null!==r){let t=e.o;null===t&&(e.o=t=new WeakMap);const n=t.get(r);void 0===n?(e={s:0,v:void 0,o:null,p:null},t.set(r,e)):e=n}else{let t=e.p;null===t&&(e.p=t=new Map);const n=t.get(r);void 0===n?(e={s:0,v:void 0,o:null,p:null},t.set(r,e)):e=n}}const i=e;let c;if(1===e.s?c=e.v:(c=t.apply(null,arguments),a++),i.s=1,n){const t=o?.deref?.()??o;null!=t&&n(t,c)&&(c=t,0!==a&&a--);o="object"==typeof c&&null!==c||"function"==typeof c?new St(c):c}return i.v=c,c}return s.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function Tt(t,...e){const r="function"==typeof t?{memoize:t,memoizeOptions:e}:t,n=(...t)=>{let e,n=0,o=0,a={},s=t.pop();"object"==typeof s&&(a=s,s=t.pop()),bt(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);const i={...r,...a},{memoize:c,memoizeOptions:u=[],argsMemoize:p=It,argsMemoizeOptions:l=[],devModeChecks:d={}}=i,f=At(u),m=At(l),y=Ct(t),g=c((function(){return n++,s.apply(null,arguments)}),...f);const h=p((function(){o++;const t=wt(y,arguments);return e=g.apply(null,t),e}),...m);return Object.assign(h,{resultFunc:s,memoizedResultFunc:g,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>e,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:c,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var Et=Tt(It),Pt=Object.assign(((t,e=Et)=>{!function(t,e="expected an object, instead received "+typeof t){if("object"!=typeof t)throw new TypeError(e)}(t,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof t);const r=Object.keys(t);return e(r.map((e=>t[e])),((...t)=>t.reduce(((t,e,n)=>(t[r[n]]=e,t)),{})))}),{withTypes:()=>Pt});const Ot=Et([t=>t],(t=>t.getIn(["componentAttrsMapsActive"]))),jt=Et([t=>t,(t,e)=>e],((t,e)=>t.getIn(["componentAttrsMaps",e]))),Nt=t=>t.getIn(["items"]),Dt=t=>t.getIn(["lastSync"]),_t=Et([t=>t,(t,e)=>e],((t,e="all")=>{const r=Nt(t);return"all"===e?(0,s.last)(r):(0,s.findLast)(r,(t=>(0,s.isArray)(e)?(0,s.includes)(e,t.clipboardType):t.clipboardType===e))})),kt=()=>{if((0,v.select)("divi/clipboard"))return;const r=(0,v.registerStore)("divi/clipboard",{actions:t,reducer:vt,selectors:e,initialState:Mt});(0,A.applyMiddlewares)(r,ht),(0,A.applyEffects)(r,O),(0,v.dispatch)("divi/clipboard").syncState()}}(),(window.divi=window.divi||{}).clipboard=n}();