!function(){var e={53316:function(e){function t(e,t,r,o){var s,n=null==(s=o)||"number"==typeof s||"boolean"==typeof s?o:r(o),a=t.get(n);return void 0===a&&(a=e.call(this,o),t.set(n,a)),a}function r(e,t,r){var o=Array.prototype.slice.call(arguments,3),s=r(o),n=t.get(s);return void 0===n&&(n=e.apply(this,o),t.set(s,n)),n}function o(e,t,r,o,s){return r.bind(t,e,o,s)}function s(e,s){return o(e,this,1===e.length?t:r,s.cache.create(),s.serializer)}function n(){return JSON.stringify(arguments)}function a(){this.cache=Object.create(null)}a.prototype.has=function(e){return e in this.cache},a.prototype.get=function(e){return this.cache[e]},a.prototype.set=function(e,t){this.cache[e]=t};var i={create:function(){return new a}};e.exports=function(e,t){var r=t&&t.cache?t.cache:i,o=t&&t.serializer?t.serializer:n;return(t&&t.strategy?t.strategy:s)(e,{cache:r,serializer:o})},e.exports.strategies={variadic:function(e,t){return o(e,this,r,t.cache.create(),t.serializer)},monadic:function(e,r){return o(e,this,t,r.cache.create(),r.serializer)}}},33042:function(e,t,r){var o;!function(){"use strict";var s=function e(t){var r,o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),s={use_static:!1};function n(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function a(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}function i(e,t){a(e,t,(function(){throw new b("The "+t+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=t)||Array.isArray(r)||null===r||void 0!==t.use_static&&(s.use_static=Boolean(t.use_static));var l="__immutable_invariants_hold";function u(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,l)))}function d(e,t){return e===t||e!=e&&t!=t}function p(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var c=["setPrototypeOf"],g=c.concat(["push","pop","sort","splice","shift","unshift","reverse"]),m=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),f=c.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function b(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function I(e,t){for(var r in a(e,l,!0),t)t.hasOwnProperty(r)&&i(e,t[r]);return Object.freeze(e),e}function E(e,t){var r=e[t];a(e,t,(function(){return z(r.apply(e,arguments))}))}function y(e,t,r){var o=r&&r.deep;if(e in this&&(o&&this[e]!==t&&p(t)&&p(this[e])&&(t=z.merge(this[e],t,{deep:!0,mode:"replace"})),d(this[e],t)))return this;var s=A.call(this);return s[e]=z(t),_(s)}b.prototype=new Error,b.prototype.constructor=Error;var P=z([]);function O(e,t,r){var o=e[0];if(1===e.length)return y.call(this,o,t,r);var s,n=e.slice(1),a=this[o];if("object"==typeof a&&null!==a)s=z.setIn(a,n,t);else{var i=n[0];s=""!==i&&isFinite(i)?O.call(P,n,t):U.call(w,n,t)}if(o in this&&a===s)return this;var l=A.call(this);return l[o]=s,_(l)}function _(e){for(var t in m){if(m.hasOwnProperty(t))E(e,m[t])}s.use_static||(a(e,"flatMap",v),a(e,"asObject",N),a(e,"asMutable",A),a(e,"set",y),a(e,"setIn",O),a(e,"update",k),a(e,"updateIn",B),a(e,"getIn",F));for(var r=0,o=e.length;r<o;r++)e[r]=z(e[r]);return I(e,g)}function T(){return new Date(this.getTime())}function v(e){if(0===arguments.length)return this;var t,r=[],o=this.length;for(t=0;t<o;t++){var s=e(this[t],t,this);Array.isArray(s)?r.push.apply(r,s):r.push(s)}return _(r)}function S(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,r){"number"==typeof e&&(r[t]=e.toString())})),e=function(e,r){return-1!==t.indexOf(r)}}var r=n(this);for(var o in this)this.hasOwnProperty(o)&&!1===e(this[o],o)&&(r[o]=this[o]);return W(r)}function A(e){var t,r,o=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)o.push(h(this[t]));else for(t=0,r=this.length;t<r;t++)o.push(this[t]);return o}function N(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},o=this.length;for(t=0;t<o;t++){var s=e(this[t],t,this),n=s[0],a=s[1];r[n]=a}return W(r)}function h(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,l)||e instanceof Date?e:z.asMutable(e,{deep:!0})}function R(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function G(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var r,o,s=Array.isArray(e),a=t&&t.deep,i=t&&t.mode||"merge",l=t&&t.merger;function u(e,o,s){var i,u=z(o[s]),c=l&&l(e[s],u,t),g=e[s];void 0===r&&void 0===c&&e.hasOwnProperty(s)&&d(u,g)||(d(g,i=void 0!==c?c:a&&p(g)&&p(u)?z.merge(g,u,t):u)&&e.hasOwnProperty(s)||(void 0===r&&(r=R(e,n(e))),r[s]=i))}function c(e,t){for(var o in e)t.hasOwnProperty(o)||(void 0===r&&(r=R(e,n(e))),delete r[o])}if(s)for(var g=0,m=e.length;g<m;g++){var f=e[g];for(o in f)f.hasOwnProperty(o)&&u(void 0!==r?r:this,f,o)}else{for(o in e)Object.getOwnPropertyDescriptor(e,o)&&u(this,e,o);"replace"===i&&c(this,e)}return void 0===r?this:W(r)}function L(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return z.merge(this,e,{deep:r,mode:"replace"})}var D,C,M,w=z({});function U(e,t,r){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var o=e[0];if(1===e.length)return V.call(this,o,t,r);var s,a=e.slice(1),i=this[o];if(s=this.hasOwnProperty(o)&&"object"==typeof i&&null!==i?z.setIn(i,a,t):U.call(w,a,t),this.hasOwnProperty(o)&&i===s)return this;var l=R(this,n(this));return l[o]=s,W(l)}function V(e,t,r){var o=r&&r.deep;if(this.hasOwnProperty(e)&&(o&&this[e]!==t&&p(t)&&p(this[e])&&(t=z.merge(this[e],t,{deep:!0,mode:"replace"})),d(this[e],t)))return this;var s=R(this,n(this));return s[e]=z(t),W(s)}function k(e,t){var r=Array.prototype.slice.call(arguments,2),o=this[e];return z.set(this,e,t.apply(o,[o].concat(r)))}function j(e,t){for(var r=0,o=t.length;null!=e&&r<o;r++)e=e[t[r]];return r&&r==o?e:void 0}function B(e,t){var r=Array.prototype.slice.call(arguments,2),o=j(this,e);return z.setIn(this,e,t.apply(o,[o].concat(r)))}function F(e,t){var r=j(this,e);return void 0===r?t:r}function $(e){var t,r=n(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(r[t]=h(this[t]));else for(t in this)this.hasOwnProperty(t)&&(r[t]=this[t]);return r}function x(){return{}}function W(e){return s.use_static||(a(e,"merge",G),a(e,"replace",L),a(e,"without",S),a(e,"asMutable",$),a(e,"set",V),a(e,"setIn",U),a(e,"update",k),a(e,"updateIn",B),a(e,"getIn",F)),I(e,c)}function z(e,t,r){if(u(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===o)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(z);if(Array.isArray(e))return _(e.slice());if(e instanceof Date)return n=new Date(e.getTime()),s.use_static||a(n,"asMutable",T),I(n,f);var n,i=t&&t.prototype,l=(i&&i!==Object.prototype?function(){return Object.create(i)}:x)();if(null==r&&(r=64),r<=0)throw new b("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var d in r-=1,e)Object.getOwnPropertyDescriptor(e,d)&&(l[d]=z(e[d],void 0,r));return W(l)}function Y(e){return function(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}}function K(e,t){return function(){var r=[].slice.call(arguments),o=r.shift();return Array.isArray(o)?t.apply(o,r):e.apply(o,r)}}return z.from=z,z.isImmutable=u,z.ImmutableError=b,z.merge=Y(G),z.replace=Y(L),z.without=Y(S),z.asMutable=(D=$,C=A,M=T,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?C.apply(t,e):t instanceof Date?M.apply(t,e):D.apply(t,e)}),z.set=K(V,y),z.setIn=K(U,O),z.update=Y(k),z.updateIn=Y(B),z.getIn=Y(F),z.flatMap=Y(v),z.asObject=Y(N),s.use_static||(z.static=e({use_static:!0})),Object.freeze(z),z}();void 0===(o=function(){return s}.call(t,r,t,e))||(e.exports=o)}()}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};!function(){"use strict";r.r(o),r.d(o,{GlobalDataStyle:function(){return $r},GlobalDataStyleContainer:function(){return xr},accentColorMap:function(){return v},addDefaultModulePreset:function(){return oe},addDefaultOptionGroupPreset:function(){return Ye},addFontColorVariable:function(){return f},addGlobalColor:function(){return Z},addGlobalVariable:function(){return Je},addGlobalVariables:function(){return Ze},addNewOptionGroupPreset:function(){return We},addNewOptionGroupPresetFromCurrentStyles:function(){return $e},addNewPreset:function(){return se},addNewPresetFromCurrentStyles:function(){return ne},addPresetAttrsMapJob:function(){return Te},assignOptionGroupPresetToDefault:function(){return ze},assignPresetToDefault:function(){return ae},bootstrapGlobalVariables:function(){return m},cloneOptionGroupPreset:function(){return Fe},clonePreset:function(){return ie},closeConfirmationModal:function(){return le},closeOptionGroupConfirmationModal:function(){return ue},closeOptionGroupPresetEditMode:function(){return qe},closeOptionGroupPresetModal:function(){return Ke},closePresetModal:function(){return de},collectGlobalColorDependencies:function(){return J},conditionalDebouncedPresetHistoryUpdate:function(){return Vr},debouncedAddPresetHistoryItem:function(){return Ur},deleteGlobalColor:function(){return Q},deleteGlobalVariable:function(){return Qe},deleteModulePreset:function(){return pe},deleteOptionGroupPreset:function(){return xe},editModulePresetGroupPresets:function(){return ge},editPresetAttribute:function(){return ce},effects:function(){return kr},endPresetEditSession:function(){return Re},endSyncingPreset:function(){return Ce},extractGroupPresetsFromAttrs:function(){return K},findDependentGlobalColors:function(){return b},generateDefaultPresetName:function(){return P},generateNanoUuid:function(){return y},generateNewOptionGroupPreset:function(){return O},generateNewPreset:function(){return _},generateVariableId:function(){return T},getAccentColor:function(){return S},getAccentColorId:function(){return N},getAccentColorValue:function(){return h},getAccentColorValues:function(){return R},getAccentColors:function(){return A},getActiveGlobalColorsMap:function(){return vr},getAllGroupPresetData:function(){return br},getAllPresetData:function(){return ir},getAllowedActions:function(){return g},getDefaultPreset:function(){return Vt},getDefaultPresetID:function(){return Ut},getDefaultPresetOnSave:function(){return sr},getEditingPresetId:function(){return er},getFormattedCSSValue:function(){return G},getGlobalColorBasedOnCssVariable:function(){return Jt},getGlobalColorById:function(){return vt},getGlobalColorIdFromValue:function(){return L},getGlobalColorLabel:function(){return Yt},getGlobalColorPalette:function(){return At},getGlobalColorValue:function(){return wt},getGlobalColors:function(){return Nt},getGlobalColorsByStatus:function(){return Gt},getGlobalColorsToExport:function(){return Ct},getGlobalOrPreviewColorValue:function(){return dr},getGlobalOrPreviewColorValues:function(){return pr},getGlobalPreviewColors:function(){return Rt},getGlobalVariable:function(){return D},getGlobalVariableByGroup:function(){return _r},getGlobalVariableById:function(){return Or},getGlobalVariableValue:function(){return C},getGlobalVariables:function(){return Tr},getGlobalVariablesToExport:function(){return Mt},getGroupPreset:function(){return gr},getGroupPresetItem:function(){return mr},getGroupPresets:function(){return fr},getGroupsForDefaultPreset:function(){return yr},getLegacyGlobalColors:function(){return ht},getMergedModulePresetAttrs:function(){return jt},getMergedModulePresetRenderAttrs:function(){return Bt},getModulePreset:function(){return kt},getModulePresets:function(){return $t},getModulePresetsList:function(){return xt},getOptionGroupPresetConfirmationModal:function(){return Tt},getOptionGroupPresetEditMode:function(){return Er},getOptionGroupPresetModalState:function(){return cr},getOptionGroupPresetSaveConfirmationDialogFlag:function(){return Pr},getPresetAttr:function(){return Wt},getPresetAttrsMap:function(){return or},getPresetAttrsMapJobs:function(){return rr},getPresetConfirmationModal:function(){return _t},getPresetSaveConfirmationDialogFlag:function(){return lr},getPreviewGlobalColors:function(){return ur},getRenderableValue:function(){return zt},getSyncingPresetType:function(){return ar},importGlobalColors:function(){return X},importPresets:function(){return _e},isActiveConfirmationModal:function(){return qt},isActiveGlobalColor:function(){return Zt},isActiveOptionGroupConfirmationModal:function(){return Ht},isActiveOptionGroupPresetModal:function(){return tr},isActivePreset:function(){return Xt},isCustomizerFontVariable:function(){return B},isGlobalColor:function(){return M},isGlobalColorEditing:function(){return Qt},isGlobalColorRemovable:function(){return Kt},isGlobalVariable:function(){return w},isGlobalVariableValue:function(){return U},isOptionGroupPresetEditing:function(){return Ir},isPresetSyncing:function(){return nr},maybeUpdateVariableColors:function(){return V},normalizeOptionGroupPresetId:function(){return k},normalizePresetId:function(){return j},openConfirmationModal:function(){return me},openOptionGroupConfirmationModal:function(){return fe},openOptionGroupPresetModal:function(){return Ie},openPresetModal:function(){return be},overridePresetData:function(){return Le},processGlobalVariableColor:function(){return $},registerGlobalDataStore:function(){return Fr},removeGlobalColorPreviewValue:function(){return Ue},removePresetAttribute:function(){return Ee},resetGlobalVariables:function(){return ot},resolveDynamicValue:function(){return z},resolveGlobalColorVariable:function(){return W},resolveGlobalDataToCssVarsInAttrsDeep:function(){return q},resolveNestedGlobalColor:function(){return Y},restoreGlobalVariable:function(){return st},saveGlobalVariables:function(){return nt},savePreset:function(){return De},setDefaultPresetOnSave:function(){return Se},setGlobalColorPreviewValue:function(){return Ve},setIsGlobalColorEditing:function(){return Ae},setOptionGroupPresetEditMode:function(){return Ne},setPresetAttrsMap:function(){return ve},startPresetEditSession:function(){return Ge},startSyncingPreset:function(){return Me},toggleOptionGroupPresetSaveConfirmationDialog:function(){return He},togglePresetSaveConfirmationDialog:function(){return we},transformStateIntoGlobalColorValue:function(){return F},unsetDefaultPresetOnSave:function(){return he},updateGlobalColor:function(){return ee},updateGlobalColors:function(){return te},updateGlobalColorsUsedInPosts:function(){return re},updateGlobalVariable:function(){return Xe},updateGlobalVariableOrder:function(){return tt},updateGlobalVariables:function(){return et},updateGlobalVariablesBackup:function(){return rt},updateOptionGroupPresetName:function(){return je},updateOptionGroupPresetPriority:function(){return Be},updateOptionGroupPresetWithCurrentStyles:function(){return ke},updatePresetName:function(){return ye},updatePresetPriority:function(){return Pe},updatePresetWithCurrentStyles:function(){return Oe}});var e={};r.r(e),r.d(e,{addDefaultModulePreset:function(){return oe},addDefaultOptionGroupPreset:function(){return Ye},addGlobalColor:function(){return Z},addGlobalVariable:function(){return Je},addGlobalVariables:function(){return Ze},addNewOptionGroupPreset:function(){return We},addNewOptionGroupPresetFromCurrentStyles:function(){return $e},addNewPreset:function(){return se},addNewPresetFromCurrentStyles:function(){return ne},addPresetAttrsMapJob:function(){return Te},assignOptionGroupPresetToDefault:function(){return ze},assignPresetToDefault:function(){return ae},cloneOptionGroupPreset:function(){return Fe},clonePreset:function(){return ie},closeConfirmationModal:function(){return le},closeOptionGroupConfirmationModal:function(){return ue},closeOptionGroupPresetEditMode:function(){return qe},closeOptionGroupPresetModal:function(){return Ke},closePresetModal:function(){return de},deleteGlobalColor:function(){return Q},deleteGlobalVariable:function(){return Qe},deleteModulePreset:function(){return pe},deleteOptionGroupPreset:function(){return xe},editModulePresetGroupPresets:function(){return ge},editPresetAttribute:function(){return ce},endPresetEditSession:function(){return Re},endSyncingPreset:function(){return Ce},importGlobalColors:function(){return X},importPresets:function(){return _e},openConfirmationModal:function(){return me},openOptionGroupConfirmationModal:function(){return fe},openOptionGroupPresetModal:function(){return Ie},openPresetModal:function(){return be},overridePresetData:function(){return Le},removeGlobalColorPreviewValue:function(){return Ue},removePresetAttribute:function(){return Ee},resetGlobalVariables:function(){return ot},restoreGlobalVariable:function(){return st},saveGlobalVariables:function(){return nt},savePreset:function(){return De},setDefaultPresetOnSave:function(){return Se},setGlobalColorPreviewValue:function(){return Ve},setIsGlobalColorEditing:function(){return Ae},setOptionGroupPresetEditMode:function(){return Ne},setPresetAttrsMap:function(){return ve},startPresetEditSession:function(){return Ge},startSyncingPreset:function(){return Me},toggleOptionGroupPresetSaveConfirmationDialog:function(){return He},togglePresetSaveConfirmationDialog:function(){return we},unsetDefaultPresetOnSave:function(){return he},updateGlobalColor:function(){return ee},updateGlobalColors:function(){return te},updateGlobalColorsUsedInPosts:function(){return re},updateGlobalVariable:function(){return Xe},updateGlobalVariableOrder:function(){return tt},updateGlobalVariables:function(){return et},updateGlobalVariablesBackup:function(){return rt},updateOptionGroupPresetName:function(){return je},updateOptionGroupPresetPriority:function(){return Be},updateOptionGroupPresetWithCurrentStyles:function(){return ke},updatePresetName:function(){return ye},updatePresetPriority:function(){return Pe},updatePresetWithCurrentStyles:function(){return Oe}});var t={};r.r(t),r.d(t,{getActiveGlobalColorsMap:function(){return vr},getAllGroupPresetData:function(){return br},getAllPresetData:function(){return ir},getDefaultPreset:function(){return Vt},getDefaultPresetID:function(){return Ut},getDefaultPresetOnSave:function(){return sr},getEditingPresetId:function(){return er},getGlobalColorBasedOnCssVariable:function(){return Jt},getGlobalColorById:function(){return vt},getGlobalColorLabel:function(){return Yt},getGlobalColorPalette:function(){return At},getGlobalColorValue:function(){return wt},getGlobalColors:function(){return Nt},getGlobalColorsByStatus:function(){return Gt},getGlobalColorsToExport:function(){return Ct},getGlobalOrPreviewColorValue:function(){return dr},getGlobalOrPreviewColorValues:function(){return pr},getGlobalPreviewColors:function(){return Rt},getGlobalVariableByGroup:function(){return _r},getGlobalVariableById:function(){return Or},getGlobalVariables:function(){return Tr},getGlobalVariablesToExport:function(){return Mt},getGroupPreset:function(){return gr},getGroupPresetItem:function(){return mr},getGroupPresets:function(){return fr},getGroupsForDefaultPreset:function(){return yr},getLegacyGlobalColors:function(){return ht},getMergedModulePresetAttrs:function(){return jt},getMergedModulePresetRenderAttrs:function(){return Bt},getModulePreset:function(){return kt},getModulePresets:function(){return $t},getModulePresetsList:function(){return xt},getOptionGroupPresetConfirmationModal:function(){return Tt},getOptionGroupPresetEditMode:function(){return Er},getOptionGroupPresetModalState:function(){return cr},getOptionGroupPresetSaveConfirmationDialogFlag:function(){return Pr},getPresetAttr:function(){return Wt},getPresetAttrsMap:function(){return or},getPresetAttrsMapJobs:function(){return rr},getPresetConfirmationModal:function(){return _t},getPresetSaveConfirmationDialogFlag:function(){return lr},getPreviewGlobalColors:function(){return ur},getRenderableValue:function(){return zt},getSyncingPresetType:function(){return ar},isActiveConfirmationModal:function(){return qt},isActiveGlobalColor:function(){return Zt},isActiveOptionGroupConfirmationModal:function(){return Ht},isActiveOptionGroupPresetModal:function(){return tr},isActivePreset:function(){return Xt},isGlobalColorEditing:function(){return Qt},isGlobalColorRemovable:function(){return Kt},isOptionGroupPresetEditing:function(){return Ir},isPresetSyncing:function(){return nr}});var s=window.lodash,n=r(33042),a=r.n(n),i=window.divi.colors,l=window.divi.data,u=window.divi.fonts,d=window.divi.middleware,p=window.divi.moduleUtils,c=window.divi.settings;const g=e=>{const t={editLabel:!0,editValue:!0,remove:!0,reorder:!0};return"customizer"===e&&(t.editLabel=!1,t.remove=!1,t.reorder=!1),t},m=e=>{const t=(0,l.select)("divi/fonts").getCustomizerFonts(),{heading:r,body:o}=t,s=(0,l.select)("divi/global-data").getGlobalColors()??{};if(e.includes("fonts")){const e=[];r?.fontId&&e.push({id:r.fontId,label:r.label,value:r.fontName,groupKey:"fonts",status:"active",order:1,allowedActions:g("customizer")}),o?.fontId&&e.push({id:o.fontId,label:o.label,value:o.fontName,groupKey:"fonts",status:"active",order:2,allowedActions:g("customizer")}),e.length>0&&(0,l.dispatch)("divi/global-data").updateGlobalVariables(e)}if(e.includes("colors")){const e=[];Object.entries(s).forEach((([t,{color:r,label:o,folder:s,status:n,order:a,lastUpdated:i}],l)=>{e.push({id:t,label:o||r,value:r,groupKey:"colors",status:"active"===n?n:"archived",allowedActions:g(s),order:a||l+1,lastUpdated:i})})),(0,l.dispatch)("divi/global-data").updateGlobalVariables(e)}},f=(e,t,r,o,s,n,a,i)=>{(0,l.dispatch)("divi/global-data").addGlobalVariable({id:t,label:r,value:o,allowedActions:s,lastUpdated:i,order:n,groupKey:e,status:"active"===a?a:"archived"})},b=(e,t)=>{const r=[];return Object.entries(t).forEach((([o,s])=>{if(o===e)return;const n=s?.color||"";if("string"==typeof n&&n.includes(`"name":"${e}"`)){r.push(o);const e=b(o,t);r.push(...e)}})),r.push(e),Array.from(new Set(r))};let I=e=>crypto.getRandomValues(new Uint8Array(e)),E=(e,t=21)=>((e,t,r)=>{let o=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*o*t/e.length);return(n=t)=>{let a="";for(;;){let t=r(s),i=s;for(;i--;)if(a+=e[t[i]&o]||"",a.length===n)return a}}})(e,t,I);const y=()=>E("0123456789abcdefghijklmnopqrstuvwxyz",10)(),P=(e,t)=>{const r=e=>`${t} ${e}`;if(!e.length)return{id:y(),name:r(1)};const o=new RegExp(`^${t} (\\d+)$`,"i"),s=e.filter((e=>o.test(e)));if(!s.length)return{id:y(),name:r(1)};const n=s.sort(((e,t)=>{const r=Number(o.exec(e)[1]);return Number(o.exec(t)[1])-r})),a=o.exec(n[0]),i=Number(a[1])+1;return{id:y(),name:r(i)}},O=({presets:e,groupLabel:t,groupName:r,moduleName:o,attrs:n={},renderAttrs:a={},styleAttrs:i={},version:l,created:u,updated:d,groupId:c,primaryAttrName:g})=>{const{id:m,name:f}=P(e,t),b={type:"group",id:m,name:f,version:l,created:u,updated:d,groupName:r,moduleName:o,groupId:c};(0,s.isEmpty)(n)||(b.attrs=n),(0,s.isEmpty)(a)||(b.renderAttrs=a),(0,s.isEmpty)(i)||(b.styleAttrs=i);const I=(0,p.optionGroupPresetPrimaryAttrNameResolver)({primaryAttrName:g,groupId:c,groupName:r,moduleName:o});return I&&(b.primaryAttrName=I),b},_=({presets:e,moduleLabel:t,moduleName:r,attrs:o={},renderAttrs:n={},styleAttrs:a={},groupPresets:i,type:l="module",version:u="5.0.0",created:d,updated:p})=>{const{id:c,name:g}=P(e,t),m={id:c,name:g,moduleName:r,version:u,type:l,created:d,updated:p};return(0,s.isEmpty)(o)||(m.attrs=o),(0,s.isEmpty)(n)||(m.renderAttrs=n),(0,s.isEmpty)(a)||(m.styleAttrs=a),(0,s.isEmpty)(i)||(m.groupPresets=i),m},T=(e,t)=>e||("colors"===t?`gcid-${y()}`:`gvid-${y()}`),v={primary:"gcid-primary-color",secondary:"gcid-secondary-color",heading:"gcid-heading-color",body:"gcid-body-color"},S=e=>{if(!(e in v))return"";return`var(--${v[e]})`},A=()=>{const e={};return Object.keys(v).forEach((t=>{e[t]=S(t)})),e},N=e=>e in v?v[e]:"",h=(e,t)=>{const r=N(e);if(!r)return"";const o=t("divi/global-data").getGlobalOrPreviewColorValue(r);if(o)return o;return{primary:"#2ea3f2",secondary:"#2ea3f2",heading:"#666666",body:"#666666"}[e]||"#2ea3f2"},R=e=>{const t={};return Object.keys(v).forEach((r=>{t[r]=h(r,e)})),t},G=(e,t,r=!1)=>{if(e.startsWith("--")){const o=(e.endsWith("_font")||r)&&"none"!==t?"'":"";return`${e}: ${o}${t}${o} !important;`}const o=r&&"none"!==t?"'":"";return`--${e}: ${o}${t}${o};`},L=({value:e})=>{if("string"!=typeof e)return null;const t=/--gcid-([0-9a-z-]*)/.exec(e);return t&&t.length>=2?`gcid-${t[1]}`:null},D=e=>(0,l.select)("divi/global-data").getGlobalVariableById(e),C=e=>D(e)?.value??null,M=e=>Boolean(L({value:e})),w=e=>!!e&&(!(!e.startsWith("gvid")&&!e.startsWith("gcid"))||!!["--et_global_heading_font","--et_global_body_font"].includes(e)),U=(e,t)=>{if(!e||"string"!=typeof e)return!1;const r=/^\$variable\((.+?)\)\$$/.exec(e);if(!r)return!1;try{const e=JSON.parse(r[1]);if(!e||"object"!=typeof e||Array.isArray(e))return!1;return!!(e=>{const t=e;return"type"in e&&"value"in e&&"string"==typeof t.type&&"object"==typeof t.value&&null!==t.value&&"name"in t.value&&"string"==typeof t.value.name})(e)&&e.type===t}catch{return!1}},V=()=>{const e=(0,l.select)("divi/global-data").getGlobalColors(),t=(0,l.select)("divi/global-data").getGlobalVariables().colors,r=Object.keys(t),o=Object.keys(e);if(!r.length)return!1;const s=o.filter((e=>!r.includes(e)));return!!s.length&&(s.forEach((t=>{if(!e[t])return;const{color:r,folder:o,label:s,status:n,lastUpdated:a}=e[t];f("colors",t,s||r,r,g(o),null,n,a)})),!0)},k=({presetId:e,groupName:t,state:r})=>(0,p.isValidPresetId)(e)?e:r.getIn(["presets","items","group",t,"default"])||"",j=({id:e,moduleName:t,state:r})=>(0,p.getSelectedPresetOrDefault)((0,p.isValidPresetId)(e)?[e]:[],r.getIn(["presets","items","module",t,"default"])??""),B=e=>["--et_global_heading_font","--et_global_body_font"].includes(e),F=({cssVariable:e,globalColorSettings:t})=>{let r=e;if(t&&Object.keys(t).length>0){const o=t.hue??0,s=t.saturation??0,n=t.lightness??0,a=t.opacity??null,i=null!==a&&100!==a?" / "+a/100:"",l=(e,t)=>`calc(${e}${t>=0?" + ":" - "}${Math.abs(t)})`,u=l("h",o),d=l("s",s),p=l("l",n);if(0===o&&0===s&&0===n&&(null===a||100===a))return e;r=`hsl(from ${e} ${u} ${d} ${p}${i})`}return r},$=e=>{if(!e||"string"!=typeof e||!e.startsWith("$variable"))return e;const t=/\$variable\((.+?)\)\$/.exec(e);if(t)try{const e=JSON.parse(t[1]),r=`var(--${(e?.value?.name||"").replace(/^--/,"")})`;return"color"===e.type?F({cssVariable:r,globalColorSettings:e.value?.settings}):r}catch(t){console.warn("Failed to parse variable reference:",e,t)}return e},x=e=>/^gcid-[0-9a-z-]+$/.test(e),W=(e,t,r=0,o=!1)=>{if(r>=10)return console.warn("resolveGlobalColorVariable: Maximum recursion depth (10) reached for color:",e),e;if((M(e)||x(e))&&t?.[e]){const s=t[e];return U(s,"color")||(M(s)||x(s))&&t?.[s]?W(s,t,r+1,o):s}if(U(e,"color")){const a=(0,p.parseDynamicData)(e);if(!1!==a&&a?.value){const e=a.value.name,i=e?t?.[e]:null;if(i&&e){const{settings:l}=a.value,u=!l||"object"!=typeof l||"before"in l||"after"in l?{}:l,d=U(i,"color")?W(i,t,r+1,o):i;if(0===Object.keys(u).length)return d;if(o&&d.startsWith("hsl(from")){const e=d.match(/hsl\(from ([^)]+) calc\(h ([+-]) ([^)]+)\) calc\(s ([+-]) ([^)]+)\) calc\(l ([+-]) ([^)]+)\)/);if(e){const t=e[1],r=parseInt(e[3])*("+"===e[2]?1:-1),o=parseInt(e[5])*("+"===e[4]?1:-1),a=parseInt(e[7])*("+"===e[6]?1:-1),i=(s={hue:r,saturation:o,lightness:a},n={hue:u.hue||0,saturation:u.saturation||0,lightness:u.lightness||0},{hue:s.hue+n.hue,saturation:s.saturation+n.saturation,lightness:s.lightness+n.lightness}),l=(e,t)=>`calc(${e}${t>=0?" + ":" - "}${Math.abs(t)})`,d=l("h",i.hue||0),p=l("s",i.saturation||0),c=l("l",i.lightness||0),{opacity:g}=u;return`hsl(from ${t} ${d} ${p} ${c}${null!=g&&100!==g?" / "+g/100:""})`}}const p=F({cssVariable:`var(--${e})`,globalColorSettings:u});return p.includes(`var(--${e})`)?p.replace(`var(--${e})`,d):p}}}var s,n;if("string"==typeof e&&e.includes("hsl(from var(--")&&e.includes("gcid-")){const s=e.match(/var\(--([^)]+)\)/);if(s&&s[1]){const n=t?.[s[1]];if(n){const s=U(n,"color")?W(n,t,r+1,o):n;return e.replace(/var\(--[^)]+\)/,s)}}}return e},z=e=>{if(!(0,p.isDynamicData)(e))return e;const t=(0,p.parseDynamicData)(e);if(!1===t)return e;const r=t.value?.name;return r?C(r)??e:e},Y=(e,t,r=new Set,o={hue:0,saturation:0,lightness:0})=>{if(!U(t,"color"))return t;const s=/\$variable\((.+?)\)\$/.exec(t);if(!s)return t;let n;try{n=JSON.parse(s[1])}catch(e){return t}if(!n||"color"!==n.type)return t;const a=n.value?.name,i=n.value?.settings||{};if(!a)return t;if(r.has(a))return t;r.add(a);const l=e.getIn(["globalColors",a]);if(!l?.color)return r.delete(a),t;const u=(e,t=0)=>"number"==typeof e?e:t,d={hue:o.hue+u(i.hue),saturation:o.saturation+u(i.saturation),lightness:o.lightness+u(i.lightness),opacity:null!=o.opacity?o.opacity:"opacity"in i?u(i.opacity):null},p=Y(e,l.color,r,d);if(r.delete(a),p.startsWith("#")&&(0!==d.hue||0!==d.saturation||0!==d.lightness||null!=d.opacity)){const e=(e,t)=>`calc(${e}${t>=0?" + ":" - "}${Math.abs(t)})`;return`hsl(from ${p} ${e("h",d.hue)} ${e("s",d.saturation)} ${e("l",d.lightness)}${null!=d.opacity&&100!==d.opacity?" / "+d.opacity/100:""})`}return p},K=e=>{const t=e?.groupPreset;if(!t||"object"!=typeof t)return{};let r=t;"asMutable"in t&&"function"==typeof t.asMutable&&(r=t.asMutable({deep:!0}));const o={};return Object.entries(r).forEach((([e,t])=>{(e=>{if(!e||"object"!=typeof e)return!1;const t=e,r="presetId"in t&&(Array.isArray(t.presetId)||"object"==typeof t.presetId&&t.presetId&&"asMutable"in t.presetId),o="groupName"in t&&"string"==typeof t.groupName;let s=!1;if(r){const e=Array.isArray(t.presetId)?t.presetId:t.presetId.asMutable({deep:!0});s=e.length>0&&e.some((e=>""!==e&&"default"!==e))}return r&&o&&s})(t)&&(o[e]={presetId:t.presetId,groupName:t.groupName})})),(0,s.isEmpty)(o)?{}:o},q=e=>{if((0,p.isRecursableArray)(e))return e.map(q);if((0,p.isRecursableObject)(e)){const t={};return(0,p.objectWalkRecursive)(e,((e,r)=>{if("string"==typeof e&&e.startsWith("$variable")){const t=(0,p.parseDynamicData)(e);if(t){w(t?.value?.name||"")&&(e=$(e))}}(0,s.set)(t,r,e)})),t}return Array.isArray(e)?[]:(0,s.isPlainObject)(e)?{}:e},H=(e,t,r)=>{if(r.has(e))return[];r.add(e);const o=[],s=("object"==typeof t&&"get"in t&&"function"==typeof t.get?(0,n.asMutable)(t,{deep:!0}):t)[e];if(!s)return[];const a=s.color||"";if(a&&"string"==typeof a&&U(a,"color")){const e=(0,p.parseDynamicData)(a);if(e&&e.value?.name){const s=e.value.name;o.push(s);const n=H(s,t,r);o.push(...n)}}return o},J=(e,t)=>{if(!e||0===e.length)return[];const r=[...e],o=new Set;return e.forEach((e=>{const s=H(e,t,o);r.push(...s)})),(0,s.uniq)(r)},Z=({color:e,id:t=y(),lastUpdated:r=(new Date).toISOString(),status:o="active"})=>{(0,s.isEmpty)(t)?t=`gcid-${y()}`:t.startsWith("gcid-")||(t=`gcid-${t}`);return!(0,s.isEmpty)(r)&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(r)||(r=(new Date).toISOString()),{type:"ADD_GLOBAL_COLOR",color:e,id:t,lastUpdated:r,status:o}},Q=e=>({type:"DELETE_GLOBAL_COLOR",id:e}),X=(e,t)=>({type:"IMPORT_GLOBAL_COLORS",ids:e,data:t}),ee=(e,t)=>({type:"UPDATE_GLOBAL_COLOR",id:e,color:t}),te=e=>({type:"UPDATE_GLOBAL_COLORS",palette:e}),re=(e,t,r)=>(!(0,s.isEmpty)(r)&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(r)||(r=(new Date).toISOString()),{type:"UPDATE_GLOBAL_COLORS_USED_IN_POSTS",postId:e,globalColorIds:t,lastUpdated:r}),oe=({moduleName:e,moduleLabel:t,presetType:r,version:o,created:s,updated:n})=>({type:"ADD_DEFAULT_MODULE_PRESET",moduleName:e,moduleLabel:t,presetType:r,version:o,created:s,updated:n}),se=({moduleName:e,moduleLabel:t,moduleId:r,attrs:o,renderAttrs:s,styleAttrs:n,groupPresets:a,presetType:i,version:l,created:u,updated:d})=>({type:"ADD_NEW_MODULE_PRESET",moduleName:e,moduleLabel:t,moduleId:r,attrs:o,renderAttrs:s,styleAttrs:n,groupPresets:a,presetType:i,version:l,created:u,updated:d}),ne=({moduleName:e,moduleLabel:t,moduleId:r,attrs:o,renderAttrs:s,styleAttrs:n,groupPresets:a,presetType:i,version:l,created:u,updated:d})=>({type:"ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES",moduleName:e,moduleLabel:t,moduleId:r,attrs:o,renderAttrs:s,styleAttrs:n,groupPresets:a,presetType:i,version:l,created:u,updated:d}),ae=(e,t)=>({type:"ASSIGN_PRESET_TO_DEFAULT",presetId:e,moduleName:t}),ie=(e,t,r,o)=>({type:"CLONE_MODULE_PRESET",presetId:e,moduleName:t,moduleLabel:r,moduleId:o}),le=()=>({type:"CLOSE_CONFIRMATION_MODAL"}),ue=()=>({type:"CLOSE_OPTION_GROUP_CONFIRMATION_MODAL"}),de=()=>({type:"CLOSE_PRESET_MODAL"}),pe=(e,t)=>({type:"DELETE_MODULE_PRESET",presetId:e,moduleName:t}),ce=({presetType:e,presetSubType:t,presetId:r,attrName:o,attrValue:s,updated:n,attrsGroup:a,caller:i="user"})=>({type:"EDIT_PRESET_ATTRIBUTE",presetType:e,presetSubType:t,presetId:r,attrName:o,attrValue:s,updated:n,attrsGroup:a,caller:i}),ge=({moduleName:e,presetId:t,groupId:r,groupName:o,groupPresetId:s,presetIdToRemove:n})=>({type:"EDIT_MODULE_PRESET_GROUP_PRESETS",moduleName:e,presetId:t,groupId:r,groupName:o,groupPresetId:s,presetIdToRemove:n}),me=({confirmationAction:e,confirmationText:t,actionPayload:r,actionLabels:o})=>({type:"OPEN_CONFIRMATION_MODAL",confirmationAction:e,confirmationText:t,actionPayload:r,actionLabels:o}),fe=({confirmationAction:e,confirmationText:t,actionPayload:r,actionLabels:o})=>({type:"OPEN_OPTION_GROUP_CONFIRMATION_MODAL",confirmationAction:e,confirmationText:t,actionPayload:r,actionLabels:o}),be=e=>({type:"OPEN_PRESET_MODAL",presetId:e?.presetId}),Ie=({groupId:e,visible:t,offsetTop:r,groupName:o,groupLabel:s})=>({type:"OPEN_OPTION_GROUP_PRESET_MODAL",groupId:e,visible:t,offsetTop:r,groupName:o,groupLabel:s}),Ee=({presetType:e,presetSubType:t,presetId:r,attrName:o,attrsGroup:s})=>({type:"REMOVE_PRESET_ATTRIBUTE",presetType:e,presetSubType:t,presetId:r,attrName:o,attrsGroup:s}),ye=({presetId:e,moduleName:t,name:r,updated:o})=>({type:"UPDATE_PRESET_NAME",presetId:e,moduleName:t,name:r,updated:o}),Pe=({presetId:e,moduleName:t,priority:r,updated:o})=>({type:"UPDATE_PRESET_PRIORITY",presetId:e,moduleName:t,priority:r,updated:o}),Oe=({presetId:e,moduleName:t,attrs:r,styleAttrs:o,renderAttrs:s,moduleId:n,updated:a})=>({type:"UPDATE_PRESET_WITH_CURRENT_STYLES",presetId:e,moduleName:t,attrs:r,styleAttrs:o,renderAttrs:s,moduleId:n,updated:a}),_e=(e,t)=>({type:"IMPORT_PRESETS",presets:e,isConversion:t}),Te=({moduleName:e,id:t,callback:r})=>({type:"ADD_PRESET_ATTRS_MAP_JOB",moduleName:e,id:t,callback:r}),ve=({moduleName:e,map:t})=>({type:"SET_PRESET_ATTRS_MAP",moduleName:e,map:t}),Se=({presetType:e,presetSubType:t,presetId:r})=>({type:"SET_DEFAULT_PRESET_ON_SAVE",presetType:e,presetSubType:t,presetId:r}),Ae=e=>({type:"SET_IS_GLOBAL_COLOR_EDITING",isEditing:e.isEditing}),Ne=({groupId:e,groupName:t,presetId:r,enabled:o})=>({type:"SET_OPTION_GROUP_PRESET_EDIT_MODE",groupId:e,groupName:t,presetId:r,enabled:o}),he=(e={})=>({type:"UNSET_DEFAULT_PRESET_ON_SAVE",presetType:e.presetType,presetSubType:e.presetSubType}),Re=(e,t,r)=>({type:"END_PRESET_EDIT_SESSION",isRollback:e,presetType:t,unsavedPresetGroupName:r}),Ge=({presetType:e,presetId:t,moduleName:r})=>({type:"START_PRESET_EDIT_SESSION",presetType:e,presetId:t,moduleName:r}),Le=e=>({type:"OVERRIDE_PRESET_DATA",data:e}),De=e=>({type:"SAVE_PRESET",level:e?.level}),Ce=e=>({type:"END_SYNCING_PRESET",isError:e}),Me=e=>({type:"START_SYNCING_PRESET",presetType:e?.presetType??""}),we=({flag:e})=>({type:"TOGGLE_PRESET_SAVE_CONFIRMATION_DIALOG",flag:e}),Ue=e=>({type:"REMOVE_GLOBAL_COLOR_PREVIEW_VALUE",colorId:e}),Ve=(e,t)=>({type:"SET_GLOBAL_COLOR_PREVIEW_VALUE",colorId:e,color:t}),ke=({moduleId:e,presetId:t,groupId:r,groupName:o,attrs:s,renderAttrs:n,styleAttrs:a,updated:i})=>({type:"UPDATE_OPTION_GROUP_PRESET_WITH_CURRENT_STYLES",moduleId:e,presetId:t,groupId:r,groupName:o,attrs:s,renderAttrs:n,styleAttrs:a,updated:i}),je=({presetId:e,groupName:t,name:r,updated:o})=>({type:"UPDATE_OPTION_GROUP_PRESET_NAME",presetId:e,groupName:t,name:r,updated:o}),Be=({presetId:e,groupName:t,priority:r,updated:o})=>({type:"UPDATE_OPTION_GROUP_PRESET_PRIORITY",presetId:e,groupName:t,priority:r,updated:o}),Fe=({presetId:e,groupId:t,groupName:r,groupLabel:o,moduleId:s})=>({type:"CLONE_OPTION_GROUP_PRESET",presetId:e,groupId:t,groupName:r,groupLabel:o,moduleId:s}),$e=({moduleId:e,groupId:t,groupName:r,groupLabel:o,attrs:s,renderAttrs:n,styleAttrs:a,version:i,created:l,updated:u,moduleName:d,primaryAttrName:p})=>({type:"ADD_NEW_OPTION_GROUP_PRESET_FROM_CURRENT_STYLES",moduleId:e,groupId:t,groupName:r,groupLabel:o,attrs:s,renderAttrs:n,styleAttrs:a,version:i,created:l,updated:u,moduleName:d,primaryAttrName:p}),xe=({presetId:e,groupName:t})=>({type:"DELETE_OPTION_GROUP_PRESET",presetId:e,groupName:t}),We=({groupName:e,groupLabel:t,attrs:r,renderAttrs:o,styleAttrs:s,version:n,created:a,updated:i,groupId:l,moduleId:u,moduleName:d,primaryAttrName:p})=>({type:"ADD_NEW_OPTION_GROUP_PRESET",groupName:e,groupLabel:t,attrs:r,renderAttrs:o,styleAttrs:s,version:n,created:a,updated:i,groupId:l,moduleId:u,moduleName:d,primaryAttrName:p}),ze=({presetId:e,groupName:t,groupId:r})=>({type:"ASSIGN_OPTION_GROUP_PRESET_TO_DEFAULT",presetId:e,groupName:t,groupId:r}),Ye=({groupName:e,groupLabel:t,presetType:r,version:o,created:s,updated:n,moduleName:a,groupId:i,primaryAttrName:l})=>({type:"ADD_DEFAULT_OPTION_GROUP_PRESET",groupName:e,groupLabel:t,presetType:r,version:o,created:s,updated:n,moduleName:a,groupId:i,primaryAttrName:l}),Ke=()=>({type:"CLOSE_OPTION_GROUP_PRESET_MODAL"}),qe=e=>({type:"CLOSE_OPTION_GROUP_PRESET_EDIT_MODE",groupId:e?.groupId,groupName:e?.groupName}),He=({flag:e})=>({type:"TOGGLE_OPTION_GROUP_PRESET_SAVE_CONFIRMATION_DIALOG",flag:e}),Je=({id:e,label:t,value:r,groupKey:o,order:s,status:n,allowedActions:a,lastUpdated:i})=>({type:"ADD_GLOBAL_VARIABLE",id:T(e,o),label:t,value:r,groupKey:o,status:n,order:s,allowedActions:a,lastUpdated:i}),Ze=({...e})=>({type:"ADD_GLOBAL_VARIABLES",...e}),Qe=({id:e,groupKey:t})=>({type:"DELETE_GLOBAL_VARIABLE",id:e,groupKey:t}),Xe=({id:e,label:t,value:r,groupKey:o,status:s})=>({type:"UPDATE_GLOBAL_VARIABLE",id:e,label:t,value:r,groupKey:o,status:s}),et=e=>({type:"UPDATE_GLOBAL_VARIABLES",variables:e}),tt=({id:e,order:t,groupKey:r})=>({type:"UPDATE_GLOBAL_VARIABLE_ORDER",id:e,order:t,groupKey:r}),rt=()=>({type:"UPDATE_GLOBAL_VARIABLES_BACKUP"}),ot=()=>({type:"RESET_GLOBAL_VARIABLES"}),st=({id:e,groupKey:t})=>({type:"RESTORE_GLOBAL_VARIABLE",id:e,groupKey:t}),nt=()=>({type:"SAVE_GLOBAL_VARIABLES"}),at=(e,t)=>{const r=t.getState().getIn(["presets","items"]),o=Date.now();(0,l.dispatch)("divi/history").addPresetSessionItem({presetItems:r,timestamp:o})},it=e=>{switch(e.type){case"ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES":case"UPDATE_PRESET_WITH_CURRENT_STYLES":case"ADD_NEW_OPTION_GROUP_PRESET_FROM_CURRENT_STYLES":case"UPDATE_OPTION_GROUP_PRESET_WITH_CURRENT_STYLES":{const{attrs:t,moduleId:r}=e,o=(0,p.flattenAttrs)(t),s=Object.keys(o);(0,l.dispatch)("divi/edit-post").removeModuleAttributes({id:r,attrNames:s});break}}},lt=(e,t)=>{switch(e.type){case"ADD_NEW_OPTION_GROUP_PRESET":case"CLONE_OPTION_GROUP_PRESET":case"ADD_NEW_OPTION_GROUP_PRESET_FROM_CURRENT_STYLES":{const{groupName:r,groupId:o,moduleId:s}=e,n=t.getState().getIn(["presets"])?.asMutable({deep:!0}),{items:a}=n,i=a?.group?.[r]?.items,u=(0,p.getLastCreatedPresetId)({presets:i});if(!u)break;if((0,l.select)("divi/global-data").isActivePreset()){const e=(0,l.select)("divi/edit-post").getModule(s),t=e?.props?.attrs,n=e?.name,a=(0,p.maybeConvertPresetModuleName)(n,t),i=(0,l.select)("divi/global-data").getEditingPresetId();i&&a&&(0,l.dispatch)("divi/global-data").editModulePresetGroupPresets({moduleName:a,presetId:i,groupId:o,groupName:r,groupPresetId:u});break}const d=(0,l.select)("divi/edit-post").getModule(s)?.props?.attrs,c=d?.groupPreset,g=c?.[o],m=g?.presetId,f=(0,p.addPresetToStack)(m,u);(0,l.dispatch)("divi/edit-post").editGroupPresetAttr({id:s,attrName:o,value:{presetId:f,groupName:r}});break}}},ut=(e,t)=>{switch(e.type){case"ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES":case"ADD_NEW_MODULE_PRESET":case"CLONE_MODULE_PRESET":{const{moduleId:r,moduleName:o}=e,s=t.getState().getIn(["presets"])?.asMutable({deep:!0}),{items:n}=s,a=n?.module?.[o]?.items,i=(0,p.getLastCreatedPresetId)({presets:a});i&&(0,l.dispatch)("divi/global-data").startPresetEditSession({presetType:"module",moduleName:o,presetId:i});const u=(0,l.select)("divi/edit-post").getModule(r)?.props?.attrs?.modulePreset,d=(0,p.addPresetToStack)(u,i);(0,l.dispatch)("divi/edit-post").editModuleAttribute({id:r,attrName:"modulePreset",value:d,subName:!1});break}}},dt=e=>{switch(e.type){case"CLOSE_PRESET_MODAL":{const e=(0,l.select)("divi/global-data").getOptionGroupPresetEditMode()?.isPresetActive;e&&(0,l.dispatch)("divi/global-data").endPresetEditSession(!0,"group"),(0,l.dispatch)("divi/global-data").endPresetEditSession(!0,"module"),(0,l.dispatch)("divi/history").endPresetSession();const t=(0,l.select)("divi/edit-post").getContent()?.asMutable({deep:!0}),r=(0,p.populateUsedGroupPresets)(t);(0,l.dispatch)("divi/edit-post").updateUsedPresets({presetType:"group",presets:r});break}case"CLOSE_OPTION_GROUP_PRESET_EDIT_MODE":{(0,l.dispatch)("divi/global-data").endPresetEditSession(!0,"group"),(0,l.dispatch)("divi/history").endPresetSession();const e=(0,l.select)("divi/edit-post").getContent()?.asMutable({deep:!0}),t=(0,p.populateUsedGroupPresets)(e);(0,l.dispatch)("divi/edit-post").updateUsedPresets({presetType:"group",presets:t});break}}},pt=(e,t)=>{const r=t.getState().getIn(["presets"]).asMutable({deep:!0}),{optionGroupPreset:o}=r,{groupId:s,groupName:n}=o||{},a=r?.isActive;switch(e.type){case"OPEN_PRESET_MODAL":{a&&o?.isPresetActive&&(0,l.dispatch)("divi/global-data").closeOptionGroupPresetEditMode({groupId:s,groupName:n}),(0,l.dispatch)("divi/global-data").startPresetEditSession({presetType:"module"}),(0,l.dispatch)("divi/history").startPresetSession();const e=t.getState().getIn(["presets","items"]);(0,l.dispatch)("divi/history").addPresetSessionItem({presetItems:e,timestamp:Date.now()});break}case"SET_OPTION_GROUP_PRESET_EDIT_MODE":{e?.lastActiveGroupId&&s!==e?.lastActiveGroupId&&n!==e?.lastActiveGroupName&&(0,l.dispatch)("divi/global-data").endPresetEditSession(!0,"group",e?.lastActiveGroupName),(0,l.dispatch)("divi/global-data").startPresetEditSession({presetType:"group"}),(0,l.dispatch)("divi/history").startPresetSession();const r=t.getState().getIn(["presets","items"]);(0,l.dispatch)("divi/history").addPresetSessionItem({presetItems:r,timestamp:Date.now()});break}}};var ct=window.divi.rest;function gt(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var mt=e=>Array.isArray(e)?e:[e];function ft(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const r=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function bt(e,t){const r=[],{length:o}=e;for(let s=0;s<o;s++)r.push(e[s].apply(null,t));return r}Symbol(),Object.getPrototypeOf({});var It="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function Et(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:o}=t;let s,n=0;function a(){let t=r;const{length:a}=arguments;for(let e=0,r=a;e<r;e++){const r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const o=e.get(r);void 0===o?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=o}else{let e=t.p;null===e&&(t.p=e=new Map);const o=e.get(r);void 0===o?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=o}}const i=t;let l;if(1===t.s?l=t.v:(l=e.apply(null,arguments),n++),i.s=1,o){const e=s?.deref?.()??s;null!=e&&o(e,l)&&(l=e,0!==n&&n--);s="object"==typeof l&&null!==l||"function"==typeof l?new It(l):l}return i.v=l,l}return a.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>n,a.resetResultsCount=()=>{n=0},a}function yt(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,o=(...e)=>{let t,o=0,s=0,n={},a=e.pop();"object"==typeof a&&(n=a,a=e.pop()),gt(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const i={...r,...n},{memoize:l,memoizeOptions:u=[],argsMemoize:d=Et,argsMemoizeOptions:p=[],devModeChecks:c={}}=i,g=mt(u),m=mt(p),f=ft(e),b=l((function(){return o++,a.apply(null,arguments)}),...g);const I=d((function(){s++;const e=bt(f,arguments);return t=b.apply(null,e),t}),...m);return Object.assign(I,{resultFunc:a,memoizedResultFunc:b,dependencies:f,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>t,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:l,argsMemoize:d})};return Object.assign(o,{withTypes:()=>o}),o}var Pt=yt(Et),Ot=Object.assign(((e,t=Pt)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e);return t(r.map((t=>e[t])),((...e)=>e.reduce(((e,t,o)=>(e[r[o]]=t,e)),{})))}),{withTypes:()=>Ot});const _t=Pt([e=>e.getIn(["presets"])],(e=>e.getIn(["confirmationModal"]))),Tt=Pt([e=>e.getIn(["presets"])],(e=>e.getIn(["optionGroupConfirmationModal"]))),vt=(e,t)=>e.getIn(["globalColors",t]);var St=window.vendor.wp.i18n;const At=Pt([e=>e],(e=>{const t=e.getIn(["globalColors"],{}),r=["gcid-primary-color","gcid-secondary-color","gcid-heading-color","gcid-body-color"],o=[],s=[];Object.keys(t).forEach((e=>{const n=t[e];if("active"===n?.status)if(r.includes(e))o.push(n?.id||e);else{const t=Number(n?.order),r=Number.isFinite(t)?t:999;s.push({id:n?.id||e,order:r})}})),s.sort(((e,t)=>e.order-t.order));const n=[...o,...s.map((e=>e.id))];return{id:"global",title:(0,St.__)("Global","et_builder"),colors:n,configurable:!0,expandable:!1,priority:2,requiresColorUpdateConfirmation:!0,saveChangedColorOnSubmit:!0,addColor:{store:"divi/global-data",actionType:"dispatch",actionName:"addGlobalColor",params:["color"]},deleteColor:{store:"divi/global-data",actionType:"dispatch",actionName:"deleteGlobalColor",params:["colorId"]},updateColor:{store:"divi/global-data",actionType:"dispatch",actionName:"updateGlobalColor",params:["colorId","color"]},getColorValue:{store:"divi/global-data",actionType:"select",actionName:"getGlobalColorValue",params:["colorId","activeOnly"]},getRenderableValue:{store:"divi/global-data",actionType:"select",actionName:"getRenderableValue",params:["colorId","color"]},getGlobalColorLabel:{store:"divi/global-data",actionType:"select",actionName:"getGlobalColorLabel",params:["colorId"]},isGlobalColorRemovable:{store:"divi/global-data",actionType:"select",actionName:"isGlobalColorRemovable",params:["colorId"]},getColorIdFromValue:L,removePreviewColor:{store:"divi/global-data",actionType:"dispatch",actionName:"removeGlobalColorPreviewValue",params:["colorId"]},setPreviewColor:{store:"divi/global-data",actionType:"dispatch",actionName:"setGlobalColorPreviewValue",params:["colorId","color"]}}})),Nt=e=>e.getIn(["globalColors"],{}),ht=e=>e.getIn(["legacyGlobalColors"],{}),Rt=e=>e.getIn(["previewGlobalColors"],{}),Gt=Pt([e=>e,(e,t)=>t],((e,t)=>{const r=["active","inactive","temporary"].filter((e=>e!==t));return e.getIn(["globalColors"]).without((e=>e&&r.includes(e.status)))}));var Lt=r(53316),Dt=r.n(Lt);const Ct=Pt([e=>e.getIn(["globalColors"]),(e,t)=>t],Dt()(((e,t)=>{const r=(0,n.asMutable)(e,{deep:!0}),o=(0,s.pickBy)(r,((e,r)=>(0,s.includes)(t,r)));return Object.entries(o).map((([e,t])=>t?[e,{color:t.color,status:t.status,label:t.label||""}]:[e,{color:"",status:"inactive"}]))}))),Mt=Pt([e=>e.getIn(["globalVariables"]),(e,t)=>t],Dt()(((e,t)=>t.map((t=>{const r=Object.keys(e).find((r=>{const o=e[r];return t in o}));return r?(0,s.omit)({...e[r][t],type:r},["allowedActions"]):null}))))),wt=Pt([e=>e,(e,t)=>t,(e,t,r)=>r],((e,t,r=!1)=>{const o=e.getIn(["globalColors",t]);return!o||r&&"active"!==o.status?"":o.color})),Ut=Pt([e=>e.getIn(["presets","items"]),(e,t)=>t],((e,{presetSubType:t,presetType:r="module"})=>{const o=e?.getIn([r,t,"default"]);return o})),Vt=Pt([e=>e.getIn(["presets","items"]),(e,t)=>t,(e,t)=>Ut(e,{presetSubType:t.presetSubType,presetType:t.presetType})],((e,{presetSubType:t,presetType:r="module"},o)=>{const s=e?.getIn([r,t,"items",o]);return s})),kt=Pt([(e,t)=>{const{moduleName:r,id:o,presetType:s="module"}=t;return e.getIn(["presets","items",s,r,"items",o])},(e,t)=>t,(e,t)=>Vt(e,{presetSubType:t.moduleName})],((e,{useDefaultFallback:t},r)=>t&&!e?r:e),{memoizeOptions:{resultEqualityCheck:s.isEqual}}),jt=Pt([e=>e,(e,t)=>t],((e,{moduleName:t,presetIds:r,useDefaultFallback:o=!0})=>{const s=(0,p.normalizePresetStack)(r);if(0===s.length){if(o){const r=Ut(e,{presetSubType:t,presetType:"module"});if(r){const o=kt(e,{moduleName:t,id:r,useDefaultFallback:!1});return o?.attrs?{attrs:o.attrs}:null}}return null}const n=(0,p.mergePresetStack)({presetIds:s,getPreset:r=>kt(e,{moduleName:t,id:r,useDefaultFallback:!1}),extractAttrs:e=>{if(!e?.attrs)return null;return"object"==typeof e.attrs&&"asMutable"in e.attrs?e.attrs.asMutable({deep:!0}):e.attrs}});if(!n&&o){const r=kt(e,{moduleName:t,id:s[0],useDefaultFallback:!0});return r?{attrs:r.attrs}:null}return n?{attrs:a()(n)}:null})),Bt=Pt([e=>e,(e,t)=>t],((e,{moduleName:t,presetIds:r,useDefaultFallback:o=!0})=>{const s=(0,p.normalizePresetStack)(r);if(0===s.length){if(o){const r=Ut(e,{presetSubType:t,presetType:"module"});if(r){const o=kt(e,{moduleName:t,id:r,useDefaultFallback:!1});return o?.renderAttrs?{renderAttrs:o.renderAttrs}:null}}return null}const n=(0,p.mergePresetStack)({presetIds:s,getPreset:r=>kt(e,{moduleName:t,id:r,useDefaultFallback:!1}),extractAttrs:e=>{if(!e?.renderAttrs)return null;return"object"==typeof e.renderAttrs&&"asMutable"in e.renderAttrs?e.renderAttrs.asMutable({deep:!0}):e.renderAttrs}});if(!n&&o){const r=kt(e,{moduleName:t,id:s[0],useDefaultFallback:!0});return r?{renderAttrs:r.renderAttrs}:null}return n?{renderAttrs:a()(n)}:null})),Ft={},$t=(e,t)=>{const{presets:r}=t;return(0,s.forEach)(Ft,((e,t)=>{delete Ft[t]})),(0,s.forEach)(r,((t,r)=>{const o=kt(e,t);o&&(Ft[r]=o)})),Ft},xt=Pt([e=>e.getIn(["presets","items"]),(e,t)=>t],((e,{moduleName:t,presetType:r="module"})=>{const o=e?.getIn([r,t,"items"]);return o}),{memoizeOptions:{resultEqualityCheck:s.isEqual}}),Wt=Pt([e=>e.getIn(["presets","items"]),(e,t)=>t],((e,{moduleName:t,id:r,attrName:o,presetType:s="module"})=>{const n=e?.getIn([s,t,"items",r,"attrs"]);return n?.getIn(o.split("."))})),zt=(e,t,r)=>"active"===e.getIn(["globalColors",t,"status"],"")?`var(--${t})`:e.getIn(["globalColors",t,"color"],r),Yt=(e,t)=>{const r=e.getIn(["globalColors",t,"color"],"");return e.getIn(["globalColors",t,"label"],r)||r},Kt=(e,t)=>"customizer"!==e.getIn(["globalColors",t,"folder"],""),qt=Pt([e=>e.getIn(["presets","confirmationModal"])],(e=>e.getIn(["isVisible"]))),Ht=Pt([e=>e.getIn(["presets","optionGroupConfirmationModal"])],(e=>e.getIn(["isVisible"]))),Jt=(e,t)=>{const r=L({value:t});return(0,s.isEmpty)(r)?null:e.getIn(["globalColors",r])},Zt=(e,t)=>"active"===e.getIn(["globalColors",t,"status"]),Qt=e=>e.getIn(["isGlobalColorEditing"],!1),Xt=Pt([e=>e.getIn(["presets"])],(e=>e.getIn(["isActive"]))),er=Pt([e=>e.getIn(["presets"])],(e=>e.getIn(["editingPresetId"]))),tr=Pt([e=>e.getIn(["presets"])],(e=>e.getIn(["optionGroupPresetModal","isOptionGroupModalOpen"]))),rr=Pt([e=>e.getIn(["presets","attrsMapping"])],(e=>e?.getIn(["jobs"]))),or=Pt([e=>e.getIn(["presets","attrsMapping","maps"]),(e,t)=>t],((e,t)=>e?.getIn([t]))),sr=Pt([e=>e.getIn(["presets","defaultOnSave"]),(e,t)=>t],((e,t)=>{const r=e?.getIn([t.presetType,t.presetSubType]);return r})),nr=Pt([e=>e.getIn(["presets"])],(e=>e.getIn(["isSyncing"]))),ar=Pt([e=>e.getIn(["presets"])],(e=>e.getIn(["syncingPresetType"]))),ir=Pt([e=>e.getIn(["presets","items"]),(e,t)=>t],((e,t)=>{const r=t?.presetType??"module";return e?.getIn([r])})),lr=Pt([e=>e.getIn(["presets"])],(e=>!!e.getIn(["showPresetSaveConfirmationDialog"]))),ur=e=>e.getIn(["previewGlobalColors"],{}),dr=Pt([e=>e.getIn(["previewGlobalColors"]),e=>e.getIn(["globalColors"]),(e,t)=>t,e=>e],((e,t,r,o)=>{if("string"!=typeof r||(0,s.isEmpty)(r))return null;if(r.startsWith("var(--")&&(r=L({value:r})),(0,s.isEmpty)(r))return null;const n=e.getIn([r]),a=t.getIn([r]);let i=null;return n?.color?i=n.color:a?.color&&(i=a.color),i?U(i,"color")?Y(o,i):i:null})),pr=(e,t)=>(t?.globalColorIds??[]).reduce(((t,r)=>({...t,[r]:dr(e,r)})),{}),cr=Pt([e=>e.getIn(["presets"])],(e=>{const t=e?.getIn(["optionGroupPresetModal"]);return t})),gr=Pt([e=>e.getIn(["presets","items","group"]),(e,t)=>t,(e,t)=>Vt(e,{presetSubType:t.groupName,presetType:"group"})],((e,{groupName:t,id:r,useDefaultFallback:o,segmentBoundary:s},n)=>{const i=(e=>{if(!e)return e;const t=e.getIn(["id"]);return Array.isArray(t)||null==t?e:e.setIn(["id"],[t])})(n);if(!e)return o?i:[][0];const l=e.getIn([t]);if(!l)return o?i:[][0];const u=(0,p.normalizePresetStack)(r);if(0===u.length)return o?i:[][0];const d=(0,p.mergePresetStack)({presetIds:u,getPreset:e=>l.getIn(["items",e]),segmentBoundary:s,toImmutable:e=>(e.id=u,a()(e))});return d||(o?i:[][0])})),mr=Pt([e=>e.getIn(["presets","items","group"]),(e,t)=>t,(e,t)=>Vt(e,{presetSubType:t.groupName,presetType:"group"})],((e,{groupName:t,presetId:r,useDefaultFallback:o},s)=>{let n;if(!e)return n=o?s:[][0],n;const a=e.getIn([t]);if(!a)return n=o?s:[][0],n;const i=a.getIn(["items",r]);return i||(n=o?s:[][0],n)})),fr=Pt([e=>e,(e,t)=>t],((e,t)=>{const{presets:r}=t,o={};return(0,s.forEach)(r,((t,r)=>{const s=gr(e,t);s&&(o[r]=s)})),o}),{memoizeOptions:{resultEqualityCheck:s.isEqual}}),br=Pt([e=>e.getIn(["presets","items"]),(e,t)=>t],((e,{groupName:t})=>e.getIn(["group",t,"items"])),{memoizeOptions:{resultEqualityCheck:s.isEqual}}),Ir=Pt([e=>e.getIn(["presets"]),(e,t)=>t,(e,t,r)=>r],((e,t,r)=>{const o=e.getIn(["optionGroupPreset","isPresetActive"]),s=e.getIn(["optionGroupPreset","groupId"]),n=e.getIn(["optionGroupPreset","groupName"]);return o&&s===t&&n===r})),Er=Pt([e=>e.getIn(["presets"])],(e=>{const t=e?.getIn(["optionGroupPreset"]);return t})),yr=e=>{const t=e.getIn(["presets","items","group"]),r=[];return(0,s.forEach)(t,((e,t)=>{if(!e)return;const o=e.getIn(["default"]);if(!o)return;const n=e.getIn(["items",o]);(0,s.isEmpty)(n?.attrs)||r.push(t)})),r},Pr=Pt([e=>e.getIn(["presets"])],(e=>!!e.getIn(["optionGroupPreset","showSaveConfirmationDialog"]))),Or=(e,t,r=!1)=>{const o=e.getIn(["globalVariables"]);if((0,s.isEmpty)(o))return null;const n=Object.keys(o).find((e=>{const r=o[e];return t in r})),a=n?o[n][t]:null;if(!r||!a)return a;const i=(t,r=new Set)=>{if(r.has(t.id))return t;r.add(t.id);const{value:o}=t;if("string"==typeof o&&o.includes("$variable(")){const s=((e,t)=>{if("string"!=typeof e||!e.includes("$variable("))return!1;const r=/\$variable\((.+?)\)\$/.exec(e);if(r)try{return JSON.parse(r[1])}catch(r){return console.warn("Failed to parse $variable reference in global variable:",t||e,r),!1}return!1})(o,t.id);if(s){const n=s?.value?.name;if(n&&n!==t.id){const a=Or(e,n,!1);if(a){if("color"===s.type){const r=Y(e,o);return t.merge({value:r})}return i(a,r)}}}}return t};return i(a)},_r=(e,t)=>{const r=e.getIn(["globalVariablesBackup"]);return(0,s.isEmpty)(r)?null:r[t]},Tr=e=>e.getIn(["globalVariables"]),vr=Pt([e=>e],(e=>{const t=Gt(e,"active"),r={};return Object.keys(t).forEach((o=>{const s=t[o];if(s&&"string"==typeof s?.color){const t=dr(e,o);r[o]=t||s.color}})),r})),Sr=(e,t)=>{const r=t.getState(),o=Nt(r);(0,ct.loggedFetch)({method:"POST",restRoute:"/divi/v1/global-data/global-colors",data:{global_colors:o}},!0).catch((e=>{console.log(e)}))},Ar=(e,t)=>{const r=Object.keys(e??{}).reduce(((r,o)=>(r[o]=(({data:e,presetType:t,itemModifier:r})=>Object.keys(e??{}).reduce(((o,s)=>{const n=e[s],a=Object.values(n?.items??{}),i={default:n?.default,items:a};return r?o.concat(r(i,t)):o.concat(i)}),[]))({data:e[o],presetType:o,itemModifier:t}),r)),{});return r};var Nr=window.divi.window;const hr=e=>{if(!(e=>Object.keys(e).some((t=>{const r=e[t];return!!Array.isArray(r)&&r.some((e=>!(!e.items||!Array.isArray(e.items))&&e.items.some((e=>!e.created||!e.updated))))})))(e))return e;const t=Math.floor(Date.now()/1e3);let r=0;const o={...e};return Object.keys(o).forEach((e=>{const s=o[e];Array.isArray(s)&&(o[e]=s.map((e=>e.items&&Array.isArray(e.items)?{...e,items:e.items.map((e=>{let o=!1;const s={...e};if(s.created||(s.created=t,o=!0),s.updated||(s.updated=t,o=!0),o&&(r++,"undefined"!=typeof window&&window.console?.debug)){const t=e.name||"Unknown",r=e.id||"Unknown";window.console.debug(`Divi: Fixed legacy preset '${t}' (ID: ${r}) - added missing timestamps`)}return s}))}:e)))})),"undefined"!=typeof window&&window.console?.debug&&r>0&&window.console.debug(`Divi: Successfully fixed ${r} legacy presets with missing timestamp fields`),o};var Rr=window.vendor.React,Gr=r.n(Rr);const Lr=({error:e,onRetry:t,onDownloadBackup:r})=>{const o=()=>{const e=(0,Rr.createElement)("p",null,(0,St.__)("An error has occurred while saving the Global Presets settings. Various problems can cause a save to fail, such as a lack of server resources, firewall blockages or plugin conflicts or server misconfiguration. You can try saving again by clicking Try Again, or you can download a backup of your unsaved defaults by clicking Download Backup. A backup can be helpful when contacting our Support Team.","et_builder"));(0,l.dispatch)("divi/modal-library").open({name:"divi/alert",centered:!0,dimension:{width:320,height:400},attributes:{title:(0,St.__)("Save of Global Presets Has Failed","et_builder"),content:e,footerButtons:[{name:"primary",label:(0,St.__)("Try Again","et_builder"),onClick:e=>{e.preventDefault(),t()}},{name:"secondary",label:(0,St.__)("Download Backup","et_builder"),onClick:e=>{e.preventDefault(),r()}}],centered:!0}})};e instanceof Response?(async e=>{const t=await e.text();return JSON.parse(t)})(e).then((e=>{console.error(e.message),o()})).catch((()=>{console.error(e),o()})):e instanceof Error?(console.error(e?.message),"AbortError"!==e.name&&o()):(console.error(e),o())},Dr=["attrs","styleAttrs","renderAttrs"],Cr=({schema:e,presetType:t,defaultOnSave:r})=>(r?.[t]&&(e=(({schema:e,presetType:t,defaultOnSave:r})=>{const o=r?.[t];if(o){const t=e.items.find((e=>{switch(e.type){case"module":return e.id===o?.[e.moduleName];case"group":return e.id===o?.[e.groupName];default:return!1}}));t&&(e={...e,default:t.id})}else!e.default&&e.items.length&&(e={...e,default:e.items[0].id});return e})({schema:e,presetType:t,defaultOnSave:r})),e=(({schema:e})=>{const t=[...e.items];return{...e,items:t.map((e=>{let t={...e};return Dr.forEach((r=>{switch(r){case"attrs":case"styleAttrs":case"renderAttrs":if((0,s.has)(e,r)){const o=(0,p.removeEmptyObjectRecursive)(e[r]);(0,s.isEmpty)(o)?delete t[r]:(0,s.isEqual)(o,e[r])||(t={...t,[r]:o})}}})),t}))}})({schema:e}));let Mr;const wr=(e,t)=>{const r=()=>{t.getState().getIn(["presets","isSyncingError"])&&(0,l.dispatch)("divi/modal-library").close({name:"divi/alert"})},o=()=>{Mr?.abort&&Mr.abort()},n=({endEditMode:r=!0,presetsType:n="",isAddingPreset:i=!1,groupName:u,groupId:d,moduleName:c})=>{o(),(0,l.dispatch)("divi/global-data").startSyncingPreset({presetType:n||""}),Mr=new AbortController;const g=t.getState().getIn(["presets","items"])?.asMutable({deep:!0});let m=g;if("group"===n&&!r){const e=t.getState().getIn(["presets","restorePoint"])?.asMutable({deep:!0});t.getState().getIn(["presets","isActive"])&&e?.module&&(m={...g,module:e.module})}const f=t.getState().getIn(["presets","defaultOnSave"]),b=Ar(m,((e,t)=>Cr({schema:e,presetType:t,defaultOnSave:f}))),I=hr(b);(0,ct.fetch)({restRoute:"/divi/v1/global-data/global-preset/sync",method:"POST",data:{presets:I,actionType:e.type},signal:Mr.signal}).then((e=>{const t=a()(e).asMutable({deep:!0});if((0,l.dispatch)("divi/global-data").endSyncingPreset(!1),f&&(0,l.dispatch)("divi/global-data").unsetDefaultPresetOnSave(),(0,s.isEqual)(m,t)||(0,l.dispatch)("divi/global-data").overridePresetData(t),(0,l.dispatch)("divi/global-data").closeConfirmationModal(),(0,l.dispatch)("divi/global-data").closeOptionGroupConfirmationModal(),r)(0,l.dispatch)("divi/global-data").endPresetEditSession(!1,n),(0,l.dispatch)("divi/global-data").closePresetModal(),(0,l.dispatch)("divi/global-data").closeOptionGroupPresetEditMode(),(0,l.dispatch)("divi/history").endPresetSession();else if("group"===n)if(i){if(u&&d){const e=t?.group?.[u]?.items;let r;if(e){const t=Object.keys(e).map((t=>e[t].created)),o=Math.max(...t);r=Object.keys(e).find((t=>e[t].created===o))}(0,l.dispatch)("divi/global-data").setOptionGroupPresetEditMode({groupId:d,groupName:u,presetId:r,enabled:!0})}}else(0,l.dispatch)("divi/global-data").endPresetEditSession(!1,"group"),(0,l.dispatch)("divi/global-data").closeOptionGroupPresetEditMode();else if("module"===n)if((0,l.dispatch)("divi/global-data").endPresetEditSession(!1,"module"),i&&c){const e=t?.module?.[c]?.items;let r;if(e){const t=Object.keys(e).map((t=>e[t].created)),o=Math.max(...t);r=Object.keys(e).find((t=>e[t].created===o))}(0,l.dispatch)("divi/global-data").startPresetEditSession({presetType:"module",moduleName:c,presetId:r})}else(0,l.dispatch)("divi/global-data").startPresetEditSession({presetType:"module"});else(0,l.dispatch)("divi/global-data").endPresetEditSession(!1),(0,l.dispatch)("divi/global-data").startPresetEditSession()})).catch((r=>{(0,l.dispatch)("divi/global-data").endSyncingPreset(!0),Lr({error:r,onRetry:()=>{wr(e,t)},onDownloadBackup:()=>{(async e=>{const t=(0,p.extractGlobalColorIdsUsedInPresets)(e),r=(0,p.extractGlobalVariablesIdsUsedInPresets)(e),o=(0,l.select)("divi/global-data").getGlobalColors(),s=J(t,o),n=(0,l.select)("divi/global-data").getGlobalColorsToExport(s),a=(0,l.select)("divi/global-data").getGlobalVariablesToExport(r),i={context:"et_builder",data:[],presets:e,global_colors:n,global_variables:await(0,p.convertImagesInVariables)(a),images:{},thumbnails:{}},u=JSON.stringify(i),d=new Blob([u],{type:"application/json"}),c=URL.createObjectURL(d),g=Nr.topWindow.document.createElement("a");g.style.display="none",g.download="global-defaults-backup.json",g.href=c,Nr.topWindow.document.body.appendChild(g),g.click(),setTimeout((()=>{URL.revokeObjectURL(c),g.parentNode.removeChild(g)}),500)})(m).catch((()=>{}))}})}))};switch(e.type){case"ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES":case"ADD_NEW_MODULE_PRESET":case"CLONE_MODULE_PRESET":{r(),(0,l.dispatch)("divi/global-data").openPresetModal();const{moduleName:t}=e;n({endEditMode:!1,presetsType:"module",isAddingPreset:!0,moduleName:t});break}case"ASSIGN_OPTION_GROUP_PRESET_TO_DEFAULT":r(),(0,l.dispatch)("divi/global-data").closeOptionGroupPresetModal(),n({});break;case"ADD_NEW_OPTION_GROUP_PRESET_FROM_CURRENT_STYLES":case"ADD_NEW_OPTION_GROUP_PRESET":case"CLONE_OPTION_GROUP_PRESET":{r();const{groupName:t,groupId:o}=e;n({endEditMode:!1,presetsType:"group",isAddingPreset:!0,groupName:t,groupId:o});break}case"ASSIGN_PRESET_TO_DEFAULT":case"DELETE_MODULE_PRESET":case"DELETE_OPTION_GROUP_PRESET":case"UPDATE_PRESET_WITH_CURRENT_STYLES":case"IMPORT_PRESETS":r(),n({});break;case"SAVE_PRESET":{r();const o=t.getState().getIn(["presets","isActive"]),s=t.getState().getIn(["presets","optionGroupPreset","isPresetActive"]),a=e.level;o&&s?"group"===a?n({endEditMode:!1,presetsType:"group"}):((0,l.dispatch)("divi/global-data").endPresetEditSession(!0,"group"),n({endEditMode:!0})):n({});break}case"UPDATE_OPTION_GROUP_PRESET_WITH_CURRENT_STYLES":r();n(t.getState().getIn(["presets","isActive"])?{endEditMode:!1,presetsType:"group"}:{});break;case"CLOSE_PRESET_MODAL":r(),o()}},Ur=(0,s.debounce)(at,500),Vr=(e,t)=>{"caller"in e&&"history"===e.caller?at(0,t):Ur(e,t)},kr={ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES:[ut,it,wr],ADD_NEW_MODULE_PRESET:[ut,wr],ASSIGN_PRESET_TO_DEFAULT:[wr],CLONE_MODULE_PRESET:[ut,wr],CLOSE_PRESET_MODAL:[dt,wr],DELETE_MODULE_PRESET:[wr],OPEN_PRESET_MODAL:[pt],UPDATE_PRESET_WITH_CURRENT_STYLES:[it,wr],ADD_NEW_OPTION_GROUP_PRESET_FROM_CURRENT_STYLES:[lt,it,wr],ADD_NEW_OPTION_GROUP_PRESET:[lt,wr],ASSIGN_OPTION_GROUP_PRESET_TO_DEFAULT:[wr],CLONE_OPTION_GROUP_PRESET:[lt,wr],CLOSE_OPTION_GROUP_PRESET_EDIT_MODE:[dt,wr],DELETE_OPTION_GROUP_PRESET:[wr],SET_OPTION_GROUP_PRESET_EDIT_MODE:[pt],UPDATE_OPTION_GROUP_PRESET_WITH_CURRENT_STYLES:[it,wr],EDIT_MODULE_PRESET_GROUP_PRESETS:[e=>{if("EDIT_MODULE_PRESET_GROUP_PRESETS"!==e.type)return;const t=(0,l.select)("divi/edit-post").getContent()?.asMutable({deep:!0}),r=(0,p.populateUsedGroupPresets)(t);(0,l.dispatch)("divi/edit-post").updateUsedPresets({presetType:"group",presets:r})}],EDIT_PRESET_ATTRIBUTE:[Vr,e=>{if(!e.attrName.startsWith("module.decoration.layout"))return;const{presetType:t}=e;let r=!1;if("group"===t){r=(0,l.select)("divi/global-data").getOptionGroupPresetEditMode()?.isPresetActive||!1}else"module"===t&&(r=(0,l.select)("divi/global-data").isActivePreset());if(!r)return;const o=(0,l.select)("divi/modal-library").getModalProperty({modalName:"divi/module",property:"owner"});if(!o)return;const s=(0,l.select)("divi/edit-post").getModule(o);if(!s||"divi/row"!==s.name&&"divi/row-inner"!==s.name)return;let n;if("module.decoration.layout.desktop.value.display"!==e.attrName)return;if(n=e.attrValue,!n||"flex"!==n&&"block"!==n&&"grid"!==n)return;const a=(0,l.select)("divi/edit-post").getChildModules(o),i=Object.keys(a).length;if(0===i)return;let u;if("block"===n){const e=Math.min(i,6);u=1===e?"4_4":Array(e).fill(`1_${e}`).join(",")}else{if("grid"!==n)return;u=`${Math.min(i,12)}`}(0,l.dispatch)("divi/edit-post").changeColumnStructure(o,u,"preset")}],SAVE_PRESET:[wr],IMPORT_PRESETS:[e=>{switch(e.type){case"IMPORT_PRESETS":{const e=(0,l.select)("divi/edit-post").getContent()?.asMutable({deep:!0}),t=(0,p.populateUsedPresets)(e),r=(0,p.populateUsedGroupPresets)(e);(0,l.dispatch)("divi/edit-post").updateUsedPresets({presetType:"module",presets:t}),(0,l.dispatch)("divi/edit-post").updateUsedPresets({presetType:"group",presets:r});break}}},wr],ADD_GLOBAL_COLOR:[Sr],DELETE_GLOBAL_COLOR:[Sr,()=>{const e=(0,l.select)("divi/global-data").getGlobalColors();(0,l.dispatch)("divi/edit-post").syncModuleGlobalColors(e)}],IMPORT_GLOBAL_COLORS:[Sr,()=>{V()&&(0,l.dispatch)("divi/global-data").updateGlobalVariablesBackup()}],UPDATE_GLOBAL_COLOR:[Sr],UPDATE_GLOBAL_COLORS_USED_IN_POSTS:[Sr],UPDATE_GLOBAL_COLORS:[Sr],SAVE_GLOBAL_VARIABLES:[(e,t)=>{const r=t.getState(),o=Tr(r);(0,ct.loggedFetch)({method:"POST",restRoute:"/divi/v1/global-data/global-variables",data:{global_variables:o}},!0).catch((e=>{console.log(e)}))}]},jr={SET_OPTION_GROUP_PRESET_EDIT_MODE:[()=>e=>t=>{const r=(0,l.select)("divi/global-data").getOptionGroupPresetEditMode(),o=r?.groupId,s=r?.groupName;t.lastActiveGroupId=o,t.lastActiveGroupName=s;return e(t)}]},Br=(e,t)=>{switch(t.type){case"ADD_GLOBAL_COLOR":return((e,t,r,o,n="active")=>{if((0,s.isEmpty)(t)||M(t))return e;const a={id:r,color:t,status:n,lastUpdated:o,usedInPosts:[]};return e.setIn(["globalColors",a.id],{...a})})(e,t.color,t.id,t.lastUpdated,t.status);case"DELETE_GLOBAL_COLOR":return((e,t)=>{const r=e.getIn(["globalColors",t]);return r?e.setIn(["globalColors",t],{...r,lastUpdated:(new Date).toISOString(),status:"inactive"}):e})(e,t.id);case"IMPORT_GLOBAL_COLORS":return((e,t,r)=>{const o=e.getIn(["globalColors"]),n={};return(0,s.forEach)(t,(e=>{!o[e]&&r[e]&&(n[e]=r[e])})),(0,s.isEmpty)(n)?e:e.setIn(["globalColors"],{...o,...n})})(e,t.ids,t.data);case"UPDATE_GLOBAL_COLOR":return((e,t,r)=>{const o=e.getIn(["globalColors",t]);return!o||(0,s.isEmpty)(r)||M(r)?e:e.setIn(["globalColors",t],{...o,lastUpdated:(new Date).toISOString(),color:r})})(e,t.id,t.color);case"UPDATE_GLOBAL_COLORS":return((e,t)=>{const r=e.getIn(["globalColors"]);return(0,s.isEqual)(r,t)?e:e.setIn(["globalColors"],{...t})})(e,t.palette);case"UPDATE_GLOBAL_COLORS_USED_IN_POSTS":return((e,t,r,o)=>{let n=e.getIn(["globalColors"]);return r.forEach((r=>{const s=e.getIn(["globalColors",r,"usedInPosts"])?.asMutable()??[];s?.includes(t)||(n=n.setIn([r,"usedInPosts"],[...s,t]).setIn([r,"lastUpdated"],o))})),(0,s.forEach)(n,((e,a)=>{if((0,s.isObject)(e)){const s=e.getIn(["usedInPosts"])?.asMutable()??[];s.includes(t)&&!r.includes(a)&&(n=n.setIn([a,"usedInPosts"],s.filter((e=>e!==t))).setIn([a,"lastUpdated"],o))}})),e.setIn(["globalColors"],{...n})})(e,t.postId,t.globalColorIds,t.lastUpdated);case"SET_IS_GLOBAL_COLOR_EDITING":return((e,t)=>e.set("isGlobalColorEditing",t.isEditing))(e,t);case"REMOVE_GLOBAL_COLOR_PREVIEW_VALUE":return((e,t)=>e.setIn(["previewGlobalColors"],e.previewGlobalColors.without(t)))(e,t.colorId);case"SET_GLOBAL_COLOR_PREVIEW_VALUE":return((e,t,r)=>e.setIn(["previewGlobalColors",t],{colorId:t,color:r}))(e,t.colorId,t.color);case"OPEN_PRESET_MODAL":return((e,t)=>{let r=e.setIn(["presets","isActive"],!0);return t&&(r=r.setIn(["presets","editingPresetId"],t)),r})(e,t.presetId);case"CLOSE_PRESET_MODAL":return(e=>e.setIn(["presets"],e.getIn(["presets"]).without("editingPresetId").set("isActive",!1)))(e);case"EDIT_PRESET_ATTRIBUTE":return e.getIn(["presets","isSyncing"])?e:((e,{presetType:t,presetSubType:r,presetId:o,attrName:s,attrValue:n,updated:a,attrsGroup:i})=>{const l=["presets","items",t,r,"items",(0,p.getSelectedPresetOrDefault)([o],e.getIn(["presets","items",t,r,"default"])??"")];return Array.isArray(i)&&0<i.length&&(i.forEach((t=>{let r=l.concat(t);s&&(r=r.concat(s.split("."))),e=e.setIn(r,n)})),e=e.setIn(l.concat("updated"),a)),e})(e,{presetType:t.presetType,presetSubType:t.presetSubType,presetId:t.presetId,attrName:t.attrName,attrValue:t.attrValue,updated:t.updated,attrsGroup:t.attrsGroup});case"REMOVE_PRESET_ATTRIBUTE":return((e,{presetType:t,presetSubType:r,presetId:o,attrName:n,attrsGroup:a})=>{const i=["presets","items",t,r,"items",(0,p.getSelectedPresetOrDefault)([o],e.getIn(["presets","items",t,r,"default"])??"")],l=n.split("."),u=l[0];return a.forEach((t=>{const r=i.concat(t),o=r.concat(l),n=(0,s.slice)(o,0,o.length-1),a=e.getIn(n);if(!(0,s.isEmpty)(a)){const t=(0,s.last)(o),i=(e=e.setIn(n,a.without(t))).getIn(r),l=e.getIn(r.concat(u)),d=(0,p.removeEmptyObjectRecursive)(l?.asMutable({deep:!0}));(0,s.isEmpty)(d)?e=e.setIn(r,i.without(u)):(0,s.isEqual)(d,l?.asMutable({deep:!0}))||(e=e.setIn(r.concat(u),d))}})),e})(e,{presetType:t.presetType,presetSubType:t.presetSubType,presetId:t.presetId,attrName:t.attrName,attrsGroup:t.attrsGroup});case"EDIT_MODULE_PRESET_GROUP_PRESETS":return((e,{moduleName:t,presetId:r,groupId:o,groupName:n,groupPresetId:a,presetIdToRemove:i})=>{const l=["presets","items","module",t,"items",r],u=e.getIn(l);if(!u)return e;let d=u.getIn(["groupPresets"])?.asMutable({deep:!0})??{};const c=d[o];if(""===a)if(i&&c){const e=c.presetId,t=(0,p.removePresetFromStack)(e,i);0===t.length?delete d[o]:d[o]={presetId:t,groupName:n}}else delete d[o];else{const e=c?.presetId,t=(0,p.addPresetToStack)(e,a);d={...d,[o]:{presetId:t,groupName:n}}}if((0,s.isEmpty)(d)){const t=u.without("groupPresets");return e.setIn(l,t)}const g=u.setIn(["groupPresets"],d);return e.setIn(l,g)})(e,{moduleName:t.moduleName,presetId:t.presetId,groupId:t.groupId,groupName:t.groupName,groupPresetId:t.groupPresetId,presetIdToRemove:t.presetIdToRemove});case"ASSIGN_PRESET_TO_DEFAULT":return e.getIn(["presets","isSyncing"])?e:((e,t,r)=>{const o=["presets","items","module",r,"default"];return e.setIn(o,t)})(e,t.presetId,t.moduleName);case"ASSIGN_OPTION_GROUP_PRESET_TO_DEFAULT":return e.getIn(["presets","isSyncing"])?e:((e,{presetId:t,groupName:r})=>{const o=k({presetId:t,groupName:r,state:e});if(o===e.getIn(["presets","items","group",r,"default"]))return e;const s=e.getIn(["presets","items","group",r,"items"])?.getIn([o]);return s?e.setIn(["presets","items","group",r,"default"],t):e})(e,{presetId:t.presetId,groupName:t.groupName,groupId:t.groupId});case"DELETE_MODULE_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,t,r)=>{const o=e.getIn(["presets","items","module",r,"default"]),s=e.getIn(["presets","items","module",r,"items"]).without(t);let n=o;const a=Object.keys(s).length??0;if(o===t||1===a){const e=Object.values(s).sort(((e,t)=>e.created-t.created)).reduce(((e,t)=>({...e,[t.id]:t})),{});n=Object.keys(e)[0]??null}return e.setIn(["presets","items","module",r],{items:s,default:n})})(e,t.presetId,t.moduleName);case"DELETE_OPTION_GROUP_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,{presetId:t,groupName:r})=>{const o=k({presetId:t,groupName:r,state:e}),s=e.getIn(["presets","items","group",r,"items"]),n=s?.getIn([o]);if(!n)return e;const a=e.getIn(["presets","items","group",r,"default"]),i=s.without(t);let l=a;if(1===(Object.keys(i).length??0))l=Object.keys(i)[0]??null;else if(a===t){const e=Object.values(i).sort(((e,t)=>(e.created??0)-(t.created??0)))[0]?.id;l="string"==typeof e?e:null}return e.setIn(["presets","items","group",r],{items:i,default:l})})(e,{presetId:t.presetId,groupName:t.groupName});case"CLONE_MODULE_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,t,r,o)=>{const s=j({id:t,moduleName:r,state:e}),n=e.getIn(["presets","items","module",r,"items"])?.asMutable({deep:!0})??{},a=n[s],{id:i,name:l}=P(Object.values(n??{}).map((e=>e.name)),o),u={...a,id:i,name:l,created:Date.now(),updated:Date.now()};return e.setIn(["presets","items","module",r,"items",i],u)})(e,t.presetId,t.moduleName,t.moduleLabel);case"CLONE_OPTION_GROUP_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,{presetId:t,groupName:r,groupLabel:o})=>{const s=k({presetId:t,groupName:r,state:e}),n=e.getIn(["presets","items","group",r,"items"])?.getIn([s]);if(!n)return e;const a=e.getIn(["presets","items","group",r,"items"])?.asMutable({deep:!0}),i=Object.values(a??{}).map((e=>e.name)),{id:l,name:u}=P(i,o),d={...n,id:l,name:u,created:Date.now(),updated:Date.now()};return e.setIn(["presets","items","group",r,"items",l],d)})(e,{presetId:t.presetId,groupId:t.groupId,groupName:t.groupName,groupLabel:t.groupLabel,moduleId:t.moduleId});case"UPDATE_PRESET_WITH_CURRENT_STYLES":return e.getIn(["presets","isSyncing"])?e:((e,{presetId:t,moduleName:r,attrs:o,styleAttrs:n,renderAttrs:a,updated:i})=>{const l=j({id:t,moduleName:r,state:e}),u=e.getIn(["presets","items","module",r,"items"])?.getIn([l]),d=u?.getIn(["attrs"])?.asMutable({deep:!0})??{},p=(0,s.merge)({},d,o);(0,s.isEmpty)(p)||(e=e.setIn(["presets","items","module",r,"items",l,"attrs"],p));const c=u.getIn(["styleAttrs"])?.asMutable({deep:!0})??{},g=(0,s.merge)({},c,n);(0,s.isEmpty)(g)||(e=e.setIn(["presets","items","module",r,"items",l,"styleAttrs"],g));const m=u.getIn(["renderAttrs"])?.asMutable({deep:!0})??{},f=(0,s.merge)({},m,a);return(0,s.isEmpty)(f)||(e=e.setIn(["presets","items","module",r,"items",l,"renderAttrs"],f)),e.setIn(["presets","items","module",r,"items",l,"updated"],i)})(e,{presetId:t.presetId,moduleName:t.moduleName,attrs:t.attrs,styleAttrs:t.styleAttrs,renderAttrs:t.renderAttrs,updated:t.updated,moduleId:t.moduleId});case"OPEN_CONFIRMATION_MODAL":return((e,{confirmationAction:t,confirmationText:r,actionPayload:o,actionLabels:s})=>e.setIn(["presets","confirmationModal"],{isVisible:!0,confirmationAction:t,confirmationText:r,actionPayload:o,actionLabels:s}))(e,{confirmationAction:t.confirmationAction,confirmationText:t.confirmationText,actionPayload:t.actionPayload,actionLabels:t.actionLabels});case"OPEN_OPTION_GROUP_CONFIRMATION_MODAL":return((e,{confirmationAction:t,confirmationText:r,actionPayload:o,actionLabels:s})=>e.setIn(["presets","optionGroupConfirmationModal"],{isVisible:!0,confirmationAction:t,confirmationText:r,actionPayload:o,actionLabels:s}))(e,{confirmationAction:t.confirmationAction,confirmationText:t.confirmationText,actionPayload:t.actionPayload,actionLabels:t.actionLabels});case"OPEN_OPTION_GROUP_PRESET_MODAL":return((e,{groupId:t,groupName:r,groupLabel:o,visible:s,offsetTop:n})=>e.setIn(["presets","optionGroupPresetModal"],{groupId:t,groupName:r,groupLabel:o,isOptionGroupModalOpen:s,offsetTop:n}))(e,{groupId:t.groupId,groupName:t.groupName,groupLabel:t.groupLabel,visible:t.visible,offsetTop:t.offsetTop});case"CLOSE_OPTION_GROUP_PRESET_MODAL":return(e=>e.setIn(["presets","optionGroupPresetModal","isOptionGroupModalOpen"],!1))(e);case"SET_OPTION_GROUP_PRESET_EDIT_MODE":return((e,{groupId:t,groupName:r,presetId:o,enabled:s})=>{const n={groupId:t,groupName:r,isPresetActive:s};return void 0!==o&&(n.presetId=o),e.setIn(["presets","optionGroupPreset"],n)})(e,{groupId:t.groupId,groupName:t.groupName,presetId:t.presetId,enabled:t.enabled});case"CLOSE_CONFIRMATION_MODAL":return(e=>e.setIn(["presets","confirmationModal"],{isVisible:!1}))(e);case"CLOSE_OPTION_GROUP_CONFIRMATION_MODAL":return(e=>e.setIn(["presets","optionGroupConfirmationModal"],{isVisible:!1}))(e);case"UPDATE_PRESET_NAME":return e.getIn(["presets","isSyncing"])?e:((e,{moduleName:t,presetId:r,name:o,updated:s})=>{const n=j({id:r,moduleName:t,state:e});return e.setIn(["presets","items","module",t,"items",n,"updated"],s).setIn(["presets","items","module",t,"items",n,"name"],o)})(e,{moduleName:t.moduleName,presetId:t.presetId,name:t.name,updated:t.updated});case"UPDATE_PRESET_PRIORITY":return e.getIn(["presets","isSyncing"])?e:((e,{moduleName:t,presetId:r,priority:o,updated:s})=>{const n=j({id:r,moduleName:t,state:e});return e.setIn(["presets","items","module",t,"items",n,"updated"],s).setIn(["presets","items","module",t,"items",n,"priority"],o)})(e,{moduleName:t.moduleName,presetId:t.presetId,priority:t.priority,updated:t.updated});case"ADD_NEW_MODULE_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,{moduleName:t,moduleLabel:r,attrs:o,renderAttrs:n,styleAttrs:a,presetType:i,version:l,created:u,updated:d})=>{const p=e.getIn(["presets","items","module",t,"items"])?.asMutable({deep:!0}),c=Object.values(p??{}).map((e=>e.name)),g=_({presets:c,moduleLabel:r,moduleName:t,type:i,version:l,attrs:o,renderAttrs:n,styleAttrs:a,created:u,updated:d});return(0,s.isArray)(e?.asMutable({deep:!0})?.presets?.items?.module)&&(0,s.isEmpty)(e?.asMutable({deep:!0})?.presets?.items?.module)&&(e=e.setIn(["presets","items","module"],{})),e.setIn(["presets","items","module",t,"items",g.id],g)})(e,{moduleLabel:t.moduleLabel,moduleName:t.moduleName,attrs:t.attrs,renderAttrs:t.renderAttrs,styleAttrs:t.styleAttrs,groupPresets:t.groupPresets,presetType:t.presetType,version:t.version,created:t.created,updated:t.updated});case"ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES":return e.getIn(["presets","isSyncing"])?e:((e,{moduleName:t,moduleLabel:r,attrs:o,renderAttrs:s,styleAttrs:n,groupPresets:a,presetType:i,version:l,created:u,updated:d})=>{const p=e.getIn(["presets","items","module",t,"items"])?.asMutable({deep:!0}),c=Object.values(p??{}).map((e=>e.name)),g=_({presets:c,moduleLabel:r,moduleName:t,type:i,version:l,attrs:o,renderAttrs:s,styleAttrs:n,groupPresets:a,created:u,updated:d});return e.setIn(["presets","items","module",t,"items",g.id],g)})(e,{moduleLabel:t.moduleLabel,moduleName:t.moduleName,attrs:t.attrs,renderAttrs:t.renderAttrs,styleAttrs:t.styleAttrs,groupPresets:t.groupPresets,presetType:t.presetType,version:t.version,created:t.created,updated:t.updated});case"ADD_NEW_OPTION_GROUP_PRESET_FROM_CURRENT_STYLES":return((e,{groupName:t,groupLabel:r,attrs:o,renderAttrs:s,styleAttrs:n,version:a,created:i,updated:l,moduleName:u,groupId:d,primaryAttrName:p})=>{const c=e.getIn(["presets","items","group",t,"items"])?.asMutable({deep:!0}),g=Object.values(c??{}).map((e=>e.name)),m=O({presets:g,groupName:t,groupLabel:r,version:a,attrs:o,renderAttrs:s,styleAttrs:n,created:i,updated:l,moduleName:u,groupId:d,primaryAttrName:p});return e.setIn(["presets","items","group",t,"items",m.id],m)})(e,{moduleId:t.moduleId,groupId:t.groupId,groupName:t.groupName,groupLabel:t.groupLabel,attrs:t.attrs,renderAttrs:t.renderAttrs,styleAttrs:t.styleAttrs,version:t.version,created:t.created,updated:t.updated,moduleName:t.moduleName,primaryAttrName:t.primaryAttrName});case"ADD_DEFAULT_MODULE_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,{moduleName:t,moduleLabel:r,presetType:o,version:s,created:n,updated:a})=>{const i=e.getIn(["presets","items","module",t,"items"]),l=Object.keys(i??{}).length,u=e.getIn(["presets","items","module",t,"default"]);if(l>0&&u)return e;const d=_({type:o,presets:[],moduleLabel:r,moduleName:t,version:s,created:n,updated:a});return l>0&&!u?e.setIn(["presets","items","module",t,"default"],d.id).setIn(["presets","items","module",t,"items"],{[d.id]:d,...i}):e.setIn(["presets","items","module",t,"items"],{[d.id]:d}).setIn(["presets","items","module",t,"default"],d.id)})(e,{moduleName:t.moduleName,moduleLabel:t.moduleLabel,created:t.created,updated:t.updated,version:t.version});case"ADD_DEFAULT_OPTION_GROUP_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,{groupName:t,groupLabel:r,version:o,created:s,updated:n,moduleName:a,groupId:i,primaryAttrName:l})=>{const u=e.getIn(["presets","items","group",t,"items"]),d=Object.keys(u??{}).length,p=e.getIn(["presets","items","group",t,"default"]);if(d>0&&p)return e;const c=O({presets:[],groupLabel:r,groupName:t,version:o,created:s,updated:n,moduleName:a,groupId:i,primaryAttrName:l}),g=c.id;return d>0&&!p?e.setIn(["presets","items","group",t,"default"],g).setIn(["presets","items","group",t,"items"],{[g]:c,...u}):e.setIn(["presets","items","group",t,"items"],{[g]:c}).setIn(["presets","items","group",t,"default"],g)})(e,{groupLabel:t.groupLabel,groupName:t.groupName,created:t.created,updated:t.updated,moduleName:t.moduleName,groupId:t.groupId,version:t.version,primaryAttrName:t.primaryAttrName});case"IMPORT_PRESETS":return((e,t)=>e.setIn(["presets","items"],e.getIn(["presets","items"]).merge(t,{deep:!0})))(e,t.presets);case"ADD_PRESET_ATTRS_MAP_JOB":return((e,{moduleName:t,id:r,callback:o})=>e.setIn(["presets","attrsMapping","jobs",t,r],o))(e,{moduleName:t.moduleName,id:t.id,callback:t.callback});case"SET_PRESET_ATTRS_MAP":return((e,{moduleName:t,map:r})=>e.setIn(["presets","attrsMapping","maps",t],r).setIn(["presets","attrsMapping","jobs"],e.getIn(["presets","attrsMapping","jobs"]).without(t)))(e,{moduleName:t.moduleName,map:t.map});case"SET_DEFAULT_PRESET_ON_SAVE":return e.getIn(["presets","isSyncing"])?e:((e,{presetType:t,presetSubType:r,presetId:o})=>{const s=(0,p.getSelectedPresetOrDefault)([o],e.getIn(["presets","items",t,r,"default"])??"");return e.setIn(["presets","defaultOnSave",t,r],s)})(e,{presetType:t.presetType,presetSubType:t.presetSubType,presetId:t.presetId});case"UNSET_DEFAULT_PRESET_ON_SAVE":return e.getIn(["presets","isSyncing"])?e:((e,{presetType:t,presetSubType:r})=>{if(t&&r){const o=e.getIn(["presets","defaultOnSave",t]);return o?e.setIn(["presets","defaultOnSave",t],o.without(r)):e}if(t){const r=e.getIn(["presets","defaultOnSave"]);return r?e.setIn(["presets","defaultOnSave"],r.without(t)):e}return e.setIn(["presets"],e.getIn(["presets"]).without("defaultOnSave"))})(e,{presetType:t.presetType,presetSubType:t.presetSubType});case"END_PRESET_EDIT_SESSION":return((e,t,r,o=null)=>{let n=!1;if(t){if("group"===r){const t=e.getIn(["presets","restorePoint","group"]),r=e.getIn(["presets","optionGroupPreset"])?.asMutable({deep:!0}),a=r?.isPresetActive?r?.groupId:null;if(t&&o&&a&&!(0,s.isEmpty)(t))return(e=(e=e.setIn(["presets","items","group",o],t.getIn([o]))).updateIn(["presets","version"],((e=0)=>e+1))).setIn(["presets","restorePoint","group"],null);(0,s.isEmpty)(t)||(e=e.setIn(["presets","items","group"],t),n=!0)}if("module"===r){const t=e.getIn(["presets","restorePoint","module"]);(0,s.isEmpty)(t)||(e=e.setIn(["presets","items","module"],t),n=!0)}if(!r){const t=e.getIn(["presets","restorePoint"]);t&&(e=e.setIn(["presets","items"],t),n=!0)}n&&(e=e.updateIn(["presets","version"],((e=0)=>e+1)))}switch(r){case"group":return e.setIn(["presets","restorePoint","group"],null);case"module":return e.setIn(["presets","restorePoint","module"],null);default:return e.setIn(["presets","restorePoint"],null)}})(e,t.isRollback,t.presetType,t.unsavedPresetGroupName);case"START_PRESET_EDIT_SESSION":return((e,{presetType:t,presetId:r,moduleName:o})=>{if("group"===t)return e.setIn(["presets","restorePoint","group"],e.getIn(["presets","items","group"])?.asMutable({deep:!0})??{});if("module"===t){if(r){const t=e.getIn(["presets","items","module",o,"items"]),s=e.getIn(["presets","items","module",o,"default"]),n=t.getIn([r])?.asMutable({deep:!0})??{},a=e.getIn(["presets","items","module"])?.asMutable({deep:!0})??{};return e.setIn(["presets","restorePoint","module"],a).setIn(["presets","restorePoint","module",o,"items",r],n).setIn(["presets","restorePoint","module",o,"default"],s).setIn(["presets","editingPresetId"],r)}let t=e.setIn(["presets","restorePoint","module"],e.getIn(["presets","items","module"])?.asMutable({deep:!0})??{});if(o){const r=e.getIn(["presets","items","module",o,"default"]);r&&(t=t.setIn(["presets","editingPresetId"],r))}return t}return e.setIn(["presets","restorePoint"],e.getIn(["presets","items"])?.asMutable({deep:!0})??{})})(e,{presetType:t.presetType,presetId:t.presetId,moduleName:t.moduleName});case"OVERRIDE_PRESET_DATA":return((e,t)=>e.setIn(["presets","items"],t))(e,t.data);case"END_SYNCING_PRESET":return((e,t)=>e.setIn(["presets","isSyncingError"],t).setIn(["presets","isSyncing"],!1).setIn(["presets","syncingPresetType"],""))(e,t.isError);case"START_SYNCING_PRESET":return((e,t)=>e.setIn(["presets","isSyncingError"],!1).setIn(["presets","isSyncing"],!0).setIn(["presets","syncingPresetType"],t.presetType??""))(e,t);case"TOGGLE_PRESET_SAVE_CONFIRMATION_DIALOG":return((e,{flag:t})=>e.setIn(["presets","showPresetSaveConfirmationDialog"],t))(e,{flag:t.flag});case"TOGGLE_OPTION_GROUP_PRESET_SAVE_CONFIRMATION_DIALOG":return((e,{flag:t})=>e.setIn(["presets","optionGroupPreset","showSaveConfirmationDialog"],t))(e,{flag:t.flag});case"UPDATE_OPTION_GROUP_PRESET_WITH_CURRENT_STYLES":return e.getIn(["presets","isSyncing"])?e:((e,{presetId:t,groupName:r,attrs:o,renderAttrs:n,styleAttrs:a,updated:i})=>{const l=k({presetId:t,groupName:r,state:e}),u=e.getIn(["presets","items","group",r,"items"])?.getIn([l]);if(!u)return e;const d={attrs:o,styleAttrs:a,renderAttrs:n};return Object.keys(d).forEach((t=>{const o=d[t],n=u.getIn([t]),a=(0,s.merge)({},n,o);(0,s.isEmpty)(a)||(e=e.setIn(["presets","items","group",r,"items",l,t],a))})),e.setIn(["presets","items","group",r,"items",l,"updated"],i)})(e,{moduleId:t.moduleId,presetId:t.presetId,groupId:t.groupId,groupName:t.groupName,attrs:t.attrs,renderAttrs:t.renderAttrs,styleAttrs:t.styleAttrs,updated:t.updated});case"UPDATE_OPTION_GROUP_PRESET_NAME":return((e,{presetId:t,groupName:r,name:o,updated:s})=>{const n=k({presetId:t,groupName:r,state:e});return e.setIn(["presets","items","group",r,"items",n,"updated"],s).setIn(["presets","items","group",r,"items",n,"name"],o)})(e,{presetId:t.presetId,groupName:t.groupName,name:t.name,updated:t.updated});case"UPDATE_OPTION_GROUP_PRESET_PRIORITY":return((e,{presetId:t,groupName:r,priority:o,updated:s})=>e.setIn(["presets","items","group",r,"items",t,"updated"],s).setIn(["presets","items","group",r,"items",t,"priority"],o))(e,{presetId:t.presetId,groupName:t.groupName,priority:t.priority,updated:t.updated});case"ADD_NEW_OPTION_GROUP_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,{groupName:t,groupLabel:r,attrs:o,renderAttrs:n,styleAttrs:a,version:i,created:l,updated:u,moduleName:d,groupId:p,primaryAttrName:c})=>{const g=e.getIn(["presets","items","group"])?.asMutable({deep:!0});(0,s.isArray)(g)&&(0,s.isEmpty)(g)&&(e=e.setIn(["presets","items","group"],{}));const m=e.getIn(["presets","items","group",t,"items"])?.asMutable({deep:!0}),f=Object.values(m??{}).map((e=>e.name)),b=O({presets:f,groupName:t,groupLabel:r,version:i,attrs:o,renderAttrs:n,styleAttrs:a,created:l,updated:u,moduleName:d,groupId:p,primaryAttrName:c});return e.setIn(["presets","items","group",t,"items",b.id],b)})(e,{groupName:t.groupName,groupLabel:t.groupLabel,attrs:t.attrs,renderAttrs:t.renderAttrs,styleAttrs:t.styleAttrs,version:t.version,created:t.created,updated:t.updated,moduleName:t.moduleName,groupId:t.groupId,primaryAttrName:t.primaryAttrName});case"CLOSE_OPTION_GROUP_PRESET_EDIT_MODE":return((e,t)=>{const{groupId:r,groupName:o}=t||{};return r&&o?e.setIn(["presets","optionGroupPreset"],{groupId:r,groupName:o,isPresetActive:!1}):e.setIn(["presets"],e.getIn(["presets"]).without("optionGroupPreset"))})(e,{groupId:t.groupId,groupName:t.groupName});case"ADD_GLOBAL_VARIABLE":{const{id:r,label:o,value:n,groupKey:a,order:i,status:l,allowedActions:u,lastUpdated:d}=t;return((e,t,r,o,n,a=null,i="active",l={editLabel:!0,editValue:!0,remove:!0,reorder:!0},u=(new Date).toISOString())=>{const d=e.getIn(["globalVariables",n]).asMutable({deep:!0}),p=(0,s.pickBy)(d,(e=>"active"===e.status)),c={id:t,label:r,value:o,order:a=a??Number(Object.keys(p||{}).length)+1,status:i,allowedActions:l,lastUpdated:u,variableType:n};return e.setIn(["globalVariables",n,t],c)})(e,r,o,n,a,i,l,u,d)}case"ADD_GLOBAL_VARIABLES":return((e,{...t})=>e.setIn(["globalVariables"],t))(e,{numbers:t.numbers,strings:t.strings,images:t.images,links:t.links,colors:t.colors,fonts:t.fonts});case"DELETE_GLOBAL_VARIABLE":return((e,t,r)=>{const o=e.getIn(["globalVariables",r,t]);if(!o)return e;if(!o.label||!o.value)return e.setIn(["globalVariables",r],e.getIn(["globalVariables",r]).without(t));const n=e.setIn(["globalVariables",r,t],{...o,status:"archived",order:null}),a=n.getIn(["globalVariables",r]).without((e=>e&&"archived"===e.status));let i=a;return Object.values(a).sort(((e,t)=>e.order-t.order)).forEach(((e,t)=>{i=i.setIn([e.id,"order"],t+1)})),e.setIn(["globalVariables",r],(0,s.merge)({...n.getIn(["globalVariables",r]),...i}))})(e,t.id,t.groupKey);case"UPDATE_GLOBAL_VARIABLE":{const{id:r,label:o,value:s,groupKey:n,status:a}=t;return((e,t,r,o,s,n="active")=>{const a=e.getIn(["globalVariables",s,t]);return a?e.setIn(["globalVariables",s,t],{...a,lastUpdated:(new Date).toISOString(),label:r,value:o,status:n}):e})(e,r,o,s,n,a)}case"UPDATE_GLOBAL_VARIABLES":return((e,t)=>((0,s.forEach)(t,(t=>{e=e.setIn(["globalVariables",t.groupKey,t.id],{...t,lastUpdated:t?.lastUpdated??(new Date).toISOString(),label:t.label,value:t.value,status:t?.status??"active"})})),e))(e,t.variables);case"UPDATE_GLOBAL_VARIABLE_ORDER":return((e,t,r,o)=>{const s=e.getIn(["globalVariables",o]);if(!s||!(t in s))return e;const n=Object.values(s).filter((e=>"archived"!==e.status)).sort(((e,t)=>e.order-t.order)),a=n.findIndex((e=>e.id===t)),[i]=n.splice(a,1);n.splice(r-1,0,i);let l=s;return n.forEach(((e,t)=>{l=l.setIn([e.id,"order"],t+1)})),e.setIn(["globalVariables",o],l)})(e,t.id,t.order,t.groupKey);case"UPDATE_GLOBAL_VARIABLES_BACKUP":return(e=>e.setIn(["globalVariablesBackup"],e.getIn(["globalVariables"])))(e);case"RESET_GLOBAL_VARIABLES":return(e=>e.setIn(["globalVariables"],e.getIn(["globalVariablesBackup"])))(e);case"RESTORE_GLOBAL_VARIABLE":return((e,t,r)=>{const o=e.getIn(["globalVariables",r]),n=e.getIn(["globalVariables",r,t]);if(!n)return e;const a=(0,s.pickBy)(o,(e=>"active"===e.status)),i=Number(Object.keys(a).length)+1;return e.setIn(["globalVariables",r,t],{...n,status:"active",order:i})})(e,t.id,t.groupKey);default:return e}},Fr=()=>{if((0,l.select)("divi/settings")||(0,c.registerSettingsStore)(),(0,l.select)("divi/fonts")||(0,u.registerFontsStore)(),(0,l.select)("divi/colors")||(0,i.registerColorsStore)(),(0,l.select)("divi/global-data"))return;const r=(e=>{if(!e)return e;if(!e?.group)return e;const t=(0,n.asMutable)(e?.group,{deep:!0});return Object.keys(t).forEach((e=>{const r=t[e];if(!r||!r.items)return;const{items:o}=r;Object.keys(o).forEach((r=>{(e=>!!e.groupId&&!!e.moduleName)(o[r])||delete t[e].items[r]}))})),e.setIn(["group"],t)})((0,l.select)("divi/settings").getSetting(["globalPresets","data"])),o=(0,l.select)("divi/settings").getSetting(["settings","page","values"],a()({})),g=o?.getIn(["post_content","et_pb_gc_palette"]),f=o?.getIn(["post_content","legacy_global_colors"]),b=o?.getIn(["post_content","et_pb_global_variables"]),I={globalColors:(0,s.isEmpty)(g)?{}:g.asMutable({deep:!0}),previewGlobalColors:{},isGlobalColorEditing:!1,legacyGlobalColors:(0,s.isEmpty)(f)?{}:f.asMutable({deep:!0}),globalVariables:b,globalVariablesBackup:b,fetchLog:{},fetchError:{},presets:{items:(0,p.removeEmptyObjectRecursive)((0,n.asMutable)(r,{deep:!0}),!0),confirmationModal:{isVisible:!1,confirmationAction:null,confirmationText:null,actionPayload:{},actionLabels:{}},optionGroupPresetModal:{groupId:"",isOptionGroupModalOpen:!1,offsetTop:"",groupName:"",groupLabel:""},optionGroupConfirmationModal:{isVisible:!1,confirmationAction:null,confirmationText:null,actionPayload:{},actionLabels:{}},optionGroupPreset:{groupId:"",groupName:"",isPresetActive:!1,showSaveConfirmationDialog:!0},restorePoint:null,defaultOnSave:null,isSyncing:!1,syncingPresetType:"",isSyncingError:!1,isActive:!1,showPresetSaveConfirmationDialog:!0,attrsMapping:{jobs:{},maps:{}}}},E=a()(I),y=(0,l.registerStore)("divi/global-data",{actions:e,reducer:Br,selectors:t,initialState:E});(0,d.applyMiddlewares)(y,jr),(0,d.applyEffects)(y,kr),m(["fonts","colors"]),(0,l.dispatch)("divi/global-data").updateGlobalVariablesBackup()},$r=e=>{const{globalColors:t,previewGlobalColors:r,globalVariables:o}=e,n={...o?.numbers,...o?.fonts,...o?.images};let a="",i="",l="";const u={...t,...Object.fromEntries(Object.entries(o?.colors||{}).filter((([,e])=>e?.value)).map((([e,t])=>[e,{color:t.value}])))};return(0,s.forEach)(u,((e,t)=>{if(e?.color){const r=$(e.color);a+=`--${t}: ${r};`}})),(0,s.forEach)(r,(e=>{if(!(0,s.isEmpty)(e)&&e.color){const t=$(e.color);l+=`--${e.colorId}: ${t};`}})),(0,s.forEach)(n,((e,t)=>{if(e?.value){let{value:r}=e;const s=!!o?.fonts?.[t];o?.images?.[t]&&(r=`url(${r})`),i+=G(t,r,s)}})),(0,s.isEmpty)(a)?null:Gr().createElement(Gr().Fragment,null,Gr().createElement("style",{className:"et-vb-global-data et-vb-global-colors"},`:root{${a}}`),(0,s.isEmpty)(l)?null:Gr().createElement("style",{className:"et-vb-global-data et-vb-preview-global-colors"},`:root{${l}}`),Gr().createElement("style",{className:"et-vb-global-data et-vb-global-variables et-vb-global-variables-numbers"},`:root{${i}}`))},xr=()=>{const{globalColors:e,previewGlobalColors:t,globalVariables:r}=(0,l.useSelect)((e=>({globalColors:e("divi/global-data").getGlobalColors(),previewGlobalColors:e("divi/global-data").getPreviewGlobalColors(),globalVariables:e("divi/global-data").getGlobalVariables()})));return(0,Rr.useEffect)((()=>{r?.fonts&&(0,s.forEach)(r.fonts,((e,t)=>{e?.value&&t.startsWith("gvid-")&&(0,l.dispatch)("divi/fonts").loadFont(e?.value)}))}),[r?.fonts]),(0,Rr.createElement)($r,{globalColors:e,previewGlobalColors:t,globalVariables:r})}}(),(window.divi=window.divi||{}).globalData=o}();