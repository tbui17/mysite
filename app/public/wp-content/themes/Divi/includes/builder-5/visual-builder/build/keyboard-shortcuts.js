!function(){var e={33042:function(e,t,r){var n;!function(){"use strict";var s=function e(t){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),s={use_static:!1};function i(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function o(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}function a(e,t){o(e,t,(function(){throw new g("The "+t+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=t)||Array.isArray(r)||null===r||void 0!==t.use_static&&(s.use_static=Boolean(t.use_static));var u="__immutable_invariants_hold";function c(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,u)))}function l(e,t){return e===t||e!=e&&t!=t}function f(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var p=["setPrototypeOf"],y=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),h=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),d=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function g(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function v(e,t){for(var r in o(e,u,!0),t)t.hasOwnProperty(r)&&a(e,t[r]);return Object.freeze(e),e}function b(e,t){var r=e[t];o(e,t,(function(){return $(r.apply(e,arguments))}))}function m(e,t,r){var n=r&&r.deep;if(e in this&&(n&&this[e]!==t&&f(t)&&f(this[e])&&(t=$.merge(this[e],t,{deep:!0,mode:"replace"})),l(this[e],t)))return this;var s=j.call(this);return s[e]=$(t),S(s)}g.prototype=new Error,g.prototype.constructor=Error;var w=$([]);function I(e,t,r){var n=e[0];if(1===e.length)return m.call(this,n,t,r);var s,i=e.slice(1),o=this[n];if("object"==typeof o&&null!==o)s=$.setIn(o,i,t);else{var a=i[0];s=""!==a&&isFinite(a)?I.call(w,i,t):R.call(C,i,t)}if(n in this&&o===s)return this;var u=j.call(this);return u[n]=s,S(u)}function S(e){for(var t in h){if(h.hasOwnProperty(t))b(e,h[t])}s.use_static||(o(e,"flatMap",O),o(e,"asObject",T),o(e,"asMutable",j),o(e,"set",m),o(e,"setIn",I),o(e,"update",W),o(e,"updateIn",x),o(e,"getIn",B));for(var r=0,n=e.length;r<n;r++)e[r]=$(e[r]);return v(e,y)}function k(){return new Date(this.getTime())}function O(e){if(0===arguments.length)return this;var t,r=[],n=this.length;for(t=0;t<n;t++){var s=e(this[t],t,this);Array.isArray(s)?r.push.apply(r,s):r.push(s)}return S(r)}function E(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,r){"number"==typeof e&&(r[t]=e.toString())})),e=function(e,r){return-1!==t.indexOf(r)}}var r=i(this);for(var n in this)this.hasOwnProperty(n)&&!1===e(this[n],n)&&(r[n]=this[n]);return Y(r)}function j(e){var t,r,n=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)n.push(A(this[t]));else for(t=0,r=this.length;t<r;t++)n.push(this[t]);return n}function T(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},n=this.length;for(t=0;t<n;t++){var s=e(this[t],t,this),i=s[0],o=s[1];r[i]=o}return Y(r)}function A(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,u)||e instanceof Date?e:$.asMutable(e,{deep:!0})}function D(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function K(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var r,n,s=Array.isArray(e),o=t&&t.deep,a=t&&t.mode||"merge",u=t&&t.merger;function c(e,n,s){var a,c=$(n[s]),p=u&&u(e[s],c,t),y=e[s];void 0===r&&void 0===p&&e.hasOwnProperty(s)&&l(c,y)||(l(y,a=void 0!==p?p:o&&f(y)&&f(c)?$.merge(y,c,t):c)&&e.hasOwnProperty(s)||(void 0===r&&(r=D(e,i(e))),r[s]=a))}function p(e,t){for(var n in e)t.hasOwnProperty(n)||(void 0===r&&(r=D(e,i(e))),delete r[n])}if(s)for(var y=0,h=e.length;y<h;y++){var d=e[y];for(n in d)d.hasOwnProperty(n)&&c(void 0!==r?r:this,d,n)}else{for(n in e)Object.getOwnPropertyDescriptor(e,n)&&c(this,e,n);"replace"===a&&p(this,e)}return void 0===r?this:Y(r)}function P(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return $.merge(this,e,{deep:r,mode:"replace"})}var M,_,L,C=$({});function R(e,t,r){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=e[0];if(1===e.length)return U.call(this,n,t,r);var s,o=e.slice(1),a=this[n];if(s=this.hasOwnProperty(n)&&"object"==typeof a&&null!==a?$.setIn(a,o,t):R.call(C,o,t),this.hasOwnProperty(n)&&a===s)return this;var u=D(this,i(this));return u[n]=s,Y(u)}function U(e,t,r){var n=r&&r.deep;if(this.hasOwnProperty(e)&&(n&&this[e]!==t&&f(t)&&f(this[e])&&(t=$.merge(this[e],t,{deep:!0,mode:"replace"})),l(this[e],t)))return this;var s=D(this,i(this));return s[e]=$(t),Y(s)}function W(e,t){var r=Array.prototype.slice.call(arguments,2),n=this[e];return $.set(this,e,t.apply(n,[n].concat(r)))}function N(e,t){for(var r=0,n=t.length;null!=e&&r<n;r++)e=e[t[r]];return r&&r==n?e:void 0}function x(e,t){var r=Array.prototype.slice.call(arguments,2),n=N(this,e);return $.setIn(this,e,t.apply(n,[n].concat(r)))}function B(e,t){var r=N(this,e);return void 0===r?t:r}function F(e){var t,r=i(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(r[t]=A(this[t]));else for(t in this)this.hasOwnProperty(t)&&(r[t]=this[t]);return r}function G(){return{}}function Y(e){return s.use_static||(o(e,"merge",K),o(e,"replace",P),o(e,"without",E),o(e,"asMutable",F),o(e,"set",U),o(e,"setIn",R),o(e,"update",W),o(e,"updateIn",x),o(e,"getIn",B)),v(e,p)}function $(e,t,r){if(c(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===n)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then($);if(Array.isArray(e))return S(e.slice());if(e instanceof Date)return i=new Date(e.getTime()),s.use_static||o(i,"asMutable",k),v(i,d);var i,a=t&&t.prototype,u=(a&&a!==Object.prototype?function(){return Object.create(a)}:G)();if(null==r&&(r=64),r<=0)throw new g("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var l in r-=1,e)Object.getOwnPropertyDescriptor(e,l)&&(u[l]=$(e[l],void 0,r));return Y(u)}function z(e){return function(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}}function H(e,t){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?t.apply(n,r):e.apply(n,r)}}return $.from=$,$.isImmutable=c,$.ImmutableError=g,$.merge=z(K),$.replace=z(P),$.without=z(E),$.asMutable=(M=F,_=j,L=k,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?_.apply(t,e):t instanceof Date?L.apply(t,e):M.apply(t,e)}),$.set=H(U,m),$.setIn=H(R,I),$.update=z(W),$.updateIn=z(x),$.getIn=z(B),$.flatMap=z(O),$.asObject=z(T),s.use_static||($.static=e({use_static:!0})),Object.freeze($),$}();void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};!function(){"use strict";r.r(n),r.d(n,{getPressedKeys:function(){return W},isKeyPressed:function(){return N},onKeydown:function(){return M},onKeyup:function(){return _},onWindowBlur:function(){return L},registerKeyboardShortcutsListeners:function(){return R},registerKeyboardShortcutsStore:function(){return U},registerShortcut:function(){return x},registerShortcuts:function(){return B},toggleShortcutListeners:function(){return F},unregisterShortcut:function(){return G},unregisterShortcuts:function(){return Y}});var e={};r.r(e),r.d(e,{doShortcut:function(){return o},keyDown:function(){return a},keyUp:function(){return u},registerShortcut:function(){return c},resetDoShortcut:function(){return l},resetState:function(){return f},toggleShortcutListeners:function(){return p},unregisterShortcut:function(){return y},windowBlur:function(){return h}});var t={};r.r(t),r.d(t,{getCurrentShortcut:function(){return g},getMatchingShortcut:function(){return m},getPressedKeys:function(){return w},getShortcuts:function(){return k}});var s=window.divi.data,i=window.divi.middleware;const o=e=>({type:"DO",shortcut:e}),a=(e,t)=>({type:"KEYDOWN",physicalKeyCode:e,key:t}),u=(e,t)=>({type:"KEYUP",physicalKeyCode:e,key:t}),c=e=>({type:"REGISTER",shortcut:e}),l=()=>({type:"RESET_DO"}),f=()=>({type:"RESET_STATE"}),p=e=>({type:"TOGGLE_LISTENERS",enableListeners:e}),y=e=>({type:"UNREGISTER",name:e}),h=()=>({type:"WINDOW_BLUR"});var d=window.lodash;const g=e=>e.getIn(["do"]),v="--",b=["Shift","Meta","Control","Alt"],m=(e,t)=>{(t=t.map((e=>e.toLowerCase()))).sort();const r=e.getIn(["keymap",t.join(v)]);return!!r&&e.getIn(["registry",(0,d.last)(r)])},w=e=>e.getIn(["pressedKeys"]);var I=r(33042),S=r.n(I);const k=(e,t=!1)=>{let r=S()({});return"length"===t?(0,d.forEach)(e.registry,(e=>{r=r.setIn([`${e.keys.length}`,e.name],e)})):"category"===t?(0,d.forEach)(e.registry,(e=>{r=r.setIn([e.category,e.name],e)})):r=e.registry,r};let O;const E={KEYDOWN:(e,t)=>{const r=(0,d.values)(w(t.getState())),n=m(t.getState(),r);if(n){const e=n.getIn(["isEnabled"]);if((0,d.isFunction)(e)&&!e())return;(0,s.dispatch)("divi/keyboard-shortcuts").doShortcut(n)}},DO:(e,t)=>{const r=g(t.getState());(0,d.isFunction)(r.action)&&r.action(),clearTimeout(O),O=setTimeout((()=>{(0,d.isEqual)((0,s.select)("divi/keyboard-shortcuts").getCurrentShortcut(),r)&&(0,s.dispatch)("divi/keyboard-shortcuts").resetDoShortcut()}),500)}};var j=window.vendor.wp.i18n,T=window.divi.uiLibrary;const A=S()({enableListeners:!0,pressedKeys:{},pressedWithMeta:{},meta:!1,do:{},registry:{},keymap:{}}),D=(e,t)=>{const r=(0,T.isAppleOS)()||!0===window.etTestAppleKeyboard;switch(t.type){case"TOGGLE_LISTENERS":return e.setIn(["enableListeners"],t.enableListeners);case"KEYDOWN":return!0!==e.getIn(["enableListeners"])?e:(r&&"Meta"===t.key&&(e=e.set("meta",!0)),r&&!0===e.getIn(["meta"])&&(e=e.setIn(["pressedWithMeta",t.physicalKeyCode],t.key)),e.setIn(["pressedKeys",t.physicalKeyCode],t.key));case"KEYUP":if(!0!==e.getIn(["enableListeners"]))return e;if(r&&"Meta"===t.key){const t=(e=e.setIn(["meta"],!1)).getIn(["pressedWithMeta"]),r=(0,d.keys)(t);e=(e=e.setIn(["pressedKeys"],e.pressedKeys.without(((e,t)=>(0,d.includes)(r,t))))).setIn(["pressedWithMeta"],{})}return e.set("pressedKeys",e.pressedKeys.without(t.physicalKeyCode));case"WINDOW_BLUR":return r&&!0===e.getIn(["meta"])&&(e=e.setIn(["meta"],!1)),r&&!(0,d.isEmpty)(e.getIn(["pressedWithMeta"]))&&(e=e.setIn(["pressedWithMeta"],{})),e.setIn(["pressedKeys"],{});case"REGISTER":{const n=(0,d.get)(t,"shortcut"),s=(0,d.get)(n,"keys",[]).map((e=>e.toLowerCase())).sort();if(e.getIn(["registry",n.name]))return console.error((0,j.__)("Shortcut name has to be unique. There is already existing shortcut using this name:","et_builder"),n.name),e;const i=s.join(v),o=e.getIn(["keymap",i]);return(0,d.isArray)(o)?(e=e.setIn(["keymap",i,o.length],n.name),r||(e=e.setIn(["keymap",i.replace("meta","control"),o.length],n.name))):(e=e.setIn(["keymap",i],[n.name]),r||(e=e.setIn(["keymap",i.replace("meta","control")],[n.name]))),e.setIn(["registry",n.name],n)}case"UNREGISTER":{const r=e.getIn(["registry",t.name]);if(!r)return e;const n=r.keys.asMutable().map((e=>e.toLowerCase())).sort().join(v),s=e.getIn(["keymap",n]).length;if(1===s)e=e.setIn(["keymap"],e.keymap.without(n));else if(1<s){const r=e.getIn(["keymap",n]);e=e.setIn(["keymap",n],r.filter((e=>t.name!==e)))}return e.setIn(["registry"],e.registry.without(t.name))}case"DO":return!0!==e.getIn(["enableListeners"])?e:e.setIn(["do"],t.shortcut);case"RESET_DO":return e.setIn(["do"],{});case"RESET_STATE":return A;default:return e}};var K=window.jQuery,P=r.n(K);const M=e=>{const{code:t,keyCode:r,key:n,altKey:i}=e,o=P()(e.target).is("input, textarea")||P()(e.target).attr("contenteditable");let a=n;i&&!(0,d.includes)(b,n)&&(a=t.replace("Key","").toLowerCase());const u=t||r.toString(),c=e.ctrlKey||e.metaKey,l=c&&"s"===n,f=c&&("="===n||"+"===n)||c&&"-"===n||l;if(o){c&&"Meta"===n&&(0,s.dispatch)("divi/keyboard-shortcuts").keyDown(u,n);const t="ArrowUp"===u||"ArrowDown"===u||"Enter"===u,r=t&&P()(e.target).parents(".et-vb-select-options-filter").length>0,i=t&&P()(e.target).is("#et-vb-field-input-text-et-vb-page-bar-responsive-select--zoom");if(!(r||i||f))return;l&&P()(e.target).trigger("blur")}const p=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(n);(f||p)&&e.preventDefault(),(0,s.dispatch)("divi/keyboard-shortcuts").keyDown(u,a);const y=(0,s.select)("divi/keyboard-shortcuts").getCurrentShortcut(),h=y.getIn(["isEnabled"]);(0,d.isFunction)(h)&&!h()||y.getIn(["name"])&&e.preventDefault()},_=e=>{const{code:t,keyCode:r,key:n,altKey:i}=e;let o=n;i&&!(0,d.includes)(b,n)&&(o=t.replace("Key","").toLowerCase());const a=t||r.toString();(0,s.dispatch)("divi/keyboard-shortcuts").keyUp(a,o)},L=()=>{(0,s.dispatch)("divi/keyboard-shortcuts").windowBlur()};var C=window.divi.window;const R=()=>{const e={top:C.topWindow,app:window};(0,d.forEach)(e,(e=>{e.addEventListener("keydown",M,{capture:!0,passive:!1}),e.addEventListener("keyup",_),e.addEventListener("blur",L)}))},U=()=>{if((0,s.select)("divi/keyboard-shortcuts"))return;const r=(0,s.registerStore)("divi/keyboard-shortcuts",{actions:e,reducer:D,selectors:t,initialState:A});(0,i.applyEffects)(r,E)},W=()=>(0,d.values)((0,s.select)("divi/keyboard-shortcuts").getPressedKeys()),N=e=>{const t=W();if((0,d.isString)(e))return(0,d.includes)(t,e);if((0,d.isArray)(e)){const r=(0,d.intersection)(t,e);return e.length===r.length}return!1},x=e=>{(0,s.dispatch)("divi/keyboard-shortcuts").registerShortcut(e)},B=e=>{(0,d.forEach)(e,(e=>{x(e)}))},F=e=>{(0,s.dispatch)("divi/keyboard-shortcuts").toggleShortcutListeners(e)},G=e=>{(0,s.dispatch)("divi/keyboard-shortcuts").unregisterShortcut(e)},Y=e=>{(0,d.forEach)(e,(e=>{G(e)}))}}(),(window.divi=window.divi||{}).keyboardShortcuts=n}();