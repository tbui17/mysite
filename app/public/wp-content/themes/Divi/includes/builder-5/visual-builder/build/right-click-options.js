/*! For license information please see right-click-options.js.LICENSE.txt */
!function(){var e={33042:function(e,t,r){var i;!function(){"use strict";var o=function e(t){var r,i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function s(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function a(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}function n(e,t){a(e,t,(function(){throw new h("The "+t+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=t)||Array.isArray(r)||null===r||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var l="__immutable_invariants_hold";function d(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,l)))}function u(e,t){return e===t||e!=e&&t!=t}function p(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var c=["setPrototypeOf"],g=c.concat(["push","pop","sort","splice","shift","unshift","reverse"]),b=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),m=c.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function h(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function f(e,t){for(var r in a(e,l,!0),t)t.hasOwnProperty(r)&&n(e,t[r]);return Object.freeze(e),e}function y(e,t){var r=e[t];a(e,t,(function(){return H(r.apply(e,arguments))}))}function v(e,t,r){var i=r&&r.deep;if(e in this&&(i&&this[e]!==t&&p(t)&&p(this[e])&&(t=H.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=P.call(this);return o[e]=H(t),I(o)}h.prototype=new Error,h.prototype.constructor=Error;var M=H([]);function A(e,t,r){var i=e[0];if(1===e.length)return v.call(this,i,t,r);var o,s=e.slice(1),a=this[i];if("object"==typeof a&&null!==a)o=H.setIn(a,s,t);else{var n=s[0];o=""!==n&&isFinite(n)?A.call(M,s,t):L.call(x,s,t)}if(i in this&&a===o)return this;var l=P.call(this);return l[i]=o,I(l)}function I(e){for(var t in b){if(b.hasOwnProperty(t))y(e,b[t])}o.use_static||(a(e,"flatMap",C),a(e,"asObject",w),a(e,"asMutable",P),a(e,"set",v),a(e,"setIn",A),a(e,"update",F),a(e,"updateIn",$),a(e,"getIn",W));for(var r=0,i=e.length;r<i;r++)e[r]=H(e[r]);return f(e,g)}function _(){return new Date(this.getTime())}function C(e){if(0===arguments.length)return this;var t,r=[],i=this.length;for(t=0;t<i;t++){var o=e(this[t],t,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return I(r)}function k(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,r){"number"==typeof e&&(r[t]=e.toString())})),e=function(e,r){return-1!==t.indexOf(r)}}var r=s(this);for(var i in this)this.hasOwnProperty(i)&&!1===e(this[i],i)&&(r[i]=this[i]);return z(r)}function P(e){var t,r,i=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)i.push(O(this[t]));else for(t=0,r=this.length;t<r;t++)i.push(this[t]);return i}function w(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},i=this.length;for(t=0;t<i;t++){var o=e(this[t],t,this),s=o[0],a=o[1];r[s]=a}return z(r)}function O(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,l)||e instanceof Date?e:H.asMutable(e,{deep:!0})}function N(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function T(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var r,i,o=Array.isArray(e),a=t&&t.deep,n=t&&t.mode||"merge",l=t&&t.merger;function d(e,i,o){var n,d=H(i[o]),c=l&&l(e[o],d,t),g=e[o];void 0===r&&void 0===c&&e.hasOwnProperty(o)&&u(d,g)||(u(g,n=void 0!==c?c:a&&p(g)&&p(d)?H.merge(g,d,t):d)&&e.hasOwnProperty(o)||(void 0===r&&(r=N(e,s(e))),r[o]=n))}function c(e,t){for(var i in e)t.hasOwnProperty(i)||(void 0===r&&(r=N(e,s(e))),delete r[i])}if(o)for(var g=0,b=e.length;g<b;g++){var m=e[g];for(i in m)m.hasOwnProperty(i)&&d(void 0!==r?r:this,m,i)}else{for(i in e)Object.getOwnPropertyDescriptor(e,i)&&d(this,e,i);"replace"===n&&c(this,e)}return void 0===r?this:z(r)}function E(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return H.merge(this,e,{deep:r,mode:"replace"})}var S,j,G,x=H({});function L(e,t,r){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var i=e[0];if(1===e.length)return R.call(this,i,t,r);var o,a=e.slice(1),n=this[i];if(o=this.hasOwnProperty(i)&&"object"==typeof n&&null!==n?H.setIn(n,a,t):L.call(x,a,t),this.hasOwnProperty(i)&&n===o)return this;var l=N(this,s(this));return l[i]=o,z(l)}function R(e,t,r){var i=r&&r.deep;if(this.hasOwnProperty(e)&&(i&&this[e]!==t&&p(t)&&p(this[e])&&(t=H.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=N(this,s(this));return o[e]=H(t),z(o)}function F(e,t){var r=Array.prototype.slice.call(arguments,2),i=this[e];return H.set(this,e,t.apply(i,[i].concat(r)))}function D(e,t){for(var r=0,i=t.length;null!=e&&r<i;r++)e=e[t[r]];return r&&r==i?e:void 0}function $(e,t){var r=Array.prototype.slice.call(arguments,2),i=D(this,e);return H.setIn(this,e,t.apply(i,[i].concat(r)))}function W(e,t){var r=D(this,e);return void 0===r?t:r}function B(e){var t,r=s(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(r[t]=O(this[t]));else for(t in this)this.hasOwnProperty(t)&&(r[t]=this[t]);return r}function V(){return{}}function z(e){return o.use_static||(a(e,"merge",T),a(e,"replace",E),a(e,"without",k),a(e,"asMutable",B),a(e,"set",R),a(e,"setIn",L),a(e,"update",F),a(e,"updateIn",$),a(e,"getIn",W)),f(e,c)}function H(e,t,r){if(d(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===i)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(H);if(Array.isArray(e))return I(e.slice());if(e instanceof Date)return s=new Date(e.getTime()),o.use_static||a(s,"asMutable",_),f(s,m);var s,n=t&&t.prototype,l=(n&&n!==Object.prototype?function(){return Object.create(n)}:V)();if(null==r&&(r=64),r<=0)throw new h("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var u in r-=1,e)Object.getOwnPropertyDescriptor(e,u)&&(l[u]=H(e[u],void 0,r));return z(l)}function U(e){return function(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}}function K(e,t){return function(){var r=[].slice.call(arguments),i=r.shift();return Array.isArray(i)?t.apply(i,r):e.apply(i,r)}}return H.from=H,H.isImmutable=d,H.ImmutableError=h,H.merge=U(T),H.replace=U(E),H.without=U(k),H.asMutable=(S=B,j=P,G=_,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?j.apply(t,e):t instanceof Date?G.apply(t,e):S.apply(t,e)}),H.set=K(R,v),H.setIn=K(L,A),H.update=U(F),H.updateIn=U($),H.getIn=U(W),H.flatMap=U(C),H.asObject=U(w),o.use_static||(H.static=e({use_static:!0})),Object.freeze(H),H}();void 0===(i=function(){return o}.call(t,r,t,e))||(e.exports=i)}()},93967:function(e,t){var r;!function(){"use strict";var i={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=a(e,s(r)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)i.call(e,r)&&e[r]&&(t=a(t,r));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,r),s.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};!function(){"use strict";r.r(i),r.d(i,{RightClickOptions:function(){return oe},RightClickOptionsContainer:function(){return We},filterAttributesByType:function(){return Y},filterOutModuleSpecificAttributes:function(){return ee},filterSpecificAttributes:function(){return J},getAttributesByCategory:function(){return M},getBaseMenuItem:function(){return H},getColorPickerOptions:function(){return He},getExtendGroupOptions:function(){return q},getGradientStopOptions:function(){return Ke},getMenuItemContent:function(){return W},getModalDraggableChildModuleListOptions:function(){return qe},getModalFieldOptions:function(){return et},getModalGroupOptions:function(){return it},getModalGroupTabOptions:function(){return st},getModalTabOptions:function(){return nt},getModifiedOptionGroups:function(){return O},getModuleLabelById:function(){return d},getModuleOptions:function(){return dt},getOptionOnClickPath:function(){return u},getParentMenu:function(){return T},getPasteFieldAttrName:function(){return p},getPasteGroupOptions:function(){return R},getPasteModuleOptionNoun:function(){return c},getPastePosition:function(){return b},getResetGroupOptions:function(){return E},getRightClickOptions:function(){return pt},getTargetModuleAttrsMaps:function(){return X},getUniqSelectedModuleIds:function(){return m},hasAttributesToReset:function(){return I},hasCopyModuleOption:function(){return h},hasPasteFieldOption:function(){return f},hasPasteFieldToGroupOption:function(){return y},hasPasteGroupToGroupOption:function(){return v},hasRelevantAttributesToPaste:function(){return A},isModuleTypesMatch:function(){return F},normalizeCategorizationKey:function(){return w},normalizePresetGroupName:function(){return P},onClickCloneModule:function(){return ae},onClickCopyField:function(){return ne},onClickCopyGroup:function(){return le},onClickCopyGroupTab:function(){return de},onClickCopyModule:function(){return ue},onClickCopyModuleAttributes:function(){return pe},onClickCopyModuleStyle:function(){return ce},onClickDeleteColumn:function(){return be},onClickDeleteModule:function(){return ge},onClickDisableGlobal:function(){return he},onClickEditModule:function(){return ye},onClickExpandAndActivateLayerModules:function(){return fe},onClickExtendAttributes:function(){return Ce},onClickPasteAttributes:function(){return we},onClickPasteAttrsToAttrs:function(){return Ie},onClickPasteFieldAttrToAttr:function(){return ke},onClickPasteFieldAttrToFlexibleAttr:function(){return Pe},onClickPasteGroupAttrsToFlexibleGroupAttrs:function(){return Oe},onClickPasteModule:function(){return Ne},onClickPasteModuleWithPosition:function(){return Te},onClickRemoveModule:function(){return Se},onClickResetAttributes:function(){return je},onClickSaveToLibrary:function(){return Ee},onClickUndoRedoOptions:function(){return $e},onCloseRightClickOptions:function(){return Ge},onMount:function(){return Re},onOptionMouseEnter:function(){return Fe},onUnmount:function(){return De},regenerateInteractionIds:function(){return Q},registerGroupPreset:function(){return C},registerRightClickOptionsStore:function(){return xt},resetOptionGroup:function(){return N},selectChild:function(){return ct},selectNext:function(){return gt},selectParent:function(){return bt},selectPrev:function(){return mt},set:function(){return ht},setOwnerData:function(){return ft},setSelected:function(){return yt},unset:function(){return vt},updateGroupPreset:function(){return k}});var e={};r.r(e),r.d(e,{selectChild:function(){return ct},selectNext:function(){return gt},selectParent:function(){return bt},selectPrev:function(){return mt},set:function(){return ht},setOwnerData:function(){return ft},setSelected:function(){return yt},unset:function(){return vt}});var t={};r.r(t),r.d(t,{getState:function(){return It},isActive:function(){return At},isModuleRightClicked:function(){return St},isRightClickMenuActiveForField:function(){return jt}});var o=window.vendor.wp.hooks;const s=["module.decoration.interactionTarget"];var a=window.lodash,n=window.vendor.wp.i18n,l=window.divi.data;const d=(e,t="")=>{const r=(0,l.select)("divi/edit-post").getModuleName(e)||t,i=(0,l.select)("divi/module-library").getModule(r);let o=(0,a.get)(i,"title",""),s=(0,a.get)(i,"titles","");if("divi/shortcode-module"===r){const t=(0,l.select)("divi/edit-post").getModule(e),r=(0,l.select)("divi/settings").getSetting(["shortcodeModuleDefinitions",t?.props?.attrs.shortcodeName]);o=r?.name??"",s=r?.plural??""}return{structure:o?"structure"===(0,a.get)(i,"category")?o:(0,n.__)("Module","et_builder"):"",structures:s?"structure"===(0,a.get)(i,"category")?s:(0,n.__)("Modules","et_builder"):"",name:o}},u=(e,t)=>{if((0,a.isEqual)([0],e))return["options",String(t),"onClick"];const r=[].concat(e).splice(1).join("-children-").split("-");return["options"].concat(r).concat(["children",String(t),"onClick"])},p=({attrName:e,subName:t,attrsMaps:r,groupName:i})=>{const o=t?e.split(".").concat(t.split(".")):[e];return(0,a.has)(r,["attrsStructureMap"].concat(o))?e:(0,a.get)(r,["attrsGroupNameMap",i,t,0])},c=({clipboardType:e,moduleId:t,moduleIds:r,moduleName:i})=>"module"===e?(0,a.get)(d(t,i),"structure"):(0,a.get)(d(r[0],i),"structures");var g=window.divi.moduleUtils;const b=({ownerParentModuleType:e,ownerModuleType:t,clipboardModuleType:r})=>(0,g.isValidChild)(e,r)?"after":!!(0,g.isValidChild)(t,r)&&"inside",m=({moduleId:e,selectedModuleIds:t})=>(0,a.isArray)(t)?(0,a.uniq)(t.concat([e])):[e],h=e=>{const{isCloneable:t,selectedModuleIds:r}=e;if(!t)return!1;if(1===r.length)return!0;const i=(0,l.select)("divi/edit-post").getModulesByIds(r);return 1===(0,g.extractModuleTypes)(i,{"fullwidth-section":"section","specialty-section":"section"}).length},f=({fieldName:e,clipboardItemFieldName:t,fieldOptions:r,clipboardItemFieldOptions:i})=>!!e&&(!!t&&(e===t&&(0,a.isEqual)(r,i))),y=({clipboardItem:e,attrsMaps:t})=>{if((0,a.isObject)(e)&&"moduleFieldAttribute"===e.clipboardType){const r=e.getIn(["payload"]),i=r.getIn(["attrName"]),o=r.getIn(["subName"]),s=r.getIn(["groupName"]),n=o?i.split(".").concat([o]):[i],l=(0,a.has)(t,["attrs"].concat(n)),d=!(0,a.isEmpty)((0,a.get)(t,["attrsGroupNameMap",s,o]));return l||d}return!1},v=e=>{const{modalName:t,modalTab:r,groupId:i,groupName:o,clipboardItem:s}=e;if((0,a.isObject)(s)&&"moduleGroupAttributes"===s.clipboardType){const{payload:e}=s,a=t===e.modalName,n=r===e.modalTab,l=i===e.groupId,d=o===(e.groupName||e.groupId),u=a&&d&&l;return a&&n&&l||u}return!1},M=e=>{const t={},r={},i={};return Object.entries(e).forEach((([e,o])=>{if("groupPreset"===e)i.groupPreset=o;else if("modulePreset"===e)i.modulePreset=o;else if("object"==typeof o&&null!==o){if("module"===e){const i=o,s={},a={};return Object.entries(i).forEach((([e,t])=>{if("meta"===e)s[e]=t;else if("advanced"===e&&"object"==typeof t&&null!==t){const r=t;"link"in r&&(s[e]={link:r.link});const i={...r};delete i.link,Object.keys(i).length>0&&(a[e]=i)}else a[e]=t})),Object.keys(s).length>0&&Object.assign(t,{[e]:s}),void(Object.keys(a).length>0&&Object.assign(r,{[e]:a}))}const i={},s={};Object.entries(o).forEach((([e,t])=>{"innerContent"===e?i[e]=t:s[e]=t})),Object.keys(i).length>0&&Object.assign(t,{[e]:i}),Object.keys(s).length>0&&Object.assign(r,{[e]:s})}else Object.assign(r,{[e]:o})})),{contentAttrs:t,styleAttrs:r,presetAttrs:i}},A=(e,t,r,i)=>{const o=i.attrs?.asMutable?.({deep:!0})||{},s=i.attributeType;let a=!1,n=!1,l=!1;if("childModuleIds"in i&&Array.isArray(i.childModuleIds)&&i.childModuleIds.length>0&&(n=!0),(0,g.isNonEmptyObject)(o)){const{contentAttrs:e,styleAttrs:t}=M(o);a=a||(0,g.isNonEmptyObject)(t),n=n||(0,g.isNonEmptyObject)(e),l="groupPreset"in o||"modulePreset"in o}else"fieldAttr"in i&&("content"===s?n=!0:"style"===s&&(a=!0));switch(r){case"content":return n;case"style":return a;case"preset":return l;case"design":return a||l;case"all":return a||n||l;default:return!1}},I=(e,t,r)=>{const i=(0,l.select)("divi/edit-post").getModuleAttrs(e);if(!i)return!1;const o=r?.attrsMaps;if(!o)return!1;if(t.includes("preset")){const e=i.modulePreset&&i.modulePreset.length>0,t=i.groupPreset&&Object.values(i.groupPreset).some((e=>e?.getIn(["presetId"])));if(e||t)return!0}if(t.includes("style")){const e=o.attrsCategoryMap?.style;if(e){if(Object.entries(e).some((([e])=>!e.includes("innerContent")&&(0,g.isNonEmptyObject)(i.getIn(e.split("."))))))return!0}}if(t.includes("content")){const t=o.attrsCategoryMap?.content;if(t){if(Object.entries(t).some((([e])=>(0,g.isNonEmptyObject)(i.getIn(e.split("."))))))return!0}const r=(0,l.select)("divi/edit-post").getModule(e);if(r?.children&&Array.isArray(r.children)&&r.children.length>0)return!0}return!1};var _=window.divi.clipboard;const C=e=>{const{payload:t}=e.clipboardItem,{groupId:r}=t;if(!r)return!1;const i=(t.groupPreset||t.attrs?.groupPreset)?.[r];if(!i)return!1;const o=(0,g.normalizePresetStack)(i.presetId);if(0===o.length)(0,l.dispatch)("divi/edit-post").removeGroupPresetAttribute(e.targetModuleId,"groupPreset",r,"user");else{const t=(0,l.select)("divi/edit-post").getModuleAttrs(e.targetModuleId).getIn(["groupPreset",r,"presetId"]),s=(0,g.normalizePresetStack)(t),a=o.filter((e=>!s.includes(e)));a.length>0&&a.forEach((t=>{(0,l.dispatch)("divi/edit-post").addGroupPresetToStack({id:e.targetModuleId,groupId:r,groupName:i.groupName,presetId:t,caller:"user"})}))}const s=(0,l.select)("divi/edit-post").getContent()?.asMutable({deep:!0}),a=(0,g.populateUsedGroupPresets)(s);return(0,l.dispatch)("divi/edit-post").updateUsedPresets({presetType:"group",presets:a}),!0},k=({moduleId:e,presetPath:t,presetValue:r})=>{let i=(0,l.select)("divi/edit-post").getModuleAttrs(e);i=i.setIn(["groupPreset",t],r);const{groupPreset:o}=i;let s=null;if(o){const t=(0,_.convertGroupPreset)({clipboardItem:{payload:{groupPreset:o}},targetModuleId:e});t&&"object"==typeof t&&"groupPreset"in t&&(s={groupPreset:t.groupPreset})}const a=s?i.set("groupPreset",s.groupPreset):i;(0,l.dispatch)("divi/edit-post").replaceModuleAttributes(e,a,"user",!0),s?.groupPreset&&Object.entries(s.groupPreset).forEach((([t])=>{C({clipboardItem:{payload:{attrs:i,groupPreset:s.groupPreset,groupId:t}},targetModuleId:e,attributeType:"preset"})}))},P=e=>{let t=(0,g.getAttributeCategorizationKey)(e);return t=(0,g.camelCaseToLabel)(t),t=t.replace(/Content/g,"Body").replace(/Font/g,"Body").replace(/Html/g,"HTML").replace(/Css/g,"CSS").replace(/Attributes/g,"").replace(/^(Design|Advanced|Content|Module)\s?/,""),t},w=e=>{const t=(0,g.getAttributeCategorizationKey)(e).replace(/^(design|advanced|content)/i,"");return t.charAt(0).toLowerCase()+t.slice(1)},O=(e,t="all")=>{const r=M(e.asMutable?.({deep:!0})??{}),{contentAttrs:i,styleAttrs:o,presetAttrs:s}=r,a={},n=e=>{e&&"object"==typeof e&&Object.entries(e).forEach((([e,t])=>{if(t&&"object"==typeof t){if("module"===e)return void Object.entries(t).forEach((([,e])=>{e&&"object"==typeof e&&Object.keys(e).forEach((e=>{const t=(0,g.getAttributeCategorizationKey)(e);t&&(a[t]={hasPreset:!1,hasModifiedValues:!0})}))}));const r=(0,g.getAttributeCategorizationKey)(e);r&&(a[r]={hasPreset:!1,hasModifiedValues:!0})}}))},l=()=>{s.groupPreset&&Object.entries(s.groupPreset).forEach((([e,t])=>{if(!t||"object"!=typeof t||!("presetId"in t)||null===t.presetId)return;const r=(0,g.getAttributeCategorizationKey)(e);r&&(a[r]?a[r].hasPreset=!0:a[r]={hasPreset:!0,hasModifiedValues:!1})}))};switch(t){case"design":n(o),l();break;case"style":n(o);break;case"content":n(i);break;case"preset":l();break;case"all":n(o),n(i),l()}return Object.entries(a).map((([e,{hasPreset:t,hasModifiedValues:r}])=>({path:e,hasPreset:t,hasModifiedValues:r})))},N=({moduleId:e,groupPath:t,attrsMaps:r,resetPreset:i=!1,type:o="style"})=>{const s=(0,l.select)("divi/edit-post").getModule(e);if(!s)return;const a=s.props?.attrs;if(!a)return;let n=a;if(("preset"===o||i)&&a.groupPreset){const e={},r=a.groupPreset;Object.keys(r).forEach((i=>{(i.startsWith("module.")?i.endsWith(t):i.startsWith(t))||(e[i]=r[i])})),n=n.set("groupPreset",e)}if("preset"!==o&&r?.attrsCategoryMap?.all){const e={},i=r.attrsCategoryMap.all;Object.entries(i).forEach((([r,i])=>{(r.startsWith("module.")?r.endsWith(t):r.startsWith(t))&&(e[r]=i)})),n=(0,_.resetTargetAttrsBasedOnOverlapppingAttrsMaps)({sourceAttrsMap:e,targetAttrsMap:e,targetAttrs:n})}(0,l.dispatch)("divi/edit-post").replaceModuleAttributes(e,n,"user",!0),(0,l.dispatch)("divi/right-click-options").unset()},T=(e,t,r,i)=>({name:e,label:t,onClick:()=>{(0,l.dispatch)("divi/right-click-options").unset()},enable:r,...i&&i.length>0?{children:i}:{}}),E=({moduleId:e,moduleAttrs:t,attrsMaps:r,type:i,resetPreset:o,label:s})=>{const a=O(t,i),l=[];return a.forEach((({path:t,hasPreset:s})=>{if("preset"===i&&!s)return;const a="preset"===i?P(t):(0,g.normalizeOptionGroupName)(t);l.push(((e,t,r,i,o,s)=>({name:`reset-${e}-group-${t.replace(/\./g,"-")}`,label:(0,n.sprintf)((0,n.__)("Reset %1$s %2$s","et_builder"),r,"preset"===e?(0,n.__)("Preset","et_builder"):(0,n.__)("Attributes","et_builder")),onClick:()=>N({moduleId:i,groupPath:t,attrsMaps:o,resetPreset:"preset"===e||"design"===e||s,type:e})}))(i,t,a,e,r,o))})),T(`reset-select-${i}-groups`,s,l.length>0,l.length>0?l:[])};var S=r(33042),j=r.n(S);const G=(e,t)=>{Object.values(e).forEach((e=>{(0,g.isPlainObject)(e)&&Object.keys(e).forEach((e=>{const r=(0,g.getAttributeCategorizationKey)(e);t(r)}))}))},x=(e,t,r,i)=>({name:`paste-${e}-${t.toLowerCase()}`,label:(0,n.sprintf)((0,n.__)("Paste %1$s Attributes","et_builder"),r),onClick:i});let L=()=>{};const R=({owner:e,clipboardPayload:t,attributeType:r,label:i})=>{const o=[],s=t&&"function"==typeof t.getIn?t.getIn(["attrs"]):t?.attrs,a=s?M(s.asMutable?.({deep:!0})??s):null,{contentAttrs:d,styleAttrs:u,presetAttrs:p}=a??{contentAttrs:{},styleAttrs:{},presetAttrs:{}},c=t&&"function"==typeof t.getIn?t.getIn(["attrsMap"])||{}:t?.attrsMap||{},b=e?.attrsMaps?.attrsCategoryMap?.all||{};if("preset"===r)return p.groupPreset&&Object.keys(p.groupPreset).length>0&&Object.entries(p.groupPreset).forEach((([t,r])=>{if(!r||null===r.presetId)return;const i=P(t);o.push({name:`paste-preset-${i}`,label:(0,n.sprintf)((0,n.__)("Paste %1$s Preset","et_builder"),i),onClick:()=>{k({moduleId:e.id,presetPath:t,presetValue:r}),(0,l.dispatch)("divi/right-click-options").unset()}})})),T(`paste-select-${r}-attributes`,i,o.length>0,o);if("design"===r){const t=new Set;return Object.entries(u).forEach((([e,r])=>{if((0,g.isPlainObject)(r)&&Object.keys(r).length>0)if("module"===e)G(r,(e=>t.add(e)));else{const r=(0,g.getAttributeCategorizationKey)(e);t.add(r)}})),p.groupPreset&&Object.keys(p.groupPreset).forEach((e=>{const r=(0,g.getAttributeCategorizationKey)(e);r&&t.add(r)})),t.forEach((t=>{const i=P(t);o.push(x("design",t,i,(()=>{if(L(e,r,{sourceAttrsMap:c,sourceAttrs:j()(u),targetModuleId:e.id,targetAttrsMap:b,targetAttrs:(0,l.select)("divi/edit-post").getModuleAttrs(e.id),styleGroup:t}),p.groupPreset){const r=Object.keys(p.groupPreset).find((e=>(0,g.getAttributeCategorizationKey)(e)===t));if(r){const t=p.groupPreset[r];k({moduleId:e.id,presetPath:r,presetValue:t})}}(0,l.dispatch)("divi/right-click-options").unset()})))})),T(`paste-select-${r}-attributes`,i,o.length>0,o)}const m=new Set,h="style"===r?u:d;return Object.entries(h).forEach((([t,i])=>{if((0,g.isPlainObject)(i)&&Object.keys(i).length>0)if("module"===t)G(i,(t=>{if(!m.has(t)){m.add(t);const i=(0,g.normalizeOptionGroupName)(t);o.push(x(r,t,i,(()=>{L(e,r,{sourceAttrsMap:c,sourceAttrs:j()(h),targetModuleId:e.id,targetAttrsMap:b,targetAttrs:(0,l.select)("divi/edit-post").getModuleAttrs(e.id),styleGroup:t}),(0,l.dispatch)("divi/right-click-options").unset()})))}}));else{const i=(0,g.getAttributeCategorizationKey)(t);if(!m.has(i)){m.add(i);const t=(0,g.normalizeOptionGroupName)(i);o.push(x(r,i,t,(()=>{L(e,r,{sourceAttrsMap:c,sourceAttrs:j()(h),targetModuleId:e.id,targetAttrsMap:b,targetAttrs:(0,l.select)("divi/edit-post").getModuleAttrs(e.id),styleGroup:i}),(0,l.dispatch)("divi/right-click-options").unset()})))}}})),T(`paste-select-${r}-attributes`,i,o.length>0,o)},F=(e,t)=>{const r=(0,l.select)("divi/edit-post").getModule(e)?.name,i=t?.name;return r===i};var D=window.vendor.React,$=r.n(D);const W=e=>$().createElement($().Fragment,null,e.label,e.shortcut&&$().createElement("span",{className:"et-vb-right-click-option-shortcut"},e.shortcut.join(" ")));var B=r(93967),V=r.n(B),z=window.divi.window;const H=({option:e,parent:t,optionIndex:r,selected:i,selectedParent:o,onOptionMouseEnter:s,onOptionClick:n,showChildren:l,children:d=null})=>{const u=r===i&&(0,a.isEqual)(t,o),p=!(e?.enable??1),c=(0,a.has)(e,"children");return $().createElement(D.Fragment,{key:`right-click-option-${e.name}`},e.topSeparator&&$().createElement("span",{className:"et-vb-right-click-option-separator"}),$().createElement("span",{className:V()({"et-vb-right-click-option-wrap":!0,"et-vb-right-click-option-wrap--active":u,"et-vb-right-click-option-wrap--disabled":p,"et-vb-right-click-option-wrap--has-children":c})},$().createElement("button",{type:"button",className:"et-vb-right-click-option",onClick:z.handleOnClickFallback,value:e.name,onMouseEnter:s,onMouseDown:n,"aria-label":e.label},W(e)),l&&d),e.bottomSeparator&&$().createElement("span",{className:"et-vb-right-click-option-separator"}))},U=(e,t)=>{Object.values(e).forEach((e=>{(0,g.isPlainObject)(e)&&Object.keys(e).forEach((e=>{const r=(0,g.getAttributeCategorizationKey)(e);t(r)}))}))},K=(e,t,r,i)=>({name:`extend-${e}-${t.toLowerCase()}`,label:(0,n.sprintf)((0,n.__)("Extend %1$s Attributes","et_builder"),r),onClick:()=>{(0,l.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:i,attributes:{defaultOptionGroup:t,defaultAttributeType:e},dimension:{width:280,height:542}}),(0,l.dispatch)("divi/right-click-options").unset()}}),q=({owner:e,attributeType:t,label:r})=>{const i=[],o=(0,l.select)("divi/edit-post").getModuleAttrs(e.id),s=o?M(o.asMutable?.({deep:!0})??{}):null,{contentAttrs:a,styleAttrs:d,presetAttrs:u}=s??{contentAttrs:{},styleAttrs:{},presetAttrs:{}};if("preset"===t)return u.groupPreset&&Object.keys(u.groupPreset).length>0&&Object.entries(u.groupPreset).forEach((([t,r])=>{if(!r||null===r.presetId)return;const o=(0,g.getAttributeCategorizationKey)(t),s=P(t);i.push({name:`extend-preset-${s}`,label:(0,n.sprintf)((0,n.__)("Extend %1$s Preset","et_builder"),s),onClick:()=>{(0,l.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:e.id,attributes:{defaultOptionGroup:o,defaultAttributeType:"preset"},dimension:{width:280,height:542}}),(0,l.dispatch)("divi/right-click-options").unset()}})})),T(`extend-select-${t}-attributes`,r,i.length>0,i);if("design"===t){const o=new Set;return Object.entries(d).forEach((([e,t])=>{if((0,g.isPlainObject)(t)&&Object.keys(t).length>0)if("module"===e)U(t,(e=>o.add(e)));else{const t=(0,g.getAttributeCategorizationKey)(e);o.add(t)}})),u.groupPreset&&Object.keys(u.groupPreset).forEach((e=>{const t=(0,g.getAttributeCategorizationKey)(e);t&&o.add(t)})),o.forEach((t=>{const r=P(t);i.push(K("design",t,r,e.id))})),T(`extend-select-${t}-attributes`,r,i.length>0,i)}const p=new Set,c="style"===t?d:a;return Object.entries(c).forEach((([r,o])=>{if((0,g.isPlainObject)(o)&&Object.keys(o).length>0)if("module"===r)U(o,(r=>{if(!p.has(r)){p.add(r);const o=(0,g.normalizeOptionGroupName)(r);i.push(K(t,r,o,e.id))}}));else{const o=(0,g.getAttributeCategorizationKey)(r);if(!p.has(o)){p.add(o);const r=(0,g.normalizeOptionGroupName)(o);i.push(K(t,o,r,e.id))}}})),T(`extend-select-${t}-attributes`,r,i.length>0,i)},X=e=>{const t=(0,l.select)("divi/edit-post").getModule(e),r=(0,l.select)("divi/edit-post").getModuleAttrs(e);if(!t||!r)return null;const i=(0,l.select)("divi/edit-post").getModuleName(e),o=(0,_.getComponentAttrsMapsId)({attrsMapsType:"module",moduleName:i}),s=(0,l.select)("divi/clipboard").getComponentAttrsMaps(o)?.getIn(["attrsMaps"]),a=s?.asMutable({deep:!0})||null;return{targetModule:t,targetAttrs:r,targetModuleName:i,targetAttrsMaps:a,targetAttrsMapForNormalization:a?.attrsCategoryMap?.all||{}}},Y=(e,t)=>{if(!e||"object"!=typeof e)return{};let r;r=(0,g.isImmutableObject)(e)?e.asMutable({deep:!0}):e;const i=M(r),{contentAttrs:o,styleAttrs:s,presetAttrs:a}=i;let n;switch(t){case"content":n=o;break;case"style":n=s;break;case"design":n={...s,...a};break;case"preset":n=a;break;default:n={...a};new Set([...Object.keys(o),...Object.keys(s)]).forEach((e=>{const t=o[e],r=s[e];t&&r&&"object"==typeof t&&"object"==typeof r?n[e]={...t,...r}:t?n[e]=t:r&&(n[e]=r)}));break}return n};function J(e,t){if(!e||0===t.length)return e;if("getIn"in e&&"setIn"in e){let r=e;return t.forEach((e=>{const t=e.split(".");if(r.getIn(t)){const e=t.length-1,i=t.slice(0,e),o=t[e],s=r.getIn(i);r=r.setIn(i,s.without(o))}})),r}if(!(0,a.isObject)(e))return e;if(!t.some((t=>(0,a.has)(e,t))))return e;const r=structuredClone(e);return t.forEach((e=>{(0,a.has)(r,e)&&(0,a.unset)(r,e)})),r}var Z=window.divi.globalData;const Q=e=>{const t=e,r=t?.module?.decoration?.interactions?.desktop?.value?.interactions;if(!Array.isArray(r)||0===r.length)return e;const i=(0,Z.generateNanoUuid)(),o=(0,Z.generateNanoUuid)();return t.module||(t.module={}),t.module.decoration||(t.module.decoration={}),t.module.decoration.interactionTrigger=i,t.module.decoration.interactionTarget=o,r.forEach((e=>{e.triggerClass=`et-interaction-trigger-${i}`,e.target&&(e.target.targetClass=`et-interaction-target-${o}`)})),e},ee=(e,t)=>{if(!e)return e;const r={...e};return t.forEach((e=>{r[e]&&delete r[e]})),r};(0,o.addFilter)("divi.cloneModule.attrs","divi/right-click-options",(e=>J(e,s))),(0,o.addFilter)("divi.cloneModule.attrs","divi/right-click-options/interaction-ids-regeneration",(e=>Q(e)),20);const te=$().memo((({options:e,parent:t,selected:r,selectedParent:i,parentElement:o,windowHeight:s,renderOption:a})=>{const n=(0,D.useRef)(null),[l,d]=(0,D.useState)(0),u=i.concat([r]).join("-"),p=t.join("-"),c=u.startsWith(p);return(0,D.useEffect)((()=>{if(n.current&&o){const e=o.getBoundingClientRect(),t=n.current.offsetHeight,r=e.top+t,i=Math.max(0,r-s);d(i>0?-i:0)}}),[o,s]),$().createElement("div",{ref:n,className:"et-vb-right-click-option-children",style:{top:l,visibility:c?"visible":"hidden",pointerEvents:c?"auto":"none"}},e.map(((e,t)=>a(e,t))))})),re=$().memo((({option:e,parent:t,optionIndex:r,selected:i,selectedParent:o,onOptionMouseEnter:s,windowHeight:n})=>{const l=(0,D.useRef)(null),d=(0,a.isArray)(e.children),u=(0,D.useCallback)((()=>{s(t,r)}),[s,t,r]);return $().createElement("span",{ref:l},H({option:e,parent:t,optionIndex:r,selected:i,selectedParent:o,onOptionMouseEnter:u,onOptionClick:e?.enable??1?e.onClick:a.noop,showChildren:d,children:d&&l.current?$().createElement(te,{options:e.children,parent:t.concat([r]),selected:i,selectedParent:o,parentElement:l.current,windowHeight:n,renderOption:(e,a)=>$().createElement(re,{key:e.name,option:e,parent:t.concat([r]),optionIndex:a,selected:i,selectedParent:o,onOptionMouseEnter:s,windowHeight:n})}):null}))})),ie=$().memo((({option:e,parent:t,optionIndex:r,selected:i,selectedParent:o,onOptionMouseEnter:s,windowHeight:n})=>{const l=(0,D.useRef)(null),d=(0,a.isArray)(e.children),u=(0,D.useCallback)((()=>{s(t,r)}),[s,t,r]);return $().createElement("span",{ref:l},H({option:e,parent:t,optionIndex:r,selected:i,selectedParent:o,onOptionMouseEnter:u,onOptionClick:e?.enable??1?e.onClick:a.noop,showChildren:d,children:d&&l.current?$().createElement(te,{options:e.children,parent:t.concat([r]),selected:i,selectedParent:o,parentElement:l.current,windowHeight:n,renderOption:(e,a)=>$().createElement(re,{key:e.name,option:e,parent:t.concat([r]),optionIndex:a,selected:i,selectedParent:o,onOptionMouseEnter:s,windowHeight:n})}):null}))})),oe=({cursorPosition:e,windowHeight:t,windowWidth:r,options:i,selected:o,selectedParent:s,appWindowOffset:l,onMount:d=a.noop,onUnmount:u=a.noop,onOptionsContextMenu:p=a.noop,onOverlayClick:c=a.noop,onOverlayContextMenu:g=a.noop,adminBarHeight:b,builderBarWidth:m,pageBarHeight:h,sidebarLeftWidth:f,windowLocation:y="top",zoomScale:v,onOptionMouseEnter:M=a.noop})=>{const A=(0,D.useRef)(null),[I,_]=(0,D.useState)(0),[C,k]=(0,D.useState)(!1);(0,D.useEffect)((()=>{(0,a.isFunction)(d)&&d();const e=new ResizeObserver((e=>{e.forEach((e=>{const t=e.contentRect.width;t!==I&&(_(t),k(!0))}))}));return A.current&&e.observe(A.current),()=>{(0,a.isFunction)(u)&&u(),e.disconnect()}}),[d,u,I]);const P=(({appWindowOffsetLeft:e,cursorX:t,windowWidth:r,builderBarWidth:i,sidebarLeftWidth:o,windowLocation:s,zoomScale:a,menuWidth:n})=>{const l=t-(t>r-n?n:0);return{property:"left",value:"app"===s?l*a+i+o+e:l}})({cursorX:e.x,appWindowOffsetLeft:l.left,windowWidth:r,builderBarWidth:m,sidebarLeftWidth:f,windowLocation:y,zoomScale:v,menuWidth:I}),w=(({cursorY:e,windowHeight:t,appWindowOffsetTop:r,adminBarHeight:i,pageBarHeight:o,windowLocation:s,zoomScale:a})=>{const n="app"===s?e*a:e,l=n>t/2?"bottom":"top",d="app"===s?i+o:0;return{property:l,value:"top"===l?n+d:t-n-r-d}})({cursorY:e.y,windowHeight:t,appWindowOffsetTop:l.top,adminBarHeight:b,pageBarHeight:h,windowLocation:y,zoomScale:v}),O=r-e.x<2*I?"left":"right";return $().createElement($().Fragment,null,$().createElement("div",{ref:A,className:`et-vb-right-click-options et-vb-right-click-options--${w.property} et-vb-right-click-options-children-direction--${O}`,style:{[P.property]:P.value,[w.property]:w.value,opacity:C?1:0},onContextMenu:p},i.map(((e,r)=>((e,t,r,i,o,s,a)=>{const n=$().createElement(ie,{option:e,parent:t,optionIndex:r,selected:i,selectedParent:o,onOptionMouseEnter:s,windowHeight:a});return e?.url?$().createElement("a",{href:e.url,key:e.name},n):$().createElement("span",{key:e.name},n)})(e,[0],r,o,s,M,t)))),$().createElement("div",{className:"et-vb-right-click-overlay",role:"button",tabIndex:0,"aria-label":(0,n.__)("Right Click Options Overlay","et_builder"),onKeyDown:a.noop,onClick:z.handleOnClickFallback,onContextMenu:g,onMouseDown:c}))};var se=window.divi.uiLibrary;const ae=(e,t,r)=>{const i={id:e,moduleAppearanceSettings:(0,l.select)("divi/module-library").getModuleAppearanceSettings(),themeBuilderLayout:(0,l.select)("divi/settings").getSetting(["themeBuilder","layout"]),moduleCount:(0,l.select)("divi/module").getModuleCount()};if(r){(0,g.isParentFlexLayout)({moduleId:e})?(0,l.dispatch)("divi/edit-post").cloneFlexColumn(i):(0,l.dispatch)("divi/edit-post").cloneColumn(i)}else(0,l.dispatch)("divi/edit-post").cloneModule(i,t);(0,l.dispatch)("divi/right-click-options").unset()},ne=({attrName:e,subName:t,moduleId:r,modalName:i,modalTab:o,fieldName:s,fieldOptions:a,fieldLabel:n,groupName:d,moduleObject:u,isModulePresetEditMode:p,isOptionGroupPresetEditMode:c,presetEditMode:b})=>{let m,h={};if(p){const i=(0,l.select)("divi/edit-post").getModuleName(r),o=(0,l.select)("divi/edit-post").getModuleAttrs(r),s=(0,g.maybeConvertPresetModuleName)(i,o),a=(0,l.select)("divi/edit-post").getSelectedModulePreset(r),n=(0,g.normalizePresetStack)(a),d=n[n.length-1];if(d){m=(0,l.select)("divi/global-data").getPresetAttr({moduleName:s,id:d,attrName:e,presetType:"module"}),h=m?(0,g.extractFieldAttrValue)(m,t):{}}}else if(c&&b?.groupId){const i=(0,l.select)("divi/edit-post").getGroupPresetAttr(r,b.groupId)?.presetId;if(i){const r=(0,g.normalizePresetStack)(i),o=r[r.length-1];if(o){m=(0,l.select)("divi/global-data").getPresetAttr({moduleName:b.groupName||"",id:o,attrName:e,presetType:"group"}),h=m?(0,g.extractFieldAttrValue)(m,t):{}}}}else m=(0,g.getModuleAttributeValue)(e,u),h=m?(0,g.extractFieldAttrValue)(m,t):{};(0,l.dispatch)("divi/clipboard").addItem({origin:r,clipboardType:"moduleFieldAttribute",payload:{attrName:e,subName:t,moduleId:r,modalName:i,modalTab:o,fieldName:s,fieldOptions:a,fieldLabel:n,groupName:d,fieldAttr:h,attributeType:(0,_.getCopyType)(o,d)}}),(0,l.dispatch)("divi/right-click-options").unset()},le=({origin:e,moduleId:t,modalName:r,modalTab:i,groupId:o,groupLabel:s,groupName:a,attrsGroupNameMap:n,attrsMap:d,attrs:u})=>{const p=(0,_.getCopyType)(i,a),c=(0,l.select)("divi/edit-post").getGroupPresetAttr(t,o);let b=null;if(c){const e=c.getIn(["presetId"]),t=c.getIn(["groupName"]),r=(0,g.normalizePresetStack)(e);r.length>0&&t&&(b={presetId:r,groupName:t})}let m=[];if("divi/elements"===a){const e=(0,l.select)("divi/edit-post").getModule(t)?.children;if(e&&Array.isArray(e)){m=(e.asMutable?e.asMutable():[...e]).filter((e=>"string"==typeof e))}}const h={moduleId:t,modalName:r,modalTab:i,groupId:o,groupLabel:s,groupName:a,attrsGroupNameMap:n,attrsMap:d,attrs:{...u,...b?{groupPreset:{[o]:b}}:{}},attributeType:p,...m.length>0?{childModuleIds:m}:{}};(0,l.dispatch)("divi/clipboard").addItem({origin:e,clipboardType:"moduleGroupAttributes",payload:h}),(0,l.dispatch)("divi/right-click-options").unset()},de=({origin:e,moduleId:t,modalName:r,groupId:i,groupTabLabel:o,groupTabName:s,attrsMap:a,attrsGroupNameMap:n,attrs:d})=>{(0,l.dispatch)("divi/clipboard").addItem({origin:e,clipboardType:"moduleGroupTabAttributes",payload:{moduleId:t,modalName:r,groupId:i,groupTabLabel:o,groupTabName:s,attrsMap:a,attrsGroupNameMap:n,attrs:d}}),(0,l.dispatch)("divi/right-click-options").unset()},ue=({moduleId:e})=>{(0,_.copyModuleToClipboard)(e),(0,l.dispatch)("divi/right-click-options").unset()},pe=e=>{const{id:t,attrsMaps:r}=e,i=(0,l.select)("divi/edit-post").getModuleAttrs(t).asMutable({deep:!0}),o=(0,g.removeEmptyObjectRecursive)(i),s=(0,a.get)(r,["attrsCategoryMap","all"]),n=(0,a.get)(r,["fieldLabelsMap"],{});(0,l.dispatch)("divi/clipboard").addItem({origin:t,clipboardType:"moduleAttributes",payload:{moduleId:t,moduleLabel:(0,a.get)(d(t),["name"]),attrsMap:s,attrs:o,attributeType:"all",fieldLabelsMap:n}}),(0,l.dispatch)("divi/right-click-options").unset()},ce=({moduleId:e,moduleLabel:t,attrsMap:r,attrs:i})=>{const o=(0,l.select)("divi/edit-post").getModuleName(e),s=(0,_.buildFieldLabelsMap)({name:o});(0,l.dispatch)("divi/clipboard").addItem({origin:e,clipboardType:"moduleAttributes",payload:{moduleId:e,moduleLabel:t,attrsMap:r,attrs:i,attributeType:"style",fieldLabelsMap:s}}),(0,l.dispatch)("divi/right-click-options").unset()},ge=e=>{(0,l.dispatch)("divi/edit-post").removeModule(e),(0,l.dispatch)("divi/right-click-options").unset()},be=e=>{(0,l.dispatch)("divi/edit-post").removeColumn(e),(0,l.dispatch)("divi/right-click-options").unset()};function me(e){const{globalModule:t}=(0,l.select)("divi/edit-post").getModuleAttrs(e);if(t)return e;const r=(0,l.select)("divi/edit-post").getModule(e);return r.parent?me(r.parent):null}const he=({moduleId:e})=>{const t=me(e);(0,l.dispatch)("divi/edit-post").disableGlobalModule(t),(0,l.dispatch)("divi/right-click-options").unset()},fe=e=>{(0,l.select)("divi/edit-post").getAncestorModules(e).forEach((e=>{(0,l.dispatch)("divi/modal-library").setLayersViewModule({moduleId:e?.id,data:{expand:!0,active:!1}})})),(0,l.dispatch)("divi/modal-library").setLayersViewActiveModuleId(e)},ye=(e,t)=>{const r="divi/shortcode-module"===t?"divi/module-shortcode":"divi/module";(0,l.dispatch)("divi/modal-library").open({owner:e,name:r}),(0,l.dispatch)("divi/right-click-options").unset(),fe(e)},ve=["top","right","bottom","left","paddingTop","paddingRight","paddingBottom","paddingLeft","marginTop","marginRight","marginBottom","marginLeft"],Me=(e,t)=>{const r=(e=>{const t=e.split("."),r=t[t.length-1];if(!ve.includes(r))return null;const i=["padding","margin","borderRadius","transform"];let o=-1;for(let e=t.length-1;e>=0;e--)if(i.includes(t[e])){o=e;break}return o>=0?t.slice(0,o+1).join("."):null})(t),i=r||t,o=(0,a.get)(e,i);if(void 0===o)return{};return(0,g.createImmutableAttrs)({attr:o,propertyPath:i.split(".")}).asMutable({deep:!0})};function Ae({sourceAttrs:e,targetAttrsMap:t}){const r=e.getIn(["title","innerContent"]),i=t["title.innerContent"];function o(e){return!!e&&"object"==typeof e&&"value"in e}const s=r&&Object.values(r).every((e=>o(e)&&"string"==typeof e.value)),a=r&&Object.values(r).every((e=>o(e)&&"object"==typeof e.value&&"text"in e.value)),n=""===i||void 0===i;if(s&&(i&&"object"==typeof i&&"text"in i)){const t=Object.fromEntries(Object.entries(r).map((([e,t])=>[e,{value:{text:t.value}}])));return e.setIn(["title","innerContent"],t)}if(a&&n){const t=Object.fromEntries(Object.entries(r).map((([e,t])=>[e,{value:t.value.text}])));return e.setIn(["title","innerContent"],t)}return e}const Ie=({targetModuleId:e,sourceAttrsMap:t,sourceAttrs:r,targetAttrsMap:i,targetAttrs:o})=>{const a=J(r,s),{groupPreset:n,...d}=a.asMutable({deep:!0}),u="groupPreset"in a||"modulePreset"in a;let p=null;if(u&&n){const t=(0,_.convertGroupPreset)({clipboardItem:{payload:{groupPreset:n}},targetModuleId:e});t&&"object"==typeof t&&"groupPreset"in t&&(p={groupPreset:t.groupPreset})}const c=Ae({sourceAttrs:u&&p?j()({...d,groupPreset:p.groupPreset}):u?a:j()(d),targetAttrsMap:i}),g=(0,_.mergeAttrsIntoAttrs)({sourceAttrs:c,targetAttrsMap:i,targetAttrs:o});(0,l.dispatch)("divi/edit-post").replaceModuleAttributes(e,g),u&&p?.groupPreset&&Object.entries(p.groupPreset).forEach((([r])=>{C({clipboardItem:{payload:{attrs:j()(d),attrsMap:t,groupPreset:p.groupPreset,groupId:r}},targetModuleId:e,attributeType:"preset"})})),(0,l.dispatch)("divi/right-click-options").unset()},_e=(e,t,r,i,o)=>{const s=X(e);if(!s)return;const{targetAttrs:a,targetAttrsMapForNormalization:n}=s,l=Ae({sourceAttrs:j()(r),targetAttrsMap:n});Ie({sourceAttrsMap:t,sourceAttrs:l,targetModuleId:e,targetAttrsMap:n,targetAttrs:a}),((e,t,r,i,o)=>{if("all-modified"!==r||!["design","preset","all"].includes(e))return;const{presetAttrs:s}=M(i);if(s.groupPreset)if("all"===t&&["design","preset"].includes(e))Object.entries(s.groupPreset).forEach((([e,t])=>{t&&"object"==typeof t&&k({moduleId:o,presetPath:e,presetValue:t})}));else if("all"!==t){const e=Object.keys(s.groupPreset).find((e=>(0,g.getAttributeCategorizationKey)(e)===t));e&&s.groupPreset[e]&&k({moduleId:o,presetPath:e,presetValue:s.groupPreset[e]})}})(o.attributeType,o.optionGroup,o.modifiedFields,i,e)},Ce=({sourceModuleId:e,targetModuleIds:t,scope:r,attributeType:i="all",moduleTypes:o="all",optionGroup:s="all",modifiedFields:d="all-modified"})=>{const u=(0,l.select)("divi/edit-post").getModule(e);if(!u)return;const p=(0,l.select)("divi/edit-post").getModuleAttrs(e),c=u.getIn(["name"]);if(!p||!c)return;const b=(0,g.getSettingsComponent)(c),m=(0,_.getComponentAttrsMapsId)({attrsMapsType:"module",moduleName:c});(0,l.dispatch)("divi/history").disableHistoryTracking(),(0,_.waitUntilAttrsMapsReady)({id:m,attrsMapsType:"module",name:c,component:b,callback:c=>{const b=c?.attrsCategoryMap?.all;if(!b)return void(0,l.dispatch)("divi/history").enableHistoryTracking();const m=p.asMutable({deep:!0}),h=((e,t,r,i)=>{let o=Y(e,t);if("all"!==r&&(o=(0,g.filterAttributeMaps)(o,r)),"all-modified"!==i)if(["padding","margin","borderRadius","transform"].some((e=>i.includes(e)))){const t=Me(e,i);o=(0,a.merge)({},o,t)}else o=Me(o,i);return o})(m,i,s,d),f=(0,g.getModulesInScope)(e,r,t,o);let y=0;const v={attributeType:i,optionGroup:s,modifiedFields:d},M=[];if("elements"===s||"all"===s&&"content"===i||"all"===i){const e=u.getIn(["children"]);if(e&&Array.isArray(e)){const t=e.asMutable?e.asMutable():[...e];M.push(...t.filter((e=>"string"==typeof e)))}}(0,_.getOrWaitForAttrsMaps)({moduleIds:f,processModule:e=>{if(_e(e,b,h,m,v),M.length>0){const t=(0,l.select)("divi/edit-post").getModuleName(e),r=(0,l.select)("divi/edit-post").getModuleAttrs(e),i=(0,l.select)("divi/module").getModuleCount();M.forEach((o=>{if(!(0,l.select)("divi/edit-post").getModule(o))return;const s=(0,l.select)("divi/edit-post").getModuleName(o);if("string"!=typeof s)return;(0,l.select)("divi/module-library").isValidChild(t,r,s)&&(0,l.dispatch)("divi/edit-post").copyModule({id:o,targetId:e,position:"inside",moduleCount:i})}))}y++}}).then((()=>{if((0,l.dispatch)("divi/history").enableHistoryTracking(),y>0){const t=(0,l.select)("divi/edit-post").getContent();(0,l.dispatch)("divi/history").addLayoutItem({label:(0,n.__)("Extended Attributes","et_builder"),moduleId:e,moduleLabel:"",moduleName:"",state:t,timestamp:(new Date).getTime(),humanTime:(new Date).toLocaleTimeString(),type:"EXTEND_ATTRIBUTES",storeName:"divi/edit-post"})}})).catch((()=>{(0,l.dispatch)("divi/history").enableHistoryTracking()}))}}).catch((()=>{(0,l.dispatch)("divi/history").enableHistoryTracking()}))},ke=({sourceAttr:e,targetModuleId:t,targetAttr:r,targetAttrName:i,targetSubName:o,isModulePresetEditMode:s,isOptionGroupPresetEditMode:a,presetEditMode:n})=>{const d=(0,_.mergeFieldAttrIntoResponsiveAttr)({sourceFieldAttr:e,targetResponsiveAttr:r,targetSubName:o});if(a&&n?.groupId){let e;if(n.presetId)e=Array.isArray(n.presetId)?n.presetId:[n.presetId];else{e=(0,l.select)("divi/edit-post").getGroupPresetAttr(t,n.groupId)?.presetId}if(!e)return;const r=(0,g.normalizePresetStack)(e),o=r[r.length-1];if(!o)return;(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:n.groupName||"",presetId:o,attrName:i,attrValue:d,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else if(s){const e=(0,l.select)("divi/edit-post").getModuleName(t),r=(0,l.select)("divi/edit-post").getModuleAttrs(t),o=(0,g.maybeConvertPresetModuleName)(e,r),s=(0,l.select)("divi/edit-post").getSelectedModulePreset(t),a=(0,g.normalizePresetStack)(s),n=a[a.length-1];if(!n)return;(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:o,presetId:n,attrName:i,attrValue:d,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else(0,l.dispatch)("divi/edit-post").editModuleAttribute({id:t,attrName:i,value:d,subName:o??!1});(0,l.dispatch)("divi/right-click-options").unset()},Pe=({sourceAttr:e,targetModuleId:t,targetAttrName:r,targetSubName:i,targetGroupName:o,targetAttr:s,targetAttrsMaps:a})=>{const n=p({attrName:r,subName:i,groupName:o,attrsMaps:a});ke({sourceAttr:e,targetModuleId:t,targetAttrName:n,targetSubName:i,targetAttr:s})},we=(e,t,r)=>{const{id:i,clipboardItemStyle:o,selectedModuleIds:s}=e,n=(0,l.select)("divi/edit-post").getModule(i),d=o?.payload.asMutable({deep:!0});if(!d)return;const u=m({moduleId:i,selectedModuleIds:s});if("fieldAttr"in d)return void u.forEach((e=>{const t=(0,l.select)("divi/edit-post").getModuleName(e),r=(0,_.getComponentAttrsMapsId)({attrsMapsType:"module",moduleName:t}),i=(0,l.select)("divi/clipboard").getComponentAttrsMaps(r)?.getIn(["attrsMaps"]),o=i?.asMutable({deep:!0});Pe({sourceAttr:j()(d.fieldAttr),targetModuleId:e,targetAttrName:d.attrName,targetSubName:d.subName,targetGroupName:d.groupName,targetAttr:(0,l.select)("divi/edit-post").getModuleAttr(e,d.attrName),targetAttrsMaps:o})}));let p=j()(d.attrs);if(!F((0,a.get)(d,"moduleId"),n)){const e=p.asMutable({deep:!0});delete e.modulePreset,p=j()(e)}u.forEach((e=>{const i=X(e);if(!i)return;const{targetAttrs:o,targetAttrsMapForNormalization:s}=i,a=Y(p,t),n=r?.styleGroup?(0,g.filterAttributeMaps)(a,r.styleGroup):a;if(Ie({sourceAttrsMap:d.attrsMap||{},sourceAttrs:j()(n),targetModuleId:e,targetAttrsMap:s,targetAttrs:o}),"childModuleIds"in d&&Array.isArray(d.childModuleIds)){const t=(0,l.select)("divi/module").getModuleCount(),r=(0,l.select)("divi/edit-post").getModuleName(e),i=(0,l.select)("divi/edit-post").getModuleAttrs(e);d.childModuleIds.forEach((o=>{if("string"!=typeof o)return;if(!(0,l.select)("divi/edit-post").getModule(o))return;const s=(0,l.select)("divi/edit-post").getModuleName(o);if("string"!=typeof s)return;(0,l.select)("divi/module-library").isValidChild(r,i,s)&&(0,l.dispatch)("divi/edit-post").copyModule({id:o,targetId:e,position:"inside",moduleCount:t})}))}})),(0,l.dispatch)("divi/right-click-options").unset()};L=we;const Oe=({sourceAttrs:e,sourceAttrsGroupNameMap:t,targetAttrsMap:r,targetAttrsGroupNameMap:i,targetAttrs:o,targetModuleId:s})=>{const a=(0,_.mapAttrsIntoMatchingGroupNameAttrs)({sourceAttrs:e,sourceAttrsGroupNameMap:t,targetAttrsGroupNameMap:i}),n=(0,_.mergeAttrsIntoAttrs)({sourceAttrs:a,targetAttrsMap:r,targetAttrs:o});(0,l.dispatch)("divi/edit-post").replaceModuleAttributes(s,n),(0,l.dispatch)("divi/right-click-options").unset()},Ne=({moduleId:e})=>{(0,_.pasteModuleFromClipboard)(e),(0,l.dispatch)("divi/right-click-options").unset()},Te=({moduleId:e,position:t})=>{(0,_.pasteModuleFromClipboardWithPosition)(e,t),(0,l.dispatch)("divi/right-click-options").unset()},Ee=({owner:e,saveToDiviCloud:t="off"})=>{const{cursorPosition:r}=(0,l.select)("divi/right-click-options").getState();(0,l.dispatch)("divi/modal-library").open({name:"divi/add-to-library",owner:e,offset:{top:r.y,left:Math.max(0,r.x-200)},attributes:{saveToDiviCloud:t}}),(0,l.dispatch)("divi/right-click-options").unset()},Se=e=>{(0,l.dispatch)("divi/edit-post").removeModule(e),(0,l.dispatch)("divi/right-click-options").unset()},je=(e,t)=>{const{id:r,attrsMaps:i}=e,o=(0,l.select)("divi/edit-post").getModule(r);if(!o)return;const a=["all","design","preset"].includes(t),n="all"===t?"all":"content"===t?"content":"preset"===t?null:"style";if(n){let e=i?.attrsCategoryMap?.[n],t=i?.attrsCategoryMap?.[n];e=ee(e,s),t=ee(t,s);const a=(0,_.resetTargetAttrsBasedOnOverlapppingAttrsMaps)({sourceAttrsMap:e,targetAttrsMap:t,targetAttrs:o?.props?.attrs});(0,l.dispatch)("divi/edit-post").replaceModuleAttributes(r,a,"user",!0)}a&&(0,l.dispatch)("divi/edit-post").removeModuleAttributes({id:r,attrNames:["modulePreset","groupPreset"],caller:"user"});if(["all","content"].includes(t)&&o.children&&Array.isArray(o.children)){[...o.children].forEach((e=>{"string"==typeof e&&(0,l.dispatch)("divi/edit-post").removeModule(e)}))}(0,l.dispatch)("divi/right-click-options").unset()},Ge=e=>{e.preventDefault(),e.stopPropagation(),(0,l.dispatch)("divi/right-click-options").unset()};var xe=window.divi.keyboardShortcuts;const Le=[{name:"closeRightClickOptions",label:(0,n.__)("Close Right Click Options","et_builder"),keys:["Escape"],category:"page",action:()=>{(0,l.dispatch)("divi/right-click-options").unset()}},{name:"selectNextOption",label:(0,n.__)("Select Next Option","et_builder"),keys:["ArrowDown"],category:"page",action:()=>{(0,l.dispatch)("divi/right-click-options").selectNext()}},{name:"selectPrevOption",label:(0,n.__)("Select Previous Option","et_builder"),keys:["ArrowUp"],category:"page",action:()=>{(0,l.dispatch)("divi/right-click-options").selectPrev()}},{name:"selectParentOption",label:(0,n.__)("Select Parent Option","et_builder"),keys:["ArrowLeft"],category:"page",action:()=>{(0,l.dispatch)("divi/right-click-options").selectParent()}},{name:"selectChildOption",label:(0,n.__)("Select Child Option","et_builder"),keys:["ArrowRight"],category:"page",action:()=>{(0,l.dispatch)("divi/right-click-options").selectChild()}},{name:"executeSelectedOption",label:(0,n.__)("Execute Selected Option","et_builder"),keys:["Enter"],category:"page",action:()=>{const e=(0,l.select)("divi/right-click-options").getState(),{selected:t,parent:r}=e,i=(0,a.get)(e,u(r.asMutable(),t));(0,a.isFunction)(i)&&i()}}],Re=()=>(0,xe.registerShortcuts)(Le),Fe=(e,t)=>{(0,l.dispatch)("divi/right-click-options").setSelected({parent:e,selected:t})},De=()=>(0,xe.unregisterShortcuts)(Le.map((e=>e.name))),$e=e=>{"undo"===e?(0,l.dispatch)("divi/history").undo():"redo"===e&&(0,l.dispatch)("divi/history").redo(),(0,l.dispatch)("divi/right-click-options").unset()},We=()=>{const{adminBarHeight:e,appActiveView:t,appWindowWidth:r,builderBarWidth:i,pageBarHeight:o,rightClickOptionsState:s,sidebarLeftWidth:n,sidebarRightWidth:d,topWindowHeight:u,topWindowWidth:p,view:c,zoomScale:g,isUserDefinedAppWindowWidth:b,is100vwVisualView:m}=(0,l.useSelect)((e=>{const t=e("divi/app-ui").getView();return{appActiveView:t,view:e("divi/app-ui").getViewItem(t),appWindowWidth:e("divi/app-ui").getWindow("width","app",0),rightClickOptionsState:e("divi/right-click-options").getState(),topWindowHeight:e("divi/app-ui").getWindow("height","top",0),topWindowWidth:e("divi/app-ui").getWindow("width","top",0),adminBarHeight:e("divi/app-ui").getElementProperty({elementName:"adminBar",propertyName:"height",propertyGroup:"dimension"}),builderBarWidth:e("divi/app-ui").getElementProperty({elementName:"builderBar",propertyGroup:"dimension",propertyName:"width"}),pageBarHeight:e("divi/app-ui").getElementProperty({elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"}),sidebarLeftWidth:e("divi/app-ui").getElementProperty({elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),sidebarRightWidth:e("divi/app-ui").getElementProperty({elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),zoomScale:e("divi/app-ui").getAppFrameZoom({format:"decimal"}),isUserDefinedAppWindowWidth:e("divi/app-ui").isUserDefinedWindowProperty({attr:"width",windowLocation:"app"}),is100vwVisualView:e("divi/app-ui").is100vwVisualView()}})),{cursorPosition:h,options:f,optionType:y,owner:v,windowLocation:M,parent:A,selected:I}=s,_="app"===M,C=(0,a.includes)(["tablet","phone"],t),k=_&&C?170:0,P="fieldsNode"in v?v.fieldsNode:null,w={adminBarHeight:e,builderBarWidth:i,pageBarHeight:o,sidebarLeftWidth:n,cursorPosition:h,fieldsNode:P,options:f.asMutable({deep:!0}),windowHeight:u,windowWidth:p,appWindowOffset:{top:k,left:"100vw"===c.width?0:(0,se.getAppFrameMarginSides)({builderBarWidth:i,appWindowWidth:r,sidebarLeftWidth:n,sidebarRightWidth:d,topWindowWidth:p,is100vwVisualView:m,zoomScale:g,isUserDefinedAppWindowWidth:b})},selected:I,selectedParent:A.asMutable(),onMount:Re,onUnmount:De,onOptionMouseEnter:Fe,onOptionsContextMenu:"pageBarExitMenu"===y?null:Ge,onOverlayClick:Ge,onOverlayContextMenu:Ge,optionType:y,windowLocation:M,zoomScale:g};return(0,D.createElement)(oe,w)};let Be=e=>crypto.getRandomValues(new Uint8Array(e)),Ve=(e,t=21)=>((e,t,r)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*i*t/e.length);return(s=t)=>{let a="";for(;;){let t=r(o),n=o;for(;n--;)if(a+=e[t[n]&i]||"",a.length===s)return a}}})(e,t,Be);const ze="divi.rightClickOptions.colorPickerOptions",He=e=>{if(!(0,a.isObject)(e)){const t=[];return(0,o.applyFilters)(ze,t,e)}const{color:t,colorId:r,colorPalette:i,targetClassList:s}=e.colorPickerAttrs,{onConvertToPaletteColor:d,onDeletePaletteColor:u,onEditPaletteColor:p,onDetachCurrentColorFromPalette:c,onReplacePaletteColor:g}=e.colorPickerAttrs.actions,b=[];return!s.includes("et-vb-colorpicker-manager__swatches-swatch-overlay-global")||"global"!==i||(0,a.isEmpty)(r)||(0,a.isEmpty)(t)?s.includes("et-vb-colorpicker-manager__swatches-swatch-overlay-saved")&&"saved"===i&&!(0,a.isEmpty)(t)?b.push({name:"make-global-color",label:(0,n.__)("Make Global Color","et_builder"),onClick:()=>{const e=`gcid-${Ve("0123456789abcdefghijklmnopqrstuvwxyz",10)()}`;(0,l.dispatch)("divi/global-data").addGlobalColor({color:t,id:e});const r=(0,l.select)("divi/global-data").getRenderableValue(e,t);s.includes("et-vb-colorpicker-manager__current-color-overlay")&&d(r),(0,l.dispatch)("divi/right-click-options").unset()}}):s.includes("et-vb-colorpicker-manager__current-color-overlay-css-variable")?b.push({name:"detach-from-global",label:(0,n.__)("Detach From Global","et_builder"),onClick:()=>{const e=(0,l.select)("divi/global-data").getGlobalColorBasedOnCssVariable(t)?.color;(0,a.isEmpty)(e)||c(e),(0,l.dispatch)("divi/right-click-options").unset()}}):s.includes("et-vb-colorpicker-manager__current-color-overlay")&&!(0,a.isEmpty)(t)&&b.push({name:"convert-to-global",label:(0,n.__)("Convert To Global","et_builder"),onClick:()=>{const e=`gcid-${Ve("0123456789abcdefghijklmnopqrstuvwxyz",10)()}`;(0,l.dispatch)("divi/global-data").addGlobalColor({color:t,id:e});const r=(0,l.select)("divi/global-data").getRenderableValue(e,t);d(r),(0,l.dispatch)("divi/right-click-options").unset()}}):(b.push({name:"edit-global-color",label:(0,n.__)("Edit Global Color","et_builder"),onClick:()=>{p(i,r,t),(0,l.dispatch)("divi/right-click-options").unset()}}),(0,l.select)("divi/global-data").isGlobalColorRemovable(r)&&(b.push({name:"replace-global-color",label:(0,n.__)("Replace Global Color","et_builder"),onClick:()=>{g(r,t),(0,l.dispatch)("divi/right-click-options").unset()}}),b.push({name:"delete-global-color",label:(0,n.__)("Delete Global Color","et_builder"),onClick:()=>{u({colorId:r}),(0,l.dispatch)("divi/right-click-options").unset()}}))),(0,o.applyFilters)(ze,b,e)},Ue="divi.rightClickOptions.gradientStopOptions",Ke=e=>{if(!(0,a.isObject)(e)){const t=[];return(0,o.applyFilters)(Ue,t,e)}const{removeStop:t}=e,r=[];return r.push({name:"delete-gradient-stop",label:(0,n.__)("Delete Gradient","et_builder"),onClick:()=>{t(),(0,l.dispatch)("divi/right-click-options").unset()}}),(0,o.applyFilters)(Ue,r,e)},qe=e=>{const t=e.id,r=[],i=d(t);r.push({name:"draggable-list-item-copy",label:(0,n.__)("Copy Item Styles","et_builder"),onClick:()=>ce({moduleId:t,moduleLabel:i.name,attrsMap:(0,a.get)(e,["attrsMaps","attrsCategoryMap","style"]),attrs:(0,_.extractAttrsByGroupAttrsMap)({attrs:(0,l.select)("divi/edit-post").getModuleAttrs(t).asMutable({deep:!0}),attrsMap:(0,a.get)(e,["attrsMaps","attrsCategoryMap","style"])})})});return"moduleAttributes"===(0,a.get)(e,["clipboardItemStyle","clipboardType"])&&r.push({name:"paste-module-style-to-module",label:(0,n.__)("Paste Item Style","et_builder"),onClick:()=>{const r=(0,a.get)(e,["clipboardItemStyle"]),i=(0,a.get)(e,["attrsMaps","attrsCategoryMap","style"]),o=r?.payload;Ie({sourceAttrsMap:"attrsMap"in o?o.attrsMap:{},sourceAttrs:"attrs"in o?o.attrs:j()({}),targetModuleId:t,targetAttrsMap:i,targetAttrs:(0,l.select)("divi/edit-post").getModuleAttrs(t)})}}),(0,o.applyFilters)("divi.rightClickOptions.draggableListOptions",r,e)};function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ye{constructor(e){Xe(this,"owner",void 0),this.owner=e,this.validateOwner()}validateOwner(){Boolean(this.owner.fieldComponent),Boolean(this.owner.onFieldReset)}canReset(){return!!this.owner.onFieldReset&&!!this.owner.fieldComponent}performReset(){if(this.owner.fieldComponent&&this.owner.onFieldReset){const{fieldComponent:e}=this.owner,t=e.props?.defaultValue;this.owner.onFieldReset(t)}}}class Je{constructor(e,t){Xe(this,"owner",void 0),Xe(this,"hasModifiedAttr",void 0),this.owner=e,this.hasModifiedAttr=t,this.validateOwner()}validateOwner(){Boolean(this.owner.id),Boolean(this.owner.attrName)}canReset(){return this.hasModifiedAttr}performReset(){const{id:e,attrName:t,subName:r}=this.owner,i=(0,l.select)("divi/edit-post").getModuleAttrs(e),o=t?t.split("."):[],s=r?r.split("."):[],a=[...o,"desktop","value",...s];let n=i.getIn(a,null);if(null===n&&"divi/checkboxes"===this.owner.fieldName){const e=i.getIn([...o],null);e&&"object"==typeof e&&(n=e)}let d="";d=Array.isArray(n)?[]:n&&"object"==typeof n?{}:"";const u=i.setIn(a,d);(0,l.dispatch)("divi/edit-post").replaceModuleAttributes(e,u,"user",!0)}}const Ze=(e,t,r,i,o)=>r&&r.includes("reset")?null:{name:"reset-modal-field",label:(0,n.sprintf)((0,n.__)("Reset %1$s Attributes","et_builder"),e.fieldLabel),enable:t.canReset()&&!(i||o),onClick:()=>{t.performReset(),(0,l.dispatch)("divi/right-click-options").unset()}},Qe="divi.rightClickOptions.modalFieldOptions",et=(e,t)=>{if(!(0,a.isObject)(e)){const t=[];return(0,o.applyFilters)(Qe,t,e)}const{modalName:r,fieldName:i,attrName:s,subName:d,id:u}=e,{clipboardItem:p}=e,c=[],b=(0,l.select)("divi/global-data").isActivePreset(),m=(0,l.select)("divi/global-data").getOptionGroupPresetEditMode(),h=m?.isPresetActive&&(0,l.select)("divi/modal-library").isGroupOpen(m?.groupId);if("divi/module"===r||"divi/responsive-editor"===r){const o=((e,t,r,i,o)=>t&&t.includes("copy")?null:{name:"copy-field",label:(0,n.sprintf)((0,n.__)("Copy %1$s Attributes","et_builder"),e.fieldLabel),onClick:()=>ne({attrName:e.attrName,subName:e.subName,moduleId:e.id,modalName:e.modalName,modalTab:e.modalTab,fieldName:e.fieldName,fieldOptions:e.fieldOptions,fieldLabel:e.fieldLabel,groupName:e.groupName,moduleObject:(0,l.select)("divi/edit-post").getModule(e.id),attributeType:(0,_.getCopyType)(e.modalTab,e.groupName),isModulePresetEditMode:r,isOptionGroupPresetEditMode:i,presetEditMode:o?{groupId:o.groupId,groupName:o.groupName}:null}),enable:!0})(e,t,b,h,m?{groupId:m.groupId,groupName:m.groupName}:null);o&&c.push(o);const y=(0,l.select)("divi/edit-post").getModuleAttrs(u),v=s?s.split("."):[],M=d?d.split("."):[],A=[...v,"desktop","value",...M],I=A.join(".");let C=null,k=!1;if("divi/module"===r){if(C=y.getIn(A,null),null===C&&"divi/checkboxes"===i){const e=y.getIn([...v],null);if(e&&"object"==typeof e){Object.values(e).some((e=>{if(e&&"object"==typeof e&&"value"in e){const{value:t}=e;return"on"===t||"1"===t||1===t||!0===t}return!1}))&&(C=e)}}k=((e,t)=>{const{attrName:r,subName:i}=e,o=(0,l.select)("divi/settings")?.getEnabledBreakpointNames?.()??["desktop","tablet","phone"],s=(0,l.select)("divi/app-ui").getBreakpoint()||"desktop",n=r?r.split("."):[],d=t.getIn(n,{}),u=(0,g.getAttrValue)({attr:d,breakpoint:s,state:"value",breakpointNames:o,baseBreakpoint:"desktop",mode:"getOrInheritAll"}),p=i&&u&&"object"==typeof u?(0,a.get)(u,i)??null:u;return null!==(c=p)&&!(0,a.isUndefined)(c)&&""!==c&&(!Array.isArray(c)||0!==c.length)&&("object"!=typeof c||(0,g.isNonEmptyObject)(c));var c})(e,y)}else k="default"!==(0,g.getAttributeCategorizationKey)(I);const P=((e,t,r,i,o)=>r&&r.includes("extend-attributes")?null:{name:"extend-field-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Attributes","et_builder"),e.fieldLabel),enable:t&&!(i||o),onClick:()=>{const t=(0,g.getAttributeCategorizationKey)(e.attrName),r=(0,l.select)("divi/app-ui")?.getBreakpoint()||"desktop",i=(0,l.select)("divi/app-ui")?.getAttributeState()||"value",o=[...e.attrName?e.attrName.split("."):[],r,i,...e.subName?e.subName.split("."):[]].join("."),s="content"===e.modalTab&&"Background"!==e.groupName?"content":"design";(0,l.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:e.id,attributes:{defaultAttributeType:s,defaultOptionGroup:t,defaultModifiedField:o},dimension:{width:280,height:542}}),(0,l.dispatch)("divi/right-click-options").unset()}})(e,k,t,b,h);P&&c.push(P);const w=((e,t,r,i,o)=>{if(r&&r.includes("paste"))return null;if(!t)return null;const s=t.getIn(["payload","fieldName"]),a=t.getIn(["payload","fieldOptions"]);if(!f({fieldName:e.fieldName||"",clipboardItemFieldName:s,fieldOptions:e.fieldOptions,clipboardItemFieldOptions:a}))return null;const d=o?(0,l.select)("divi/global-data").getOptionGroupPresetEditMode():null;return{name:"paste-field-to-field",label:(0,n.sprintf)((0,n.__)("Paste to %1$s","et_builder"),e.fieldLabel),onClick:()=>{const r=t.getIn(["payload","fieldAttr"]);let s;if(i){const t=(0,l.select)("divi/edit-post").getModuleName(e.id),r=(0,l.select)("divi/edit-post").getModuleAttrs(e.id),i=(0,g.maybeConvertPresetModuleName)(t,r),o=(0,l.select)("divi/global-data").getEditingPresetId();o&&(s=(0,l.select)("divi/global-data").getPresetAttr({moduleName:i,id:o,attrName:e.attrName,presetType:"module"}))}else if(o&&d?.groupId){const t=(0,l.select)("divi/edit-post").getGroupPresetAttr(e.id,d.groupId)?.presetId;if(t){const r=(0,g.normalizePresetStack)(t),i=r[r.length-1];i&&(s=(0,l.select)("divi/global-data").getPresetAttr({moduleName:d.groupName||"",id:i,attrName:e.attrName,presetType:"group"}))}}else{const t=(0,l.select)("divi/edit-post").getModuleAttrs(e.id),r=e.attrName.split(".");s=t.getIn(r)}if(r){const t=j()(r),a=s||j()({});ke({sourceAttr:t,targetModuleId:e.id,targetAttr:a,targetAttrName:e.attrName,targetSubName:e.subName,isModulePresetEditMode:i,isOptionGroupPresetEditMode:o,presetEditMode:d?{groupId:d.groupId,groupName:d.groupName,presetId:d.presetId}:null})}},enable:!0}})(e,p,t,b,h);if(w&&c.push(w),"divi/responsive-editor"===r){const r=new Ye(e),i=Ze(e,r,t,b,h);i&&c.push(i)}else if("divi/module"===r){const r=new Je(e,k),i=Ze(e,r,t,b,h);i&&c.push(i)}const O=((e,t,r,i,o)=>r&&r.includes("find-replace")?null:{name:"find-replace",label:(0,n.__)("Find & Replace","et_builder"),enable:t&&!(i||o),onClick:()=>{const t=(0,l.select)("divi/edit-post").getModule(e.id),r=t?(0,l.select)("divi/module-library").getModule(t.name):null,{fieldValue:i}=e;let o,s={name:"divi/text",props:{}};e.features?.dynamicContent&&"object"==typeof e.features.dynamicContent&&(o=e.features.dynamicContent.type),r&&e.attrName&&e.fieldComponent&&e.fieldComponent.name&&(s=e.fieldComponent);const{fieldDefaultValue:a}=e;(0,l.dispatch)("divi/modal-library").open({name:"divi/find-and-replace",owner:e.id,attributes:{sourceModuleId:e.id,attrName:e.attrName,subName:e.subName,fieldLabel:e.fieldLabel,fieldComponent:s,dynamicContentType:o,features:e.features,fieldValue:i,fieldDefaultValue:a,filterComponentProps:e.filterComponentProps},dimension:{width:320,height:600}}),(0,l.dispatch)("divi/right-click-options").unset()}})(e,k,t,b,h);O&&c.push(O)}return(0,o.applyFilters)(Qe,c,e)},tt=(e,t)=>{const r=(0,l.select)("divi/edit-post").getGroupPresetAttr(e,t)?.presetId;if(!r)return null;const i=(0,g.normalizePresetStack)(r);return i[i.length-1]},rt="divi.rightClickOptions.modalGroupOptions",it=e=>{if(!(0,a.isObject)(e)){const t=[];return(0,o.applyFilters)(rt,t,e)}const{modalName:t,modalTab:r,modalGroupLabel:i,moduleId:s,attrsMaps:d,groupId:u}=e,p=[],c="content"===r&&"Background"!==i?(0,n.__)("Content","et_builder"):(0,n.__)("Style","et_builder"),b=(0,l.select)("divi/edit-post").getModuleAttrs(s),m=b.getIn(["groupPreset"]),h=Boolean(m?.[u]),{isModulePresetEditMode:f,isOptionGroupPresetEditMode:M,isPresetEditingMode:I,presetEditMode:C}=(()=>{const e=(0,l.select)("divi/global-data").isActivePreset(),t=(0,l.select)("divi/global-data").getOptionGroupPresetEditMode(),r=t?.isPresetActive&&(0,l.select)("divi/modal-library").isGroupOpen(t?.groupId);return{isModulePresetEditMode:e,isOptionGroupPresetEditMode:r,isPresetEditingMode:e||r,presetEditMode:t}})(),k=(()=>{if(!I||!M)return null;let e;if(f){const t=(0,l.select)("divi/edit-post").getModuleName(s),r=(0,l.select)("divi/edit-post").getModuleAttrs(s),i=(0,g.maybeConvertPresetModuleName)(t,r),o=(0,l.select)("divi/global-data").getEditingPresetId();if(o){const t=(0,l.select)("divi/global-data").getModulePreset({moduleName:i,id:o,useDefaultFallback:!1})?.groupPresets?.[u]?.presetId;t&&(e=(0,g.normalizePresetStack)(t))}}else{const t=(0,l.select)("divi/edit-post").getSelectedOptionGroupPreset(s,u)?.presetId;t&&(e=(0,g.normalizePresetStack)(t))}return(0,l.select)("divi/global-data").getGroupPreset({groupName:C?.groupName??"",id:e,useDefaultFallback:!0})})(),P=(()=>{const t={},r=e?.attrsMaps?.attrsCategoryMap?.all,i=e?.attrsMaps?.attrsGroupNameMap;if(r&&u)if(i&&"divi/composite"===e.groupName){const e=new Set;Object.values(i).forEach((t=>{(0,a.isObject)(t)&&Object.values(t).forEach((t=>{Array.isArray(t)&&t.forEach((t=>{e.add(t)}))}))})),Object.entries(r).forEach((([r,i])=>{e.has(r)&&(t[r]=i)}))}else Object.entries(r).forEach((([e,r])=>{(e.startsWith("module.")?e.endsWith(u):e.startsWith(u))&&(t[e]=r)}));return t})(),O=()=>{const t=(0,l.select)("divi/edit-post").getModuleName(s),r=(0,l.select)("divi/edit-post").getModuleAttrs(s),i=(0,g.maybeConvertPresetModuleName)(t,r),o=(0,l.select)("divi/global-data").getEditingPresetId(),a=(o?(0,l.select)("divi/global-data").getModulePreset({moduleName:i,id:o}):null)?.attrs;return{presetModuleName:i,selectedModulePreset:o||"",attrs:(0,_.extractAttrsByGroupAttrsMap)({attrs:a&&(0,g.isImmutable)(a)?a.asMutable({deep:!0}):a||{},attrsMap:e?.attrsMaps?.attrsCategoryMap?.all})}},N=()=>{const e=(0,l.select)("divi/edit-post").getModuleName(s),t=(0,l.select)("divi/edit-post").getModuleAttrs(s),r=(0,g.maybeConvertPresetModuleName)(e,t),i=(0,l.select)("divi/global-data").getEditingPresetId();i&&Object.keys(P).forEach((e=>{(0,l.dispatch)("divi/global-data").removePresetAttribute({presetType:"module",presetSubType:r,presetId:i,attrName:e,attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))},T=(()=>{if(f){const e=O(),{attrs:t}=e;return Object.keys(t).length>0}if(M){const e=k?.attrs;return Boolean(e&&Object.keys(e).length>0)}const t=b.asMutable({deep:!0}),r=(0,_.extractAttrsByDotNotationPaths)({attrs:t,attrsMap:P}),i=Object.keys(r).length>0;if("divi/elements"===e.groupName){const e=(0,l.select)("divi/edit-post").getModule(s),t=e?.children&&Array.isArray(e.children)&&e.children.length>0;return i||t}return i})(),E=()=>{if(f)N();else if(M)(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:e.groupName,presetId:tt(s,u),attrName:"",attrValue:{},updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]});else{const t=(0,_.resetTargetAttrsBasedOnOverlapppingAttrsMaps)({sourceAttrsMap:P,targetAttrsMap:P,targetAttrs:b});if((0,l.dispatch)("divi/edit-post").replaceModuleAttributes(s,t,"user",!0),"divi/elements"===e.groupName){const e=(0,l.select)("divi/edit-post").getModule(s);if(e?.children&&Array.isArray(e.children)){[...e.children].forEach((e=>{(0,l.dispatch)("divi/edit-post").removeModule(e)}))}}}(0,l.dispatch)("divi/right-click-options").unset()},S=()=>{const e=b.setIn(["groupPreset"],m.without(u));(0,l.dispatch)("divi/edit-post").replaceModuleAttributes(s,e,"user",!0),(0,l.dispatch)("divi/right-click-options").unset()},j=()=>{if(f)N();else if(M)(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:e.groupName,presetId:tt(s,u),attrName:"",attrValue:{},updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]});else{let t=(0,_.resetTargetAttrsBasedOnOverlapppingAttrsMaps)({sourceAttrsMap:P,targetAttrsMap:P,targetAttrs:b});if(m&&(t=t.setIn(["groupPreset"],m.without(u))),(0,l.dispatch)("divi/edit-post").replaceModuleAttributes(s,t,"user",!0),"divi/elements"===e.groupName){const e=(0,l.select)("divi/edit-post").getModule(s);if(e?.children&&Array.isArray(e.children)){[...e.children].forEach((e=>{(0,l.dispatch)("divi/edit-post").removeModule(e)}))}}}(0,l.dispatch)("divi/right-click-options").unset()};if("divi/module"===t&&(p.push({name:"copy-group",label:(0,n.sprintf)((0,n.__)("Copy %1$s Attributes","et_builder"),i),onClick:()=>{let t;if(f){const{attrs:e}=O();t=e}else if(M){const e=k?.attrs;t=e&&(0,g.isImmutable)(e)?e.asMutable({deep:!0}):e||{}}else t=(0,_.extractAttrsByGroupAttrsMap)({attrs:(0,l.select)("divi/edit-post").getModuleAttrs(e.moduleId).asMutable({deep:!0}),attrsMap:P});le({origin:e.id,moduleId:e.moduleId,modalName:e.modalName,modalTab:e.modalTab,groupId:e.groupId,groupLabel:i,groupName:e.groupName,attrsGroupNameMap:(0,a.get)(e,["attrsMaps","attrsGroupNameMap"]),attrsMap:(0,a.get)(e,["attrsMaps","attrsCategoryMap","all"]),attrs:t})}}),p.push({name:"extend-group-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Attributes","et_builder"),i),onClick:()=>{let t="all";e.groupId&&(t=w(e.groupId)),(0,l.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:s,attributes:{defaultAttributeType:"content"===r&&"Background"!==i?"content":"design",defaultOptionGroup:t,defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,l.dispatch)("divi/right-click-options").unset()},enable:T||h}),p.push({name:"reset-modal-group",label:(0,n.sprintf)((0,n.__)("Reset %1$s Attributes","et_builder"),i),onClick:()=>{j()},enable:h||T,..."content"!==c&&(h||T)?{children:[{name:"reset-modal-group-attrs-and-preset-option",label:(0,n.__)("Reset All Attributes","et_builder"),onClick:j,enable:h&&!I||T,bottomSeparator:!0},{name:"reset-modal-group-attrs-option",label:(0,n.sprintf)((0,n.__)("Reset %1$s %2$s Attributes","et_builder"),i,c),onClick:E,enable:T},{name:"reset-modal-group-preset-option",label:(0,n.sprintf)((0,n.__)("Reset %1$s Preset","et_builder"),i),onClick:S,enable:h&&!I}]}:{}}),(0,a.isObject)(e.clipboardItem))){const{clipboardType:r}=e.clipboardItem;if("moduleGroupAttributes"===r){const{clipboardItem:r}=e,i=(0,a.get)(r,["payload","groupLabel"]),o=(0,a.get)(r,["payload","attrsGroupNameMap"]),g=o?o.asMutable({deep:!0}):{},b=(0,a.get)(e,["attrsMaps","attrsGroupNameMap"]),m=(0,l.select)("divi/edit-post").getModule(s),h={...d,attrsCategoryMap:{...d.attrsCategoryMap}};v(e)?p.push({name:"paste-group-to-group",label:(0,n.sprintf)((0,n.__)("Paste %1$s Attributes","et_builder"),i),onClick:()=>{if(f){const{presetModuleName:e,selectedModulePreset:t}=O(),i=(0,a.get)(r,["payload","attrs"]);Object.keys(i).forEach((r=>{const o=i[r];(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:e,presetId:t,attrName:r,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(M){const t=(0,a.get)(r,["payload","attrs"]);(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:e.groupName,presetId:tt(s,u),attrName:"",attrValue:t,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else we({optionType:"module",id:s,attrsMaps:h,clipboardItemStyle:r},"all")},enable:A((0,a.get)(r,"moduleId"),m,"all",r.payload),..."content"!==(0,a.get)(r,["payload","attributeType"])&&{children:[{name:"paste-group-to-group-design-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Design Attributes","et_builder"),i),onClick:()=>{if(f){const{presetModuleName:e,selectedModulePreset:t}=O(),i=(0,a.get)(r,["payload","attrs"]);Object.keys(i).forEach((r=>{const o=i[r];(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:e,presetId:t,attrName:r,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(M){const t=(0,a.get)(r,["payload","attrs"]);(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:e.groupName,presetId:tt(s,u),attrName:"",attrValue:t,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else we({optionType:"module",id:s,attrsMaps:h,clipboardItemStyle:r},"design")},enable:A((0,a.get)(r,"moduleId"),m,"design",r.payload),bottomSeparator:!0},{name:"paste-group-to-group-style-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Style Attributes","et_builder"),i),onClick:()=>{if(f){const{presetModuleName:e,selectedModulePreset:t}=O(),i=(0,a.get)(r,["payload","attrs"]);Object.keys(i).forEach((r=>{const o=i[r];(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:e,presetId:t,attrName:r,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(M){const t=(0,a.get)(r,["payload","attrs"]);(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:e.groupName,presetId:tt(s,u),attrName:"",attrValue:t,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else we({optionType:"module",id:s,attrsMaps:h,clipboardItemStyle:r},"style")},enable:A((0,a.get)(r,"moduleId"),m,"style",r.payload)},{name:"paste-group-to-group-presets",label:(0,n.sprintf)((0,n.__)("Paste %1$s Presets","et_builder"),i),onClick:()=>{if(f){const{presetModuleName:e,selectedModulePreset:t}=O(),i=(0,a.get)(r,["payload","attrs"]);Object.keys(i).forEach((r=>{const o=i[r];(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:e,presetId:t,attrName:r,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(M){const t=(0,a.get)(r,["payload","attrs"]);(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:e.groupName,presetId:tt(s,u),attrName:"",attrValue:t,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else we({optionType:"module",id:s,attrsMaps:h,clipboardItemStyle:r,modalName:t},"preset")},enable:A((0,a.get)(r,"moduleId"),m,"preset",r.payload)}]}}):(0,_.hasOverlappingGroupNames)(g,b)&&p.push({name:"paste-group-to-nested-group",label:(0,n.sprintf)((0,n.__)("Paste %1$s %2$s Attributes","et_builder"),i,c),onClick:()=>{if(f){const{presetModuleName:e,selectedModulePreset:t}=O(),i=(0,a.get)(r,["payload","attrs"]);Object.keys(i).forEach((r=>{const o=i[r];(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:e,presetId:t,attrName:r,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(M){const t=(0,a.get)(r,["payload","attrs"]);(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:e.groupName,presetId:tt(s,u),attrName:"",attrValue:t,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else Oe({sourceAttrsGroupNameMap:g,sourceAttrs:(0,a.get)(r,["payload","attrs"]),targetAttrsMap:(0,a.get)(e,["attrsMaps","attrsCategoryMap","all"]),targetAttrsGroupNameMap:b,targetAttrs:(0,l.select)("divi/edit-post").getModuleAttrs(s),targetModuleId:s})},enable:!I})}else if("moduleGroupTabAttributes"===r){const{clipboardItem:t}=e,r=(0,n.sprintf)((0,n.__)("%1$s Attributes","et_builder"),(0,a.get)(t,["payload","groupTabLabel"])),i=(0,a.get)(t,["payload","attrsMap"]),o=(0,a.get)(e,["attrsMaps","attrsCategoryMap","all"]);(0,_.hasOverlappingAttrNames)(i,o)&&p.push({name:"paste-group-tab-to-group",label:(0,n.sprintf)((0,n.__)("Paste %1$s %2$s Attributes","et_builder"),r,c),onClick:()=>{if(f){const{presetModuleName:e,selectedModulePreset:r}=O(),i=(0,a.get)(t,["payload","attrs"]);Object.keys(i).forEach((t=>{const o=i[t];(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:e,presetId:r,attrName:t,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(M){const r=(0,a.get)(t,["payload","attrs"]);(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:e.groupName,presetId:tt(s,u),attrName:"",attrValue:r,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else Ie({sourceAttrsMap:i,sourceAttrs:(0,a.get)(t,["payload","attrs"]),targetModuleId:s,targetAttrsMap:o,targetAttrs:(0,l.select)("divi/edit-post").getModuleAttrs(s)})},enable:!I})}else if("moduleFieldAttribute"===r){const{clipboardItem:t}=e,r=(0,a.get)(t,["payload"]);y({clipboardItem:t,attrsMaps:e.attrsMaps})&&p.push({name:"paste-field-to-group",label:(0,n.sprintf)((0,n.__)("Paste %1$s %2$s Attributes","et_builder"),(0,a.get)(r,["fieldLabel"]),c),onClick:()=>{if(f){const{presetModuleName:e,selectedModulePreset:t}=O(),i=(0,a.get)(r,["attrName"]),o=(0,a.get)(r,["fieldAttr"]);(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:e,presetId:t,attrName:i,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else if(M){const t=(0,a.get)(r,["attrName"]),i=(0,a.get)(r,["fieldAttr"]);(0,l.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:e.groupName,presetId:tt(s,u),attrName:t,attrValue:i,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else Pe({targetModuleId:s,targetAttrName:(0,a.get)(r,["attrName"]),targetSubName:(0,a.get)(r,["subName"]),targetGroupName:(0,a.get)(r,["groupName"]),targetAttr:(0,l.select)("divi/edit-post").getModuleAttr(s,(0,a.get)(r,["attrName"])),targetAttrsMaps:d,sourceAttr:(0,a.get)(r,["fieldAttr"])})},enable:!I})}}return(0,o.applyFilters)(rt,p,e)},ot="divi.rightClickOptions.modalGroupTabOptions",st=e=>{if(!(0,a.isObject)(e)){const t=[];return(0,o.applyFilters)(ot,t,e)}const{modalName:t,groupTabLabel:r}=e,i=[],s=(0,l.select)("divi/global-data").isActivePreset(),d=(0,l.select)("divi/global-data").getOptionGroupPresetEditMode(),u=d?.isPresetActive&&(0,l.select)("divi/modal-library").isGroupOpen(d?.groupId);if("divi/module"===t){const t=(0,l.select)("divi/edit-post").getModuleAttrs(e.moduleId),o=Object.keys((0,_.extractAttrsByGroupAttrsMap)({attrs:t.asMutable({deep:!0}),attrsMap:e?.attrsMaps?.attrsCategoryMap?.all})).length>0;if(i.push({name:"copy-modal-group-tab",label:(0,n.sprintf)((0,n.__)("Copy %1$s Attributes","et_builder"),r),onClick:()=>de({origin:e.groupId,moduleId:e.moduleId,modalName:e.modalName,groupId:e.groupId,groupTabLabel:e.groupTabName,groupTabName:e.groupTabName,attrsMap:(0,a.get)(e,["attrsMaps","attrsCategoryMap","all"]),attrsGroupNameMap:(0,a.get)(e,["attrsMaps","attrsGroupNameMap"]),attrs:(0,_.extractAttrsByGroupAttrsMap)({attrs:(0,l.select)("divi/edit-post").getModuleAttrs(e.moduleId).asMutable({deep:!0}),attrsMap:(0,a.get)(e,["attrsMaps","attrsCategoryMap","all"])})}),enable:!(s||u)}),i.push({name:"extend-group-tab-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Attributes","et_builder"),r),onClick:()=>{let t="all";e.groupId&&(t=w(e.groupId)),(0,l.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:e.moduleId,attributes:{defaultOptionGroup:t},dimension:{width:280,height:542}}),(0,l.dispatch)("divi/right-click-options").unset()},enable:o}),(0,a.isObject)(e.clipboardItem))if("moduleFieldAttribute"===e.clipboardItem.clipboardType){const{clipboardItem:t,moduleId:r}=e,o=(0,a.get)(t,["payload"]);y({clipboardItem:t,attrsMaps:e.attrsMaps})&&i.push({name:"paste-field-to-group",label:(0,n.sprintf)((0,n.__)("Paste %1$s Attributes","et_builder"),(0,a.get)(o,["fieldLabel"])),onClick:()=>Pe({sourceAttr:(0,a.get)(o,["fieldAttr"]),targetModuleId:r,targetAttrName:(0,a.get)(o,["attrName"]),targetSubName:(0,a.get)(o,["subName"]),targetGroupName:(0,a.get)(o,["groupName"]),targetAttr:(0,l.select)("divi/edit-post").getModuleAttr(r,(0,a.get)(o,["attrName"])),targetAttrsMaps:e.attrsMaps}),enable:!(s||u)})}else if((0,a.includes)(["moduleGroupTabAttributes","moduleGroupAttributes"],e.clipboardItem.clipboardType)){const{clipboardItem:t,moduleId:r}=e,o="moduleGroupTabAttributes"===e.clipboardItem.clipboardType?(0,a.get)(t,["payload","groupTabLabel"]):(0,a.get)(t,["payload","groupLabel"]),d=(0,a.get)(t,["payload","attrsGroupNameMap"]).asMutable({deep:!0}),p=(0,a.get)(e,["attrsMaps","attrsGroupNameMap"]);(0,_.hasOverlappingGroupNames)(d,p)&&i.push({name:"paste-group-tab-to-group-tab",label:(0,n.sprintf)((0,n.__)("Paste %1$s Attributes","et_builder"),o),onClick:()=>Oe({sourceAttrsGroupNameMap:d,sourceAttrs:(0,a.get)(t,["payload","attrs"]),targetAttrsMap:(0,a.get)(e,["attrsMaps","attrsCategoryMap","all"]),targetAttrsGroupNameMap:p,targetAttrs:(0,l.select)("divi/edit-post").getModuleAttrs(r),targetModuleId:r}),enable:!(s||u)})}const d=()=>{const r=(0,_.resetTargetAttrsBasedOnOverlapppingAttrsMaps)({sourceAttrsMap:e?.attrsMaps?.attrsCategoryMap?.all,targetAttrsMap:e?.attrsMaps?.attrsCategoryMap?.all,targetAttrs:t});(0,l.dispatch)("divi/edit-post").replaceModuleAttributes(e.moduleId,r,"user",!0),(0,l.dispatch)("divi/right-click-options").unset()};i.push({name:"reset-modal-group-tab",label:(0,n.sprintf)((0,n.__)("Reset %1$s Attributes","et_builder"),r),onClick:d,enable:o&&!(s||u)})}return(0,o.applyFilters)(ot,i,e)},at="divi.rightClickOptions.modalTabOptions",nt=e=>{if(!(0,a.isObject)(e)){const t=[];return(0,o.applyFilters)(at,t,e)}const{modalName:t}=e;return(0,o.applyFilters)(at,[],e)},lt="divi.rightClickOptions.moduleOptions",dt=e=>{if(!(0,a.isObject)(e)){const t=[];return(0,o.applyFilters)(lt,t,e)}const t=(0,l.select)("divi/settings").checkRolePermission("edit_global_library"),r=(0,l.select)("divi/settings").checkRolePermission("divi_library")&&(0,l.select)("divi/settings").checkRolePermission("save_library"),{selectedModuleIds:i,clipboardItem:s,clipboardItemStyle:u}=e,p=e.id,f=e?.modalName,y=e?.moduleType,v=(0,l.select)("divi/settings").getSetting(["themeBuilder","layout"]),M=(0,l.select)("divi/edit-post").getModule(p),_=M?.name,C=(0,l.select)("divi/module-library").getModule(_)?.appearance,k=(0,l.select)("divi/module").getModuleCount(),P=(0,l.select)("divi/modal-library").isLayersViewFilterActive(),w=(0,l.select)("divi/edit-post").getModule("root")?.children||[],O=(0,l.select)("divi/edit-post").isCloneable({moduleName:_,moduleAppearance:C,themeBuilderLayout:v,moduleCount:k}),N=O&&(0,l.select)("divi/app-ui").hasModulesPermission(y,"add"),T=(0,l.select)("divi/app-ui").hasModulesPermission(y,"delete"),S=(0,l.select)("divi/settings").checkRolePermission("divi_ai"),G=["column","column-inner"].includes(y),x=d(p),L=(0,a.get)(s,"clipboardType"),F=(0,a.get)(s,["payload","moduleType"]),D="divi/layers"===f,$=(0,se.isAppleOS)();let W=!G&&N;if(G){const e=(0,l.select)("divi/edit-post").getModule(M?.parent),t=(0,l.select)("divi/edit-post").getModule(e?.parent),r=e&&"divi/row-inner"===e?.getIn(["name"]),i=e&&t&&"2_3"===t?.getIn(["props","attrs","module","advanced","type","desktop","value"]),o=(0,l.select)("divi/edit-post").getParentLayoutType(p);let s=!0;if(!o.isFlexLayout&&!o.isGridLayout){const t=r?i?4:3:6;s=e?.children?.length<t}W=s&&D&&N||!G&&N}const B=[];if(B.push({name:"undo",label:(0,n.__)("Undo","et_builder"),onClick:()=>$e("undo"),enable:(0,l.select)("divi/history").hasUndo(),shortcut:$?["","z"]:["","z"]}),B.push({name:"redo",label:(0,n.__)("Redo","et_builder"),onClick:()=>$e("redo"),enable:(0,l.select)("divi/history").hasRedo(),shortcut:$?["","y"]:["","y"]}),W&&B.push({name:"clone-module",label:(0,n.sprintf)((0,n.__)("Duplicate %1$s","et_builder"),x.name),onClick:()=>ae(p,M.name,G),shortcut:$?["","","d"]:["","","d"]}),T){const e=G?be:Se,t=G?"remove-column":"remove-module";let r=!0;if(G){r=((0,l.select)("divi/edit-post").getModule(M?.parent)?.children?.length||0)>1}G&&!r||B.push({name:t,label:(0,n.sprintf)((0,n.__)("Delete %1$s","et_builder"),x.name),onClick:()=>e(p),shortcut:$?["",""]:["",""]})}if((0,l.select)("divi/app-ui").hasModulesPermission(y,"add")){const e=G?(0,l.select)("divi/edit-post").getParentModuleId(p):p,t=(0,g.canModuleHaveChildren)(_),r=t=>{const{cursorPosition:r}=(0,l.select)("divi/right-click-options").getState(),i={height:450,width:458};(0,l.dispatch)("divi/modal-library").open({name:"divi/add-module",owner:"inside"===t?p:e,dimension:i,offset:{top:r.y,left:Math.max(0,r.x+300-i.width/2)},attributes:{position:t}}),(0,l.dispatch)("divi/right-click-options").unset()},i=[{name:"add-above",label:(0,n.__)("Add Element Above","et_builder"),onClick:()=>r("before")}];t&&i.push({name:"add-inside",label:(0,n.__)("Add Element Inside","et_builder"),onClick:()=>r("inside")}),i.push({name:"add-below",label:(0,n.__)("Add Element Below","et_builder"),onClick:()=>r("after")}),B.push({name:"add-element",label:(0,n.__)("Add Element","et_builder"),onClick:()=>r("after"),children:i})}const V=(0,l.select)("divi/edit-post").getModuleAttrs(p).asMutable({deep:!0}),z=(0,a.get)(V,"globalModule",""),H=(0,a.get)(V,"globalParent",""),U=z||H;U&&t&&B.push({name:"disable-global",label:(0,n.__)("Disable Global","et_builder"),onClick:()=>he({moduleId:p})});const K=m({moduleId:p,selectedModuleIds:i}),X=h({isCloneable:O,selectedModuleIds:K});if(!G&&X){const e=1<K.length?x.structures:x.structure;B.push({name:"copy-module",label:(0,n.sprintf)((0,n.__)("Copy %1$s","et_builder"),e),onClick:()=>ue({moduleId:p}),shortcut:$?["","c"]:["","c"],topSeparator:!0})}const Y=b({ownerParentModuleType:(0,l.select)("divi/edit-post").getParentModuleType(p),ownerModuleType:(0,a.get)(e,"moduleType"),clipboardModuleType:F});if(s&&!(U&&!t)&&N){const e=s?.payload,t="moduleId"in e?e.moduleId:"",r="moduleIds"in e?e.moduleIds?.asMutable({deep:!0}):[],i=(0,a.isEmpty)(r)?t:r[0],o=c({clipboardType:L,moduleId:t,moduleIds:r,moduleName:e?.moduleObjects?.[i]?.name??""}),d=G?(0,l.select)("divi/edit-post").getParentModuleId(p):p,u=(0,l.select)("divi/edit-post").getModuleAttrs(p).asMutable({deep:!0}),g="moduleId"in e?e.moduleId:r[0]??"",b=e?.moduleObjects,m=b?"function"==typeof b.getIn?b.getIn([g,"name"]):(0,a.get)(b,[g,"name"]):"",h=!!m&&(0,l.select)("divi/module-library").isValidChild(_,u,m),f=M?.parent??"",y=f?(0,l.select)("divi/edit-post").getModule(f)?.name??"":"",v=f?(0,l.select)("divi/edit-post").getModuleAttrs(f):{},A=!(!m||!y)&&(0,l.select)("divi/module-library").isValidChild(y,v,m),I=[];(A||Y)&&I.push({name:"paste-above",label:(0,n.sprintf)((0,n.__)("Paste %1$s Above","et_builder"),o),onClick:()=>Te({moduleId:d,position:"before"})}),h&&I.push({name:"paste-inside",label:(0,n.sprintf)((0,n.__)("Paste %1$s Inside","et_builder"),o),onClick:()=>Te({moduleId:p,position:"inside"})}),(A||Y)&&I.push({name:"paste-below",label:(0,n.sprintf)((0,n.__)("Paste %1$s Below","et_builder"),o),onClick:()=>Te({moduleId:d,position:"after"})}),I.length>0&&B.push({name:"paste-module",label:(0,n.sprintf)((0,n.__)("Paste %1$s","et_builder"),o),onClick:()=>Ne({moduleId:p}),shortcut:$?["","v"]:["","v"],children:I})}B.push({name:"copy-attributes",label:(0,n.__)("Copy Attributes","et_builder"),onClick:()=>pe(e),shortcut:$?["","","c"]:["","","c"],topSeparator:!0}),B.push({name:"extend-attributes",label:(0,n.__)("Extend Attributes","et_builder"),onClick:()=>{(0,l.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:p,attributes:{defaultOptionGroup:"all",defaultAttributeType:"design",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,l.dispatch)("divi/right-click-options").unset()},children:[{name:"extend-all-attributes",label:(0,n.sprintf)((0,n.__)("Extend All %1$s Attributes","et_builder"),x.name),onClick:()=>{(0,l.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:p,attributes:{defaultOptionGroup:"all",defaultAttributeType:"all",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,l.dispatch)("divi/right-click-options").unset()}},{name:"extend-design-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Design Attributes","et_builder"),x.name),onClick:()=>{(0,l.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:p,attributes:{defaultOptionGroup:"all",defaultAttributeType:"design",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,l.dispatch)("divi/right-click-options").unset()},bottomSeparator:!0},{name:"extend-style-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Style Attributes","et_builder"),x.name),onClick:()=>{(0,l.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:p,attributes:{defaultOptionGroup:"all",defaultAttributeType:"style",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,l.dispatch)("divi/right-click-options").unset()}},{name:"extend-content-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Content Attributes","et_builder"),x.name),onClick:()=>{(0,l.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:p,attributes:{defaultOptionGroup:"all",defaultAttributeType:"content",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,l.dispatch)("divi/right-click-options").unset()}},{name:"extend-preset-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Presets","et_builder"),x.name),onClick:()=>{(0,l.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:p,attributes:{defaultOptionGroup:"all",defaultAttributeType:"preset",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,l.dispatch)("divi/right-click-options").unset()},bottomSeparator:!0},q({owner:e,attributeType:"design",label:(0,n.__)("Extend Select Design Attributes","et_builder")}),q({owner:e,attributeType:"style",label:(0,n.__)("Extend Select Style Attributes","et_builder")}),q({owner:e,attributeType:"content",label:(0,n.__)("Extend Select Content Attributes","et_builder")}),q({owner:e,attributeType:"preset",label:(0,n.__)("Extend Select Presets","et_builder")})]});const J=u?.clipboardType;if("moduleAttributes"===J||"moduleGroupAttributes"===J||"moduleFieldAttribute"===J||"moduleGroupTabAttributes"===J){const t=u?.payload,r="fieldLabel"in t?t?.fieldLabel:"",i="groupTabLabel"in t?t?.groupTabLabel:"",o="groupLabel"in t?t?.groupLabel:"",s="moduleLabel"in t?t?.moduleLabel:"",l=r||i||o||s;B.push({name:"paste-attributes",label:(0,n.__)("Paste Attributes","et_builder"),onClick:()=>{we(e,"all")},children:[{name:"paste-all-attributes",label:(0,n.sprintf)((0,n.__)("Paste All %1$s Attributes","et_builder"),l),onClick:()=>we(e,"all"),enable:A((0,a.get)(t,"moduleId"),M,"all",t),shortcut:$?["","","v"]:["","","v"]},{name:"paste-design-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Design Attributes","et_builder"),l),onClick:()=>we(e,"design"),enable:A((0,a.get)(t,"moduleId"),M,"design",t),shortcut:["","","v"],bottomSeparator:!0},{name:"paste-style-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Style Attributes","et_builder"),l),onClick:()=>we(e,"style"),enable:A((0,a.get)(t,"moduleId"),M,"style",t),shortcut:$?["","","v"]:["","","v"]},{name:"paste-content-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Content Attributes","et_builder"),l),onClick:()=>we(e,"content"),enable:A((0,a.get)(t,"moduleId"),M,"content",t)},{name:"paste-preset-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Presets","et_builder"),l),onClick:()=>we(e,"preset"),enable:A((0,a.get)(t,"moduleId"),M,"preset",t),bottomSeparator:!0},R({owner:e,clipboardPayload:t&&"function"==typeof t.getIn?t:j()(t),attributeType:"design",label:(0,n.__)("Paste Select Design Attributes","et_builder")}),R({owner:e,clipboardPayload:t&&"function"==typeof t.getIn?t:j()(t),attributeType:"style",label:(0,n.__)("Paste Select Style Attributes","et_builder")}),R({owner:e,clipboardPayload:t&&"function"==typeof t.getIn?t:j()(t),attributeType:"content",label:(0,n.__)("Paste Select Content Attributes","et_builder")}),R({owner:e,clipboardPayload:t&&"function"==typeof t.getIn?t:j()(t),attributeType:"preset",label:(0,n.__)("Paste Select Presets","et_builder")})]})}if(B.push({name:"reset-module",label:(0,n.__)("Reset Attributes","et_builder"),onClick:()=>{je(e,"all")},enable:I(e.id,["style","content","preset"],e),children:[{name:"reset-all-attributes",label:(0,n.__)("Reset All Attributes","et_builder"),onClick:()=>je(e,"all"),shortcut:$?["","","r"]:["","","r"],enable:I(e.id,["style","content","preset"],e)},{name:"reset-design-attributes",label:(0,n.__)("Reset Design Attributes","et_builder"),onClick:()=>je(e,"design"),shortcut:["","","r"],enable:I(e.id,["style"],e),bottomSeparator:!0},{name:"reset-style-attributes",label:(0,n.__)("Reset Style Attributes","et_builder"),onClick:()=>je(e,"style"),shortcut:$?["","","r"]:["","","r"],enable:I(e.id,["style"],e)},{name:"reset-content-attributes",label:(0,n.__)("Reset Content Attributes","et_builder"),onClick:()=>je(e,"content"),enable:I(e.id,["content"],e)},{name:"reset-presets",label:(0,n.__)("Reset Presets","et_builder"),onClick:()=>je(e,"preset"),enable:I(e.id,["preset"],e),bottomSeparator:!0},E({moduleId:p,moduleAttrs:(0,l.select)("divi/edit-post").getModuleAttrs(p),attrsMaps:{attrsCategoryMap:{all:e.attrsMaps.attrsCategoryMap?.style||{}}},type:"design",resetPreset:!0,label:(0,n.__)("Reset Select Design Attributes","et_builder")}),E({moduleId:p,moduleAttrs:(0,l.select)("divi/edit-post").getModuleAttrs(p),attrsMaps:{attrsCategoryMap:{all:e.attrsMaps.attrsCategoryMap?.style||{}}},type:"style",resetPreset:!1,label:(0,n.__)("Reset Select Style Attributes","et_builder")}),E({moduleId:p,moduleAttrs:(0,l.select)("divi/edit-post").getModuleAttrs(p),attrsMaps:{attrsCategoryMap:{all:e.attrsMaps.attrsCategoryMap?.content||{}}},type:"content",resetPreset:!1,label:(0,n.__)("Reset Select Content Attributes","et_builder")}),E({moduleId:p,moduleAttrs:(0,l.select)("divi/edit-post").getModuleAttrs(p),attrsMaps:{attrsCategoryMap:{all:e.attrsMaps.attrsCategoryMap?.style||{}}},type:"preset",resetPreset:!0,label:(0,n.__)("Reset Select Presets","et_builder")})]}),B.push({name:"inspector",label:(0,n.__)("Inspect","et_builder"),onClick:()=>{(0,l.dispatch)("divi/modal-library").open({name:"divi/inspector",owner:p}),(0,l.dispatch)("divi/right-click-options").unset()}}),r&&!(0,g.isPostContentModule)(_)&&(B.push({name:"save-to-library",label:(0,n.__)("Save To Library","et_builder"),onClick:()=>Ee({owner:p}),topSeparator:!0}),B.push({name:"save-to-cloud",label:(0,n.__)("Save To Divi Cloud","et_builder"),onClick:()=>Ee({owner:p,saveToDiviCloud:"on"})})),("divi/layers"!==f||P&&D)&&B.push({name:"go-to-layer",label:(0,n.__)("Go To Layer","et_builder"),onClick:()=>{(0,l.dispatch)("divi/modal-library").open({name:"divi/layers"}),(0,l.dispatch)("divi/right-click-options").unset(),P&&D&&(0,l.dispatch)("divi/modal-library").setLayersViewFilter({filterKeyword:"",isFilterActive:!1,moduleIds:w}),(0,l.dispatch)("divi/modal-library").setLayersViewExpandAll({expandAll:!0,moduleIds:w}),(0,l.dispatch)("divi/modal-library").setLayersViewActiveModuleId(p),(0,g.scrollToModule)(p),(0,l.dispatch)("divi/modal-library").open({owner:p,name:"divi/module"})},shortcut:$?["","","l"]:["","","l"]}),S){const e=[],t=t=>{const r=(0,l.select)("divi/module-library").getModuleContentSettings(t.name);e.push({moduleName:t.name,groups:r,moduleId:t.id})},r=(0,l.select)("divi/edit-post").getContent(),i=r[p],o=e=>{const i=r[e];i?.children&&!(0,a.isEmpty)(i.children)?(0,a.forEach)(i.children,(e=>{o(e)})):t(i)};i?.children&&!(0,a.isEmpty)(i.children)?(0,a.forEach)(i.children,(e=>{o(e)})):t(i);const s={moduleData:e,moduleId:p,isSingleModule:!1};B.push({name:"generate-content-with-ai",label:(0,n.__)("Generate Content With AI","et_builder"),onClick:()=>{(0,g.handleAIButton)(s),(0,l.dispatch)("divi/right-click-options").unset()}})}return(0,o.applyFilters)(lt,B,e)},ut={modalField:et,modalGroup:it,modalGroupTab:st,modalTab:nt,modalHeader:dt,module:dt,modalDraggableChildModuleList:qe,colorPicker:He,gradientStop:Ke,sidebarRowNav:e=>{const t="navItem"===e.trigger,r=[{name:"close-tab",label:t?(0,n.__)("Close Tab","et_builder"):(0,n.__)("Close Active Tab","et_builder"),onClick:()=>{(0,l.dispatch)("divi/modal-library").close({name:e.modalName}),(0,l.dispatch)("divi/right-click-options").unset()}},{name:"close-tab-group",label:(0,n.__)("Close Tab Group","et_builder"),onClick:()=>{(0,l.select)("divi/app-ui").getSidebarRow(e.id)?.modalIds?.forEach((e=>{(0,l.dispatch)("divi/modal-library").close({name:e})})),(0,l.dispatch)("divi/right-click-options").unset()}},{name:"undock-tab",label:t?(0,n.__)("Undock Tab","et_builder"):(0,n.__)("Undock Active Tab","et_builder"),onClick:()=>{(0,l.dispatch)("divi/app-ui").undockModalFromSidebarRow({modalName:e?.modalName,sidebarRowId:e?.id}),(0,l.dispatch)("divi/right-click-options").unset()}}];return(0,o.applyFilters)("divi.rightClickOptions.sidebarRowNavOptions",r,e)}},pt=(e,t)=>{const r=(0,o.applyFilters)("divi.rightClickOptions.optionsMap",ut),i=(0,a.get)(r,e);return(0,a.isFunction)(i)?i(t):[]},ct=()=>({type:"SELECT_CHILD"}),gt=()=>({type:"SELECT_NEXT"}),bt=()=>({type:"SELECT_PARENT"}),mt=()=>({type:"SELECT_PREV"}),ht=({cursorPosition:e,windowLocation:t,optionType:r,owner:i})=>({type:"SET",cursorPosition:e,options:pt(r,i),optionType:r,owner:i,windowLocation:t}),ft=({name:e,value:t})=>({type:"SET_OWNER_DATA",name:e,value:t}),yt=({selected:e,parent:t})=>({type:"SET_SELECTED",parent:t,selected:e}),vt=()=>({type:"UNSET"}),Mt=(e,t)=>{switch(t.type){case"SET":return e.setIn(["active"],!0).setIn(["cursorPosition"],t.cursorPosition).setIn(["options"],t.options).setIn(["length"],t.options.length).setIn(["optionType"],t.optionType).setIn(["selected"],-1).setIn(["owner"],t.owner).setIn(["windowLocation"],t.windowLocation);case"SET_OWNER_DATA":return e.setIn(["owner",t.name],t.value);case"SELECT_PREV":{const t=e.selected<1?e.selected:e.selected-1;return e.setIn(["selected"],t)}case"SELECT_NEXT":{const t=e.selected>=e.length-1?e.selected:e.selected+1;return e.setIn(["selected"],t)}case"SELECT_PARENT":{if(1>=e.getIn(["parent"]).length)return e;const t=e.getIn(["parent"]).asMutable(),r=t[t.length-1],i=[].concat(t).splice(0,t.length-1),o=()=>{if((0,a.isEqual)([0],i))return e.getIn(["options"]).length;const t=[].concat(i).splice(1).join("-children-").split("-"),r=["options"].concat(t).concat(["children"]);return(e.getIn(r)||[]).length};return e.setIn(["parent"],i).setIn(["selected"],r).setIn(["length"],o())}case"SELECT_CHILD":{const t=(()=>{if((0,a.isEqual)([0],e.parent))return[String(e.getIn(["selected"]))];return[].concat(e.getIn(["parent"]).asMutable()).splice(1).concat([e.getIn(["selected"])]).join("-children-").split("-")})(),r=(0,a.concat)(["options"],t,["children"]);if(!e.getIn(r))return e;const i=e.getIn(r)||[];return e.setIn(["parent"],(0,a.concat)(e.getIn(["parent"]).asMutable(),[e.getIn(["selected"])])).setIn(["selected"],0).setIn(["length"],i.length)}case"SET_SELECTED":{const r=()=>{if((0,a.isEqual)(e.getIn(["parent"]).asMutable(),t.parent))return e.getIn(["length"]);if((0,a.isEqual)([0],t.parent))return e.getIn(["options"]).length;const r=[].concat(t.parent).splice(1).join("-children-").split("-"),i=["options"].concat(r).concat(["children"]);return(e.getIn(i)||[]).length};return e.setIn(["parent"],t.parent).setIn(["selected"],t.selected).setIn(["length"],r())}case"UNSET":return e.setIn(["active"],!1).setIn(["cursorPosition"],{x:0,y:0}).setIn(["optionType"],"module").setIn(["parent"],[0]).setIn(["selected"],-1).setIn(["options"],[]).setIn(["length"],0).setIn(["owner"],{}).setIn(["windowLocation"],"app");default:return e}},At=e=>e.getIn(["active"]),It=e=>e;function _t(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var Ct=e=>Array.isArray(e)?e:[e];function kt(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const r=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Pt(e,t){const r=[],{length:i}=e;for(let o=0;o<i;o++)r.push(e[o].apply(null,t));return r}Symbol(),Object.getPrototypeOf({});var wt="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function Ot(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:i}=t;let o,s=0;function a(){let t=r;const{length:a}=arguments;for(let e=0,r=a;e<r;e++){const r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const i=e.get(r);void 0===i?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=i}else{let e=t.p;null===e&&(t.p=e=new Map);const i=e.get(r);void 0===i?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=i}}const n=t;let l;if(1===t.s?l=t.v:(l=e.apply(null,arguments),s++),n.s=1,i){const e=o?.deref?.()??o;null!=e&&i(e,l)&&(l=e,0!==s&&s--);o="object"==typeof l&&null!==l||"function"==typeof l?new wt(l):l}return n.v=l,l}return a.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function Nt(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,i=(...e)=>{let t,i=0,o=0,s={},a=e.pop();"object"==typeof a&&(s=a,a=e.pop()),_t(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const n={...r,...s},{memoize:l,memoizeOptions:d=[],argsMemoize:u=Ot,argsMemoizeOptions:p=[],devModeChecks:c={}}=n,g=Ct(d),b=Ct(p),m=kt(e),h=l((function(){return i++,a.apply(null,arguments)}),...g);const f=u((function(){o++;const e=Pt(m,arguments);return t=h.apply(null,e),t}),...b);return Object.assign(f,{resultFunc:a,memoizedResultFunc:h,dependencies:m,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>t,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:l,argsMemoize:u})};return Object.assign(i,{withTypes:()=>i}),i}var Tt=Nt(Ot),Et=Object.assign(((e,t=Tt)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e);return t(r.map((t=>e[t])),((...e)=>e.reduce(((e,t,i)=>(e[r[i]]=t,e)),{})))}),{withTypes:()=>Et});const St=Tt([e=>e?.getIn(["owner","id"],""),(e,t)=>t],((e,t)=>!!e&&e===t)),jt=Tt([e=>e,(e,t)=>t],((e,t)=>{const r=e?.getIn(["owner","source"],""),i=e?.getIn(["owner","fieldLabel"],"");return"rightMenu"===r&&i===t})),Gt=j()({active:!1,cursorPosition:{x:0,y:0},windowLocation:"app",options:[],optionType:"module",parent:[0],selected:-1,length:0,owner:null}),xt=()=>{(0,l.select)("divi/right-click-options")||(0,l.registerStore)("divi/right-click-options",{actions:e,reducer:Mt,selectors:t,initialState:Gt})}}(),(window.divi=window.divi||{}).rightClickOptions=i}();