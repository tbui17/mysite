!function(){var t={33042:function(t,e,r){var n;!function(){"use strict";var o=function t(e){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(t){var e=Object.getPrototypeOf(t);return e?Object.create(e):{}}function s(t,e,r){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:r})}function a(t,e){s(t,e,(function(){throw new v("The "+e+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=e)||Array.isArray(r)||null===r||void 0!==e.use_static&&(o.use_static=Boolean(e.use_static));var l="__immutable_invariants_hold";function c(t){return"object"!=typeof t||(null===t||Boolean(Object.getOwnPropertyDescriptor(t,l)))}function u(t,e){return t===e||t!=t&&e!=e}function d(t){return!(null===t||"object"!=typeof t||Array.isArray(t)||t instanceof Date)}var p=["setPrototypeOf"],f=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),h=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),y=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function v(t){this.name="MyError",this.message=t,this.stack=(new Error).stack}function g(t,e){for(var r in s(t,l,!0),e)e.hasOwnProperty(r)&&a(t,e[r]);return Object.freeze(t),t}function b(t,e){var r=t[e];s(t,e,(function(){return Y(r.apply(t,arguments))}))}function m(t,e,r){var n=r&&r.deep;if(t in this&&(n&&this[t]!==e&&d(e)&&d(this[t])&&(e=Y.merge(this[t],e,{deep:!0,mode:"replace"})),u(this[t],e)))return this;var o=S.call(this);return o[t]=Y(e),M(o)}v.prototype=new Error,v.prototype.constructor=Error;var w=Y([]);function O(t,e,r){var n=t[0];if(1===t.length)return m.call(this,n,e,r);var o,i=t.slice(1),s=this[n];if("object"==typeof s&&null!==s)o=Y.setIn(s,i,e);else{var a=i[0];o=""!==a&&isFinite(a)?O.call(w,i,e):D.call(z,i,e)}if(n in this&&s===o)return this;var l=S.call(this);return l[n]=o,M(l)}function M(t){for(var e in h){if(h.hasOwnProperty(e))b(t,h[e])}o.use_static||(s(t,"flatMap",E),s(t,"asObject",I),s(t,"asMutable",S),s(t,"set",m),s(t,"setIn",O),s(t,"update",L),s(t,"updateIn",N),s(t,"getIn",x));for(var r=0,n=t.length;r<n;r++)t[r]=Y(t[r]);return g(t,f)}function j(){return new Date(this.getTime())}function E(t){if(0===arguments.length)return this;var e,r=[],n=this.length;for(e=0;e<n;e++){var o=t(this[e],e,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return M(r)}function T(t){if(void 0===t&&0===arguments.length)return this;if("function"!=typeof t){var e=Array.isArray(t)?t.slice():Array.prototype.slice.call(arguments);e.forEach((function(t,e,r){"number"==typeof t&&(r[e]=t.toString())})),t=function(t,r){return-1!==e.indexOf(r)}}var r=i(this);for(var n in this)this.hasOwnProperty(n)&&!1===t(this[n],n)&&(r[n]=this[n]);return G(r)}function S(t){var e,r,n=[];if(t&&t.deep)for(e=0,r=this.length;e<r;e++)n.push(_(this[e]));else for(e=0,r=this.length;e<r;e++)n.push(this[e]);return n}function I(t){"function"!=typeof t&&(t=function(t){return t});var e,r={},n=this.length;for(e=0;e<n;e++){var o=t(this[e],e,this),i=o[0],s=o[1];r[i]=s}return G(r)}function _(t){return!t||"object"!=typeof t||!Object.getOwnPropertyDescriptor(t,l)||t instanceof Date?t:Y.asMutable(t,{deep:!0})}function k(t,e){for(var r in t)Object.getOwnPropertyDescriptor(t,r)&&(e[r]=t[r]);return e}function A(t,e){if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(t));var r,n,o=Array.isArray(t),s=e&&e.deep,a=e&&e.mode||"merge",l=e&&e.merger;function c(t,n,o){var a,c=Y(n[o]),p=l&&l(t[o],c,e),f=t[o];void 0===r&&void 0===p&&t.hasOwnProperty(o)&&u(c,f)||(u(f,a=void 0!==p?p:s&&d(f)&&d(c)?Y.merge(f,c,e):c)&&t.hasOwnProperty(o)||(void 0===r&&(r=k(t,i(t))),r[o]=a))}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(void 0===r&&(r=k(t,i(t))),delete r[n])}if(o)for(var f=0,h=t.length;f<h;f++){var y=t[f];for(n in y)y.hasOwnProperty(n)&&c(void 0!==r?r:this,y,n)}else{for(n in t)Object.getOwnPropertyDescriptor(t,n)&&c(this,t,n);"replace"===a&&p(this,t)}return void 0===r?this:G(r)}function P(t,e){var r=e&&e.deep;if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(t));return Y.merge(this,t,{deep:r,mode:"replace"})}var C,B,F,z=Y({});function D(t,e,r){if(!Array.isArray(t)||0===t.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=t[0];if(1===t.length)return R.call(this,n,e,r);var o,s=t.slice(1),a=this[n];if(o=this.hasOwnProperty(n)&&"object"==typeof a&&null!==a?Y.setIn(a,s,e):D.call(z,s,e),this.hasOwnProperty(n)&&a===o)return this;var l=k(this,i(this));return l[n]=o,G(l)}function R(t,e,r){var n=r&&r.deep;if(this.hasOwnProperty(t)&&(n&&this[t]!==e&&d(e)&&d(this[t])&&(e=Y.merge(this[t],e,{deep:!0,mode:"replace"})),u(this[t],e)))return this;var o=k(this,i(this));return o[t]=Y(e),G(o)}function L(t,e){var r=Array.prototype.slice.call(arguments,2),n=this[t];return Y.set(this,t,e.apply(n,[n].concat(r)))}function U(t,e){for(var r=0,n=e.length;null!=t&&r<n;r++)t=t[e[r]];return r&&r==n?t:void 0}function N(t,e){var r=Array.prototype.slice.call(arguments,2),n=U(this,t);return Y.setIn(this,t,e.apply(n,[n].concat(r)))}function x(t,e){var r=U(this,t);return void 0===r?e:r}function H(t){var e,r=i(this);if(t&&t.deep)for(e in this)this.hasOwnProperty(e)&&(r[e]=_(this[e]));else for(e in this)this.hasOwnProperty(e)&&(r[e]=this[e]);return r}function V(){return{}}function G(t){return o.use_static||(s(t,"merge",A),s(t,"replace",P),s(t,"without",T),s(t,"asMutable",H),s(t,"set",R),s(t,"setIn",D),s(t,"update",L),s(t,"updateIn",N),s(t,"getIn",x)),g(t,p)}function Y(t,e,r){if(c(t)||function(t){return"object"==typeof t&&null!==t&&(60103===t.$$typeof||t.$$typeof===n)}(t)||function(t){return"undefined"!=typeof File&&t instanceof File}(t)||function(t){return"undefined"!=typeof Blob&&t instanceof Blob}(t)||function(t){return t instanceof Error}(t))return t;if(function(t){return"object"==typeof t&&"function"==typeof t.then}(t))return t.then(Y);if(Array.isArray(t))return M(t.slice());if(t instanceof Date)return i=new Date(t.getTime()),o.use_static||s(i,"asMutable",j),g(i,y);var i,a=e&&e.prototype,l=(a&&a!==Object.prototype?function(){return Object.create(a)}:V)();if(null==r&&(r=64),r<=0)throw new v("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var u in r-=1,t)Object.getOwnPropertyDescriptor(t,u)&&(l[u]=Y(t[u],void 0,r));return G(l)}function $(t){return function(){var e=[].slice.call(arguments),r=e.shift();return t.apply(r,e)}}function K(t,e){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?e.apply(n,r):t.apply(n,r)}}return Y.from=Y,Y.isImmutable=c,Y.ImmutableError=v,Y.merge=$(A),Y.replace=$(P),Y.without=$(T),Y.asMutable=(C=H,B=S,F=j,function(){var t=[].slice.call(arguments),e=t.shift();return Array.isArray(e)?B.apply(e,t):e instanceof Date?F.apply(e,t):C.apply(e,t)}),Y.set=K(R,m),Y.setIn=K(D,O),Y.update=$(L),Y.updateIn=$(N),Y.getIn=$(x),Y.flatMap=$(E),Y.asObject=$(I),o.use_static||(Y.static=t({use_static:!0})),Object.freeze(Y),Y}();void 0===(n=function(){return o}.call(e,r,e,t))||(t.exports=n)}()}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};!function(){"use strict";r.r(n),r.d(n,{extractGlobalColorIds:function(){return f},extractGlobalVariablesIds:function(){return h},parseAttrsDefinitionFromFlatBlockInstances:function(){return v},parseAttrsDefinitionFromFlatModuleObjects:function(){return g},parseFlatModuleObjectIntoBlockArray:function(){return m},registerSerializedPostStore:function(){return C},replaceEscapedQuotes:function(){return w},serializeModuleFlatObjects:function(){return E}});var t={};r.r(t),r.d(t,{serializeModule:function(){return T},syncToServer:function(){return d}});var e={};r.r(e),r.d(e,{getState:function(){return A},getUsedGlobalColorIds:function(){return P}});var o=r(33042),i=r.n(o),s=window.divi.data,a=window.divi.middleware,l=window.divi.moduleLibrary,c=window.divi.moduleUtils,u=window.divi.settings;const d=({syncType:t,signal:e})=>({type:"SYNC_TO_SERVER",payload:{postContent:(0,s.select)("divi/edit-post").getContent()},syncType:t,signal:e});var p=window.lodash;const f=t=>{if(!(0,p.isString)(t))return[];const e=t.match(/gcid-([0-9a-z-]*)/g);return(0,p.uniq)(e)||[]},h=t=>{if(!(0,p.isString)(t))return[];const e=t.match(/gvid-([0-9a-z-]*)/g);return(0,p.uniq)(e)||[]},y=["serializerProps"],v=t=>{const e={};return t.forEach((({name:t,attributes:r})=>{const n={};(0,p.forEach)(r,((t,e)=>{if(-1===y.indexOf(e)){const r={type:(0,c.getAttributeValueType)(t)};n[e]=r}})),e[t]=(0,p.merge)({},e[t],n)})),e},g=t=>{const e={};return(0,p.forEach)(t,(({name:t,props:r})=>{const{attrs:n}=r;if(n){const r={};(0,p.forEach)(n,((t,e)=>{const n={type:(0,c.getAttributeValueType)(t)};r[e]=n})),e[t]=(0,p.merge)({},e[t],r)}})),e};var b=window.vendor.wp.hooks;const m=(t,e="root")=>{const r=e=>e.map((e=>{const{id:n,name:o,children:i,props:s}=(0,p.get)(t,e),a=(0,p.isEmpty)(i)?[]:r(i),l="divi/shortcode-module"===o,c=l&&s.innerHTML,u={attributes:{...s.attrs,...l&&{innerHTML:c}},clientId:n,innerBlocks:a,isValid:!0,name:o};return(0,b.applyFilters)("divi.serializedPost.parseFlatModuleObjectIntoBlockArray.nested",u)})),n=(t,e=[])=>((0,p.forEach)(t,(t=>{const r=(0,b.applyFilters)("divi.parseFlatModuleObjectIntoBlockArray.flat",t);e.push(r),(0,p.isEmpty)(r.innerBlocks)||n(r.innerBlocks,e)})),e),o=r((0,p.get)(t,[e,"children"],[]));return{nested:o,flat:n(o)}},w=t=>t.replace(/\{"[^}]+/g,(t=>t.replace(/\\\\u0022$/,'\\\\"')));var O=window.vendor.React,M=window.vendor.wp.blocks;const j=()=>(0,M.__unstableGetInnerBlocksProps)().children,E=(t,e="root",r="global-module")=>{if(!t?.root?.isGlobal){const t="layout"===r||"portability"===r?r:"global-module";(0,b.addFilter)("divi.serializedPost.parseFlatModuleObjectIntoBlockArray.nested","divi",(e=>((t,e="global-module")=>{const{attributes:r}=t;if(r?.globalModule){if("layout"===e)return t;const n=(0,s.select)("divi/module-library").getModule("divi/global-layout"),o=["globalModule","localAttrsMap","localChildren","globalParent","blockName"],i=Object.entries(r).reduce(((t,[e,r])=>(o.includes(e)||(t[e]=r),t)),{}),a=t.innerBlocks||[],l=t.name;return{...t,name:n.name,innerBlocks:a,attributes:{globalModule:r.globalModule,blockName:l,...Object.keys(i).length>0&&{localAttrs:i}}}}return t})(e,t)))}const{nested:n,flat:o}=m(t,e);(0,b.removeFilter)("divi.serializedPost.parseFlatModuleObjectIntoBlockArray.nested","divi");const i=v(o),a=(0,s.select)("divi/module-library").getModules();(0,p.forEach)(a,((t,e)=>{(0,M.unregisterBlockType)(e);const{category:r,childrenName:n}=t,o=(0,p.merge)({},t.supports,{className:!1}),s=(0,p.merge)({},t.attributes,i[e]);"structure"===r||n?(0,M.registerBlockType)(e,{...t,supports:o,attributes:s,save:()=>(0,O.createElement)(j)}):"unsupported"===r?(0,M.registerBlockType)(e,{...t,supports:o,attributes:s,save:t=>(0,O.createElement)("",{dangerouslySetInnerHTML:{__html:t?.attributes?.innerHTML??""}})}):(0,M.registerBlockType)(e,{...t,supports:o,attributes:s,save:()=>null})}));const l=(0,M.serialize)([...n]);(0,p.forEach)(a,((t,e)=>{(0,M.unregisterBlockType)(e),(0,M.registerBlockType)(e,t)}));return(0,p.flow)([w,c.wrapPlaceholderBlock])(l)},T=({moduleObjects:t})=>({type:"SERIALIZE_MODULE",payload:{serializedContent:E(t)}});var S=window.divi.rest;const I={SYNC_TO_SERVER:[()=>{const t=(0,s.select)("divi/global-data").getGlobalColors();(0,s.dispatch)("divi/edit-post").syncModuleGlobalColors(t),(0,s.dispatch)("divi/edit-post").syncModuleInlineFont()},(t,e)=>{(0,s.dispatch)("divi/history").add("edit-post",t.type,"serialize-to-gb-button",e.getState());const r=e.getState();console.log("Content on divi/serialized-post store has changed into:"),console.log(r.postContent.content),console.log("NOTE: column is still failing to serialize itself and its content - to be fixed")},t=>{(0,s.dispatch)("divi/rest").syncToServer({syncType:t.syncType,signal:t.signal})}],SERIALIZE_MODULE:[t=>{const e=t?.payload?.serializedContent??"",r=t=>{const e=(0,c.prepareModuleHTML)(t),r=new CustomEvent("et_ai_code_module_html_ready",{detail:{module_html:e}});window.dispatchEvent(r)};(0,S.loggedFetch)({method:"POST",restRoute:"/divi/v1/module-render",data:{content:e}},!0).then((t=>{r(t?.renderedHTML??"")})).catch((t=>{console.log(t),r("")}))}]},_={SYNC_TO_SERVER:[()=>t=>e=>{const r=e.payload;let n=r.postContent;const o=[];return Object.keys(n).forEach((t=>{const e=n[t];if("divi/accordion"===e.name&&e.children.length>0){const t=e.children[0];let r=null;(0,p.forEach)(e.children,(t=>{const e=n[t]?.props?.attrs;return!e?.module?.advanced?.open||(r=t,!1)})),r&&r!==t&&(o.push({path:[t,"props","attrs","module","advanced","open","desktop","value"],value:"on"}),o.push({type:"remove",moduleKey:r,attribute:"module.advanced.open"}))}})),(0,p.isEmpty)(o)?t(e):((0,p.forEach)(o,(t=>{if("remove"===t.type){const e=n[t.moduleKey]?.props?.attrs;e?.module?.advanced?.open?.desktop?.value&&(n=n.setIn([t.moduleKey,"props","attrs","module","advanced"],e?.module.advanced.without("open")))}else n=n.setIn(t.path,t.value)})),t({...e,payload:{...r,postContent:n}}))}]},k=(t,e)=>"SYNC_TO_SERVER"===e.type?t.setIn(["postContent","content"],E((0,p.get)(e,"payload.postContent",{}))):t,A=(t,e,r=null)=>{const n=(0,p.isArray)(e)?e:[e];return t.getIn(n,r)},P=t=>{const e=A(t,["postContent","content"]);return f(e)},C=()=>{if((0,s.select)("divi/settings")||(0,u.registerSettingsStore)(),(0,s.select)("divi/module-library")||(0,l.registerModuleLibraryStore)(),(0,s.select)("divi/serialized-post"))return;const r=c.maybeUnwrapPlaceholderBlock,n=i()({postContent:{title:(0,s.select)("divi/settings").getSetting(["post","title"]),content:r((0,s.select)("divi/settings").getSetting(["post","content"]))}}),o=(0,s.registerStore)("divi/serialized-post",{actions:t,reducer:k,selectors:e,initialState:n});(0,a.applyMiddlewares)(o,_),(0,a.applyEffects)(o,I)}}(),(window.divi=window.divi||{}).serializedPost=n}();